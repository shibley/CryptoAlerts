(function(){"use strict";var e={};global.Serenity=global.Serenity||{};global.Serenity.Reporting=global.Serenity.Reporting||{};global.System=global.System||{};global.System.ComponentModel=global.System.ComponentModel||{};ss.initAssembly(e,"Serenity.Script.UI");var t=function(e,t){fi.call(this,e,null);var i=ss.getEnumerator(t);try{while(i.moveNext()){var s=i.current();var n=s.name;var r=Q.tryGetText(s.title);if(ss.isNullOrUndefined(r)){var a=s.title;if(ss.isNullOrUndefined(a)){a=s.name}r=a}this.addOption(n,r,s,false)}}finally{i.dispose()}};t.__typeName="Serenity.$FilterPanel$FieldSelect";var i=function(e,t){fi.call(this,e,null);var i=ss.getEnumerator(t);try{while(i.moveNext()){var s=i.current();var n=s.title;if(ss.isNullOrUndefined(n)){var r=Q.tryGetText("Controls.FilterPanel.OperatorNames."+s.key);if(ss.isNullOrUndefined(r)){r=s.key}n=r}var a=n;this.addOption(s.key,a,s,false)}}finally{i.dispose()}var l=null;var o=ss.getEnumerator(t);if(o.moveNext()){l=o.current()}if(ss.isValue(l)){this.set_value(l.key)}};i.__typeName="Serenity.$FilterPanel$OperatorSelect";var s=function(e,t){wt.call(this,e,t)};s.__typeName="Serenity.AsyncLookupEditor";global.Serenity.AsyncLookupEditor=s;var n=function(e){var t=function(){this.editor=null;r.call(this)};ss.registerGenericClassInstance(t,n,[e],{useEditor:function(){switch(this.get_operator().key){case"eq":case"ne":case"lt":case"le":case"gt":case"ge":{return true}}return false},createEditor:function(){if(this.useEditor()){this.editor=Serenity.Widget.create({type:e,container:this.get_container(),options:this.getEditorOptions(),init:null});return}r.prototype.createEditor.call(this)},useIdField:function(){return false},getCriteriaField:function(){if(this.useEditor()&&this.useIdField()&&!Q.isEmptyOrNull(this.get_field().filteringIdField)){return this.get_field().filteringIdField}return r.prototype.getCriteriaField.call(this)},getEditorOptions:function(){var e=Q.deepClone({},this.get_field().editorParams);delete e["cascadeFrom"];return Q.deepClone(e,this.get_field().filteringParams)},loadState:function(e){if(this.useEditor()){if(ss.isNullOrUndefined(e)){return}P.setValue(this.editor,e);return}r.prototype.loadState.call(this,e)},saveState:function(){if(this.useEditor()){return P.getValue(this.editor)}return r.prototype.saveState.call(this)},getEditorValue:function(){if(this.useEditor()){var e=P.getValue(this.editor);if(ss.isNullOrUndefined(e)||ss.isInstanceOfType(e,String)&&ss.cast(e,String).trim().length===0){throw this.argumentNull()}return e}return r.prototype.getEditorValue.call(this)},initQuickFilter:function(t){r.prototype.initQuickFilter.call(this,t);t.type=e;t.options=Q.deepClone({},this.getEditorOptions(),this.get_field().quickFilterParams)}},function(){return r},function(){return[St,kt]});return t};n.__typeName="Serenity.BaseEditorFiltering$1";ss.initGenericClass(n,e,1);global.Serenity.BaseEditorFiltering$1=n;var r=function(){this.$1$FieldField=null;this.$1$ContainerField=null;this.$1$OperatorField=null};r.__typeName="Serenity.BaseFiltering";global.Serenity.BaseFiltering=r;var a=function(){r.call(this)};a.__typeName="Serenity.BooleanFiltering";global.Serenity.BooleanFiltering=a;var l=function(){this.$1$FalseTextField=null;this.$1$TrueTextField=null};l.__typeName="Serenity.BooleanFormatter";global.Serenity.BooleanFormatter=l;var o=function(e){var t=function(e,t){this.$widget=null;this.$parentChange=null;this.$parentID=null;this.$widget=e;this.$parentChange=t;this.bind();this.$widget.element.bind("remove."+e.uniqueName+"cwh",ss.mkdel(this,function(e){this.unbind();this.$widget=null;this.$parentChange=null}))};ss.registerGenericClassInstance(t,o,[e],{bind:function(){if(Q.isEmptyOrNull(this.$parentID)){return null}var t=Q.findElementWithRelativeId(this.$widget.element,this.$parentID).tryGetWidget(e);if(ss.isValue(t)){t.element.bind("change."+this.$widget.uniqueName,ss.mkdel(this,function(){this.$parentChange(t)}));return t}else{Q.notifyError("Can't find cascaded parent element with ID: "+this.$parentID+"!","",null);return null}},unbind:function(){if(Q.isEmptyOrNull(this.$parentID)){return null}var t=Q.findElementWithRelativeId(this.$widget.element,this.$parentID).tryGetWidget(e);if(ss.isValue(t)){t.element.unbind("."+this.$widget.uniqueName)}return t},get_parentID:function(){return this.$parentID},set_parentID:function(e){if(!ss.referenceEquals(this.$parentID,e)){this.unbind();this.$parentID=e;this.bind()}}},function(){return null},function(){return[]});return t};o.__typeName="Serenity.CascadedWidgetLink$1";ss.initGenericClass(o,e,1);global.Serenity.CascadedWidgetLink$1=o;var u=function(e){this.category=null;this.category=e};u.__typeName="Serenity.CategoryAttribute";global.Serenity.CategoryAttribute=u;var d=function(){};d.__typeName="Serenity.CheckboxFormatter";global.Serenity.CheckboxFormatter=d;var c=function(e,t){this.$byId=null;p.call(this,e,t);e.addClass("s-CheckTreeEditor");this.updateItems()};c.__typeName="Serenity.CheckTreeEditor";global.Serenity.CheckTreeEditor=c;var f=function(e){this.value=false;this.collapsed=false;this.value=e};f.__typeName="Serenity.CollapsibleAttribute";global.Serenity.CollapsibleAttribute=f;var h=function(e){this.cssClass=null;this.cssClass=e};h.__typeName="Serenity.CssClassAttribute";global.Serenity.CssClassAttribute=h;var p=function(e,t){this.titleDiv=null;this.toolbar=null;this.filterBar=null;this.quickFiltersDiv=null;this.view=null;this.slickContainer=null;this.slickGrid=null;this.allColumns=null;this.initialSettings=null;this.restoringSettings=0;this.$idProperty=null;this.$isActiveProperty=null;this.$localTextDbPrefix=null;this.$isDisabled=false;this.$4$submitHandlersField=null;this.rows=null;this.$slickGridOnSort=null;this.$slickGridOnClick=null;this.openDialogsAsPanel=null;Serenity.Widget.call(this,e,t);var i=this;this.element.addClass("s-DataGrid").html("");this.element.addClass("s-"+ss.getTypeName(ss.getInstanceType(this)));this.element.addClass("require-layout").bind("layout."+this.uniqueName,function(){i.layout()});this.setTitle(this.getInitialTitle());var s=this.getButtons();if(ss.isValue(s)){this.createToolbar(s)}this.slickContainer=this.createSlickContainer();this.view=this.createView();this.slickGrid=this.createSlickGrid();if(this.enableFiltering()){this.createFilterBar()}if(this.usePager()){this.createPager()}this.bindToSlickEvents();this.bindToViewEvents();if(ss.isValue(s)){this.createToolbarExtensions()}this.createQuickFilters();this.updateDisabledState();if(!this.isAsyncWidget()){this.initialSettings=this.getCurrentSettings(null);this.restoreSettings(null,null);window.setTimeout(ss.mkdel(this,this.initialPopulate),0)}};p.__typeName="Serenity.DataGrid";global.Serenity.DataGrid=p;var m=function(e){this.$4$MinValueField=null;this.$4$MaxValueField=null;this.yearRange=null;Serenity.Widget.call(this,e,new Object);e.addClass("dateQ");e.datepicker({showOn:"button",beforeShow:function(){return!e.hasClass("readonly")},yearRange:ss.coalesce(this.yearRange,"-100:+50")});e.bind("keyup."+this.uniqueName,ss.mkdel(this,function(e){if(e.which===32&&!this.get_readOnly()){if(!ss.staticEquals(this.get_valueAsDate(),ss.today())){this.set_valueAsDate(ss.today());this.element.trigger("change")}}else{m.dateInputKeyup(e)}}));e.bind("change."+this.uniqueName,m.dateInputChange);xi.addValidationRule(e,this.uniqueName,ss.mkdel(this,function(e){var t=this.get_value();if(ss.isNullOrEmptyString(t)){return null}if(!ss.isNullOrEmptyString(this.get_minValue())&&ss.compareStrings(t,this.get_minValue())<0){return ss.formatString(Q.text("Validation.MinDate"),Q.formatDate(this.get_minValue(),null))}if(!ss.isNullOrEmptyString(this.get_maxValue())&&ss.compareStrings(t,this.get_maxValue())>=0){return ss.formatString(Q.text("Validation.MaxDate"),Q.formatDate(this.get_maxValue(),null))}return null}));this.set_sqlMinMax(true)};m.__typeName="Serenity.DateEditor";m.dateInputChange=function(e){if(Q.Culture.dateOrder!=="dmy"){return}var t=$(e.target);if(!t.is(":input")){return}var i=ss.coalesce(t.val(),"");var s={};if(i.length>=6&&ss.Int32.tryParse(i,s)){t.val(i.substr(0,2)+Q.Culture.dateSeparator+i.substr(2,2)+Q.Culture.dateSeparator+i.substr(4))}i=ss.coalesce(t.val(),"");if(!!(i.length>=5&&!ss.referenceEquals(Q.parseDate(i),false))){var n=Q.parseDate(i);t.val(Q.formatDate(n,null))}};m.dateInputKeyup=function(e){if(Q.Culture.dateOrder!=="dmy"){return}var t=$(e.target);if(!t.is(":input")){return}if(t.is("[readonly]")||t.is(":disabled")){return}var i=ss.coalesce(t.val(),"");if(!!(i.length===0||!ss.referenceEquals(t[0].selectionEnd,i.length))){return}if(i.indexOf(Q.Culture.dateSeparator+Q.Culture.dateSeparator)!==-1){t.val(ss.replaceAllString(i,Q.Culture.dateSeparator+Q.Culture.dateSeparator,Q.Culture.dateSeparator));return}if(e.which===47||e.which===111){if(i.length>=2&&ss.referenceEquals(String.fromCharCode(i.charCodeAt(i.length-1)),Q.Culture.dateSeparator)&&ss.referenceEquals(String.fromCharCode(i.charCodeAt(i.length-2)),Q.Culture.dateSeparator)){t.val(i.substr(0,i.length-1));return}if(!ss.referenceEquals(String.fromCharCode(i.charCodeAt(i.length-1)),Q.Culture.dateSeparator)){return}switch(i.length){case 2:{if(m.$isNumeric(i.charCodeAt(0))){i="0"+i;break}else{return}}case 4:{if(m.$isNumeric(i.charCodeAt(0))&&m.$isNumeric(i.charCodeAt(2))&&ss.referenceEquals(String.fromCharCode(i.charCodeAt(1)),Q.Culture.dateSeparator)){i="0"+String.fromCharCode(i.charCodeAt(0))+Q.Culture.dateSeparator+"0"+String.fromCharCode(i.charCodeAt(2))+Q.Culture.dateSeparator;break}else{return}}case 5:{if(m.$isNumeric(i.charCodeAt(0))&&m.$isNumeric(i.charCodeAt(2))&&m.$isNumeric(i.charCodeAt(3))&&ss.referenceEquals(String.fromCharCode(i.charCodeAt(1)),Q.Culture.dateSeparator)){i="0"+i;break}else if(m.$isNumeric(i.charCodeAt(0))&&m.$isNumeric(i.charCodeAt(1))&&m.$isNumeric(i.charCodeAt(3))&&ss.referenceEquals(String.fromCharCode(i.charCodeAt(2)),Q.Culture.dateSeparator)){i=String.fromCharCode(i.charCodeAt(0))+String.fromCharCode(i.charCodeAt(1))+Q.Culture.dateSeparator+"0"+String.fromCharCode(i.charCodeAt(3))+Q.Culture.dateSeparator;break}else{break}}default:{return}}t.val(i)}if(i.length<6&&(e.which>=48&&e.which<=57||e.which>=96&&e.which<=105)&&m.$isNumeric(i.charCodeAt(i.length-1))){switch(i.length){case 1:{if(i.charCodeAt(0)<=51){return}i="0"+i;break}case 2:{if(!m.$isNumeric(i.charCodeAt(0))){return}break}case 3:{if(!m.$isNumeric(i.charCodeAt(0))||!ss.referenceEquals(String.fromCharCode(i.charCodeAt(1)),Q.Culture.dateSeparator)||i.charCodeAt(2)<=49){return}i="0"+String.fromCharCode(i.charCodeAt(0))+Q.Culture.dateSeparator+"0"+String.fromCharCode(i.charCodeAt(2));break}case 4:{if(ss.referenceEquals(String.fromCharCode(i.charCodeAt(1)),Q.Culture.dateSeparator)){if(!m.$isNumeric(i.charCodeAt(0))||!m.$isNumeric(i.charCodeAt(2))){return}i="0"+i;break}else if(ss.referenceEquals(String.fromCharCode(i.charCodeAt(2)),Q.Culture.dateSeparator)){if(!m.$isNumeric(i.charCodeAt(0))||!m.$isNumeric(i.charCodeAt(1))||i.charCodeAt(3)<=49){return}i=String.fromCharCode(i.charCodeAt(0))+String.fromCharCode(i.charCodeAt(1))+Q.Culture.dateSeparator+"0"+String.fromCharCode(i.charCodeAt(3));break}else{return}}case 5:{if(!ss.referenceEquals(String.fromCharCode(i.charCodeAt(2)),Q.Culture.dateSeparator)||!m.$isNumeric(i.charCodeAt(0))||!m.$isNumeric(i.charCodeAt(1))||!m.$isNumeric(i.charCodeAt(3))){return}break}default:{return}}t.val(i+Q.Culture.dateSeparator)}};m.$isNumeric=function(e){return e>=48&&e<=57};m.defaultAutoNumericOptions=function(){return{aDec:Q.Culture.decimalSeparator,altDec:Q.Culture.decimalSeparator==="."?",":".",aSep:Q.Culture.decimalSeparator==="."?",":".",aPad:true}};global.Serenity.DateEditor=m;var g=function(){ss.makeGenericType(n,[m]).call(this)};g.__typeName="Serenity.DateFiltering";global.Serenity.DateFiltering=g;var y=function(){this.$1$DisplayFormatField=null;this.set_displayFormat(Q.Culture.dateFormat)};y.__typeName="Serenity.DateFormatter";y.format=function(e,t){if(!ss.isValue(e)){return""}var i;if(typeof e==="date"){i=e}else if(typeof e==="string"){i=Q.parseISODateTime(e);if(ss.staticEquals(i,null)){return Q.htmlEncode(e)}}else{return e.toString()}return Q.htmlEncode(Q.formatDate(i,t))};global.Serenity.DateFormatter=y;var v=function(e,t){this.$time=null;this.$4$MinValueField=null;this.$4$MaxValueField=null;Serenity.Widget.call(this,e,t);e.addClass("dateQ s-DateTimeEditor").datepicker({showOn:"button",beforeShow:function(){return!e.hasClass("readonly")},yearRange:ss.coalesce(this.options.yearRange,"-100:+50")});e.bind("keyup."+this.uniqueName,ss.mkdel(this,function(e){if(e.which===32&&!this.get_readOnly()){if(!ss.staticEquals(this.get_valueAsDate(),new Date)){this.set_valueAsDate(new Date);this.element.trigger("change")}}else{m.dateInputKeyup(e)}}));e.bind("change."+this.uniqueName,m.dateInputChange);this.$time=$("<select/>").addClass("editor s-DateTimeEditor time");var i=e.next(".ui-datepicker-trigger");if(i.length>0){this.$time.insertAfter(i)}else{i=e.prev(".ui-datepicker-trigger");if(i.length>0){this.$time.insertBefore(i)}else{this.$time.insertAfter(e)}}var s=v.$getTimeOptions(ss.coalesce(this.options.startHour,0),0,ss.coalesce(this.options.endHour,23),59,ss.coalesce(this.options.intervalMinutes,5));for(var n=0;n<s.length;n++){var r=s[n];Q.addOption(this.$time,r,r)}xi.addValidationRule(e,this.uniqueName,ss.mkdel(this,function(e){var t=this.get_value();if(ss.isNullOrEmptyString(t)){return null}if(!ss.isNullOrEmptyString(this.get_minValue())&&ss.compareStrings(t,this.get_minValue())<0){return ss.formatString(Q.text("Validation.MinDate"),Q.formatDate(this.get_minValue(),null))}if(!ss.isNullOrEmptyString(this.get_maxValue())&&ss.compareStrings(t,this.get_maxValue())>=0){return ss.formatString(Q.text("Validation.MaxDate"),Q.formatDate(this.get_maxValue(),null))}return null}));this.set_sqlMinMax(true);$("<div class='inplace-button inplace-now'><b></b></div>").attr("title","set to now").insertAfter(this.$time).click(ss.mkdel(this,function(e){if(this.element.hasClass("readonly")){return}this.set_valueAsDate(new Date)}));this.$time.on("change",function(t){e.triggerHandler("change")})};v.__typeName="Serenity.DateTimeEditor";v.$getTimeOptions=function(e,t,i,s,n){var r=[];if(i>=23){i=23}if(s>=60){s=59}var a=e;var l=t;while(true){if(a>i||a===i&&l>s){break}var o=(a>=10?"":"0")+a+":"+(l>=10?"":"0")+l;r.push(o);l+=n;if(l>=60){l-=60;a++}}return r};v.roundToMinutes=function(e,t){e=new Date(e.getTime());var i=ss.Int32.trunc(ss.round(e.getMinutes()/t)*t);e.setMinutes(i);e.setSeconds(0);e.setMilliseconds(0);return e};global.Serenity.DateTimeEditor=v;var S=function(){ss.makeGenericType(n,[m]).call(this)};S.__typeName="Serenity.DateTimeFiltering";global.Serenity.DateTimeFiltering=S;var C=function(){y.call(this);this.set_displayFormat(Q.Culture.dateTimeFormat)};C.__typeName="Serenity.DateTimeFormatter";global.Serenity.DateTimeFormatter=C;var b=function(e,t){hi.call(this,e,t);this.updateItems()};b.__typeName="Serenity.DateYearEditor";global.Serenity.DateYearEditor=b;var T=function(){};T.__typeName="Serenity.DateYearEditorOptions";T.createInstance=function(){return T.$ctor()};T.$ctor=function(){var e=pi.$ctor();e.minYear=null;e.maxYear=null;e.descending=false;e.minYear="-10";e.maxYear="+0";return e};T.isInstanceOfType=function(){return true};global.Serenity.DateYearEditorOptions=T;var _=function(e,t){Serenity.Widget.call(this,e,t);e.addClass("decimalQ");var i=$.extend(_.defaultAutoNumericOptions(),{vMin:this.options.minValue,vMax:this.options.maxValue});if(ss.isValue(this.options.decimals)){i.mDec=ss.unbox(this.options.decimals)}if(ss.isValue(this.options.padDecimals)){i.aPad=ss.unbox(this.options.padDecimals)}e.autoNumeric(i)};_.__typeName="Serenity.DecimalEditor";_.defaultAutoNumericOptions=function(){return{aDec:Q.Culture.decimalSeparator,altDec:Q.Culture.decimalSeparator==="."?",":".",aSep:Q.Culture.decimalSeparator==="."?",":".",aPad:true}};global.Serenity.DecimalEditor=_;var O=function(){};O.__typeName="Serenity.DecimalEditorOptions";O.createInstance=function(){return O.$ctor()};O.$ctor=function(){var e={};e.minValue=null;e.maxValue=null;e.decimals=null;e.padDecimals=null;e.minValue="0.00";e.maxValue="999999999999.99";return e};O.isInstanceOfType=function(){return true};global.Serenity.DecimalEditorOptions=O;var x=function(){ss.makeGenericType(n,[_]).call(this)};x.__typeName="Serenity.DecimalFiltering";global.Serenity.DecimalFiltering=x;var k=function(e){this.value=null;this.value=e};k.__typeName="Serenity.DefaultValueAttribute";global.Serenity.DefaultValueAttribute=k;var E=function(){};E.__typeName="Serenity.DialogExtensions";E.dialogFlexify=function(e){var t=new it(e.closest(".ui-dialog"),{});return e};E.dialogResizable=function(e,t,i,s,n){var r=e.dialog();r.dialog("option","resizable",true);if(ss.isValue(s)){r.dialog("option","minWidth",ss.unbox(s))}if(ss.isValue(t)){r.dialog("option","width",ss.unbox(t))}if(ss.isValue(n)){r.dialog("option","minHeight",ss.unbox(n))}if(ss.isValue(i)){r.dialog("option","height",ss.unbox(i))}return e};E.dialogMaximizable=function(e){e.dialogExtend({closable:true,maximizable:true,dblclick:"maximize",icons:{maximize:"ui-icon-maximize-window"}});return e};E.dialogCloseOnEnter=function(e){e.bind("keydown",function(e){if(e.which!==E.$enterKeyCode){return}var t=e.target.tagName.toLowerCase();if(t==="button"||t==="select"||t==="textarea"||t==="input"&&e.target.getAttribute("type")==="button"){return}var i=$(this);if(!i.hasClass("ui-dialog")){i=i.closest(".ui-dialog")}var s=i.children(".ui-dialog-buttonpane").find("button");if(s.length>0){var n=s.find(".default-button");if(n.length>0){s=n}}var r=s.eq(0);if(!r.is(":disabled")){e.preventDefault();r.trigger("click")}});return e};global.Serenity.DialogExtensions=E;var I=function(){};I.__typeName="Serenity.DialogTypeRegistry";I.$search=function(e){var t=ss.getType(e);if(ss.isValue(t)&&ss.isAssignableFrom(yt,t)){return t}for(var i=0;i<Q.Config.rootNamespaces.length;i++){var s=Q.Config.rootNamespaces[i];t=ss.getType(s+"."+e);if(ss.isValue(t)&&ss.isAssignableFrom(yt,t)){return t}}return null};I.tryGet=function(e){if(!ss.keyExists(I.$knownTypes,e)){var t=e;var i=I.$search(t);if(ss.isNullOrUndefined(i)&&!ss.endsWithString(e,"Dialog")){t=e+"Dialog";i=I.$search(t)}if(ss.isNullOrUndefined(i)){return null}I.$knownTypes[e]=i;return i}return I.$knownTypes[e]};I.get=function(e){var t=I.tryGet(e);if(ss.isNullOrUndefined(t)){var i=e+" dialog class is not found! Make sure there is a dialog class with this name, "+"it is under your project root namespace, and your namespace parts start with capital letters, "+"e.g. MyProject.Pascal.Cased namespace. If you got this error from an editor with InplaceAdd option "+"check that lookup key and dialog type name matches (case sensitive, excluding Dialog suffix). "+"You need to change lookup key or specify DialogType property in LookupEditor attribute if that's not the case.";Q.notifyError(i,"",null);throw new ss.Exception(i)}return t};global.Serenity.DialogTypeRegistry=I;var F=function(){this.$3$EditorTypeField=null;this.$3$UseRelativeField=false;this.$3$UseLikeField=false;ss.makeGenericType(n,[Object]).call(this)};F.__typeName="Serenity.EditorFiltering";global.Serenity.EditorFiltering=F;var N=function(e,t){this.key=null;this.value=null;this.key=e;this.value=t};N.__typeName="Serenity.EditorOptionAttribute";global.Serenity.EditorOptionAttribute=N;var w=function(e){V.call(this,e)};w.__typeName="Serenity.EditorTypeAttribute";global.Serenity.EditorTypeAttribute=w;var V=function(e){this.editorType=null;this.editorType=e};V.__typeName="Serenity.EditorTypeAttributeBase";global.Serenity.EditorTypeAttributeBase=V;var D=function(e){var t=pi.$ctor();t.emptyOptionText=Q.text("Controls.SelectEditor.EmptyItemText");hi.call(this,e,t)};D.__typeName="Serenity.EditorTypeEditor";global.Serenity.EditorTypeEditor=D;var A=function(){};A.__typeName="Serenity.EditorTypeRegistry";A.get=function(e){if(Q.isEmptyOrNull(e)){throw new ss.ArgumentNullException("key")}A.$initialize();var t=A.$knownTypes[e.toLowerCase()];if(ss.isNullOrUndefined(t)){throw new ss.Exception(ss.formatString("Can't find {0} editor type!",e))}return t};A.$initialize=function(){if(ss.isValue(A.$knownTypes)){return}A.$knownTypes={};var e=ss.getAssemblies();for(var t=0;t<e.length;t++){var i=e[t];var s=ss.getAssemblyTypes(i);for(var n=0;n<s.length;n++){var r=s[n];if(!(r.prototype instanceof Serenity.Widget)){continue}if(ss.isGenericTypeDefinition(r)){continue}var a=ss.getTypeFullName(r).toLowerCase();A.$knownTypes[a]=r;var l=ss.getAttributes(r,Serenity.EditorAttribute,false);if(ss.isValue(l)&&l.length>0){var o=l[0].key;if(!Q.isEmptyOrNull(o)){A.$knownTypes[o.toLowerCase()]=r}}for(var u=0;u<Q.Config.rootNamespaces.length;u++){var d=Q.Config.rootNamespaces[u];if(ss.startsWithString(a,d.toLowerCase()+".")){var c=a.substr(d.length+1).toLowerCase();if(ss.isNullOrUndefined(A.$knownTypes[c])){A.$knownTypes[c]=r}}}}}A.$setTypeKeysWithoutEditorSuffix()};A.reset=function(){A.$knownTypes=null};A.$setTypeKeysWithoutEditorSuffix=function(){var e="editor";var t=Object.keys(A.$knownTypes);for(var i=0;i<t.length;i++){var s=t[i];if(!ss.endsWithString(s,e)){continue}var n=s.substr(0,s.length-e.length);if(Q.isEmptyOrNull(n)){continue}if(ss.isValue(A.$knownTypes[n])){continue}A.$knownTypes[n]=A.$knownTypes[s]}};global.Serenity.EditorTypeRegistry=A;var P=function(){};P.__typeName="Serenity.EditorUtils";P.getDisplayText=function(e){var t=e.element.data("select2");if(ss.isValue(t)){var i=e.element.select2("data");if(ss.isNullOrUndefined(i)){i=new Object}return ss.cast(ss.coalesce(i.text,""),String)}var s=P.getValue(e);if(ss.isNullOrUndefined(s)){return""}if(ss.isInstanceOfType(s,String)){return ss.safeCast(s,String)}if(ss.isInstanceOfType(s,Boolean)){return!!s?ss.coalesce(Q.tryGetText("Controls.FilterPanel.OperatorNames.true"),"True"):ss.coalesce(Q.tryGetText("Controls.FilterPanel.OperatorNames.true"),"False")}return s.toString()};P.getValue=function(e){var t={};P.saveValue(e,P.$dummy,t);return t["_"]};P.saveValue=function(e,t,i){var s=ss.safeCast(e,Serenity.IGetEditValue);if(ss.isValue(s)){s.getEditValue(t,i);return}var n=ss.safeCast(e,Serenity.IStringValue);if(ss.isValue(n)){i[t.name]=n.get_value();return}var r=ss.safeCast(e,Serenity.IBooleanValue);if(ss.isValue(r)){i[t.name]=r.get_value();return}var a=ss.safeCast(e,Serenity.IDoubleValue);if(ss.isValue(a)){var l=a.get_value();i[t.name]=isNaN(l)?null:l;return}if(!!ss.isValue(e.getEditValue)){e.getEditValue(t,i);return}if(e.element.is(":input")){i[t.name]=e.element.val();return}};P.setValue=function(e,t){var i={_:t};P.loadValue(e,P.$dummy,i)};P.loadValue=function(e,t,i){var s=ss.safeCast(e,Serenity.ISetEditValue);if(ss.isValue(s)){s.setEditValue(i,t);return}var n=ss.safeCast(e,Serenity.IStringValue);if(ss.isValue(n)){var r=i[t.name];if(!!ss.isValue(r)){r=r.toString()}n.set_value(ss.cast(r,String));return}var a=ss.safeCast(e,Serenity.IBooleanValue);if(ss.isValue(a)){var l=i[t.name];if(typeof l==="number"){a.set_value(l>0)}else{a.set_value(!!l)}return}var o=ss.safeCast(e,Serenity.IDoubleValue);if(ss.isValue(o)){var u=i[t.name];if(!!(ss.isNullOrUndefined(u)||ss.isInstanceOfType(u,String)&&Q.isTrimmedEmpty(ss.cast(u,String)))){o.set_value(null)}else if(ss.isInstanceOfType(u,String)){o.set_value(ss.cast(Q.parseDecimal(ss.cast(u,String)),Number))}else if(ss.isInstanceOfType(u,Boolean)){o.set_value(!!u?1:0)}else{o.set_value(ss.cast(u,Number))}return}if(!!ss.isValue(e.setEditValue)){e.setEditValue(i,t);return}if(e.element.is(":input")){var d=i[t.name];if(!!!ss.isValue(d)){e.element.val("")}else{e.element.val(d)}return}};P.setReadonly=function(e,t){e.each(function(e,i){var s=$(i);var n=s.attr("type");if(s.is("select")||n==="radio"||n==="checkbox"){if(t){s.addClass("readonly").attr("disabled","disabled")}else{s.removeClass("readonly").removeAttr("disabled")}}else if(t){s.addClass("readonly").attr("readonly","readonly")}else{s.removeClass("readonly").removeAttr("readonly")}return true});return e};P.setReadOnly=function(e,t){var i=ss.safeCast(e,Et);if(ss.isValue(i)){i.set_readOnly(t)}else if(e.element.is(":input")){P.setReadonly(e.element,t)}};P.setRequired=function(e,t){var i=ss.safeCast(e,Ft);if(ss.isValue(i)){i.set_required(t)}else if(e.element.is(":input")){e.element.toggleClass("required",!!t)}var s=Ei.getGridField(e);var n=s.find("sup").get().length>0;if(t&&!n){$("<sup>*</sup>").attr("title",Q.text("Controls.PropertyGrid.RequiredHint")).prependTo(s.find(".caption")[0])}else if(!t&&n){$(s.find("sup")[0]).remove()}};global.Serenity.EditorUtils=P;var U=function(e,t){Serenity.Widget.call(this,e,t);U.registerValidationMethods();e.addClass("emailuser").removeClass("flexify");var i=$("<span/>").text("@").addClass("emailat").insertAfter(e);var s=$('<input type="text"/>').addClass("emaildomain").addClass("flexify").insertAfter(i);s.bind("blur."+this.uniqueName,function(){var t=s.closest("form").data("validator");if(ss.isValue(t)){t.element(e[0])}});if(!Q.isEmptyOrNull(this.options.domain)){s.val(this.options.domain)}if(this.options.readOnlyDomain){s.attr("readonly","readonly").addClass("disabled").attr("tabindex","-1")}e.bind("keypress."+this.uniqueName,ss.mkdel(this,function(e){if(e.which===64){e.preventDefault();if(!this.options.readOnlyDomain){s.focus();s.select()}}}));s.bind("keypress."+this.uniqueName,function(e){if(e.which===64){e.preventDefault()}});if(!this.options.readOnlyDomain){e.change(ss.mkdel(this,function(t){this.set_value(e.val())}))}};U.__typeName="Serenity.EmailEditor";U.registerValidationMethods=function(){if(ss.staticEquals($.validator.methods["emailuser"],null)){$.validator.addMethod("emailuser",function(e,t){var i=$(t).nextAll(".emaildomain");if(i.length>0&&ss.isNullOrUndefined(i.attr("readonly"))){if(this.optional(t)&&this.optional(i[0])){return true}e=e+"@"+i.val();if(Q.Config.emailAllowOnlyAscii){return new RegExp("^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$").test(e)}return new RegExp("^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$","i").test(e)}else{if(Q.Config.emailAllowOnlyAscii){return this.optional(t)||new RegExp("^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+$").test(e)}return this.optional(t)||new RegExp("^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))$","i").test(e)}},"Lütfen geçerli bir e-posta adresi giriniz!")}};global.Serenity.EmailEditor=U;var B=function(){};B.__typeName="Serenity.EmailEditorOptions";B.createInstance=function(){return B.$ctor()};B.$ctor=function(){var e={};e.domain=null;e.readOnlyDomain=false;return e};B.isInstanceOfType=function(){return true};global.Serenity.EmailEditorOptions=B;var G=function(e){this.entity=null;this.entityId=null;this.$entityType=null;this.$entitySingular=null;this.$formKey=null;this.$idProperty=null;this.$isActiveProperty=null;this.$localTextDbPrefix=null;this.$nameProperty=null;this.$service=null;this.localizationGrid=null;this.localizationButton=null;this.localizationLastValue=null;this.localizationPendingValue=null;this.propertyGrid=null;this.saveAndCloseButton=null;this.applyChangesButton=null;this.deleteButton=null;this.undeleteButton=null;this.cloneButton=null;Serenity.TemplatedDialog.call(this,e);if(!this.isAsyncWidget()){this.$initPropertyGrid();this.$initLocalizationGrid()}};G.__typeName="Serenity.EntityDialog";global.Serenity.EntityDialog=G;var q=function(e,t){this.$entityType=null;this.$displayName=null;this.$itemName=null;this.$service=null;this.$dialogType=null;p.call(this,e,t);this.element.addClass("route-handler").bind("handleroute."+this.uniqueName,ss.mkdel(this,function(e,t){if(!!t.handled){return}if(!!(t.route==="new")){t.handled=true;this.addButtonClick();return}var i=t.route.split("/");if(!!(ss.referenceEquals(i.length,2)&&i[0]==="edit")){t.handled=true;this.editItem(i[1]);return}if(!!(ss.referenceEquals(i.length,2)&&i[1]==="new")){t.handled=true;this.editItemOfType(ss.cast(i[0],String),null);return}if(!!(ss.referenceEquals(i.length,3)&&i[1]==="edit")){t.handled=true;this.editItemOfType(ss.cast(i[0],String),i[2])}}))};q.__typeName="Serenity.EntityGrid";global.Serenity.EntityGrid=q;var M=function(e,t){fi.call(this,e,t);this.updateItems()};M.__typeName="Serenity.EnumEditor";global.Serenity.EnumEditor=M;var L=function(){};L.__typeName="Serenity.EnumEditorOptions";L.createInstance=function(){return L.$ctor()};L.$ctor=function(){var e={};e.enumKey=null;e.enumType=null;e.allowClear=null;return e};L.isInstanceOfType=function(){return true};global.Serenity.EnumEditorOptions=L;var R=function(){ss.makeGenericType(n,[M]).call(this)};R.__typeName="Serenity.EnumFiltering";global.Serenity.EnumFiltering=R;var W=function(){this.$1$EnumKeyField=null};W.__typeName="Serenity.EnumFormatter";W.format=function(e,t){if(!ss.isValue(t)){return""}var i;try{i=ss.Enum.toString(e,t)}catch(s){s=ss.Exception.wrap(s);if(ss.isInstanceOfType(s,ss.ArgumentException)){i=t.toString()}else{throw s}}var n=ss.getAttributes(e,Serenity.EnumKeyAttribute,false);var r=n.length>0?n[0].value:ss.getTypeFullName(e);return W.getText$1(r,i)};W.getText$1=function(e,t){return Q.htmlEncode(ss.coalesce(Q.tryGetText("Enums."+e+"."+t),t))};W.getText=function(e){return function(t){if(!ss.isValue(t)){return""}return W.format(e,ss.unbox(t))}};W.getName=function(e){return function(t){if(!ss.isValue(t)){return""}return ss.Enum.toString(e,ss.unbox(t))}};global.Serenity.EnumFormatter=W;var z=function(){};z.__typeName="Serenity.EnumTypeRegistry";z.tryGet=function(e){if(ss.isNullOrUndefined(z.$knownTypes)){z.$knownTypes={};var t=ss.getAssemblies();for(var i=0;i<t.length;i++){var s=t[i];var n=ss.getAssemblyTypes(s);for(var r=0;r<n.length;r++){var a=n[r];if(ss.isEnum(a)){var l=ss.getTypeFullName(a);z.$knownTypes[l]=a;var o=ss.getAttributes(a,Serenity.EnumKeyAttribute,false);if(ss.isValue(o)&&o.length>0){z.$knownTypes[o[0].value]=a}for(var u=0;u<Q.Config.rootNamespaces.length;u++){var d=Q.Config.rootNamespaces[u];if(ss.startsWithString(l,d+".")){z.$knownTypes[l.substr(d.length+1)]=a}}}}}}if(!ss.keyExists(z.$knownTypes,e)){return null}return z.$knownTypes[e]};z.get=function(e){var t=z.tryGet(e);if(ss.isNullOrUndefined(t)){var i=ss.formatString("Can't find {0} enum type! If you have recently defined this enum type in server side code, make sure your project builds successfully and transform T4 templates. Also make sure that enum is under your project root namespace, and your namespace parts starts with capital letters, e.g. MyProject.Pascal.Cased namespace",e);Q.notifyError(i,"",null);throw new ss.Exception(i)}return t};global.Serenity.EnumTypeRegistry=z;var H=function(){this.$1$DisplayFormatField=null;
this.$1$OriginalNamePropertyField=null};H.__typeName="Serenity.FileDownloadFormatter";H.dbFileUrl=function(e){e=ss.replaceAllString(ss.coalesce(e,""),"\\","/");return Q.resolveUrl("~/upload/")+e};global.Serenity.FileDownloadFormatter=H;var j=function(){j.$ctor1.call(this,true)};j.__typeName="Serenity.FilterableAttribute";j.$ctor1=function(e){this.value=false;this.value=e};global.Serenity.FilterableAttribute=j;var K=function(){this.$filterPanel=null;Serenity.TemplatedDialog.call(this);this.$filterPanel=new Z(this.byId("FilterPanel"));this.$filterPanel.set_showInitialLine(true);this.$filterPanel.set_showSearchButton(false);this.$filterPanel.set_updateStoreOnReset(false)};K.__typeName="Serenity.FilterDialog";global.Serenity.FilterDialog=K;var Y=function(e){ss.makeGenericType(tt,[Object]).call(this,e,null);this.element.find(".cap").text(Q.text("Controls.FilterPanel.EffectiveFilter"));this.element.find(".edit").text(Q.text("Controls.FilterPanel.EditFilter"));this.element.find(".reset").attr("title",Q.text("Controls.FilterPanel.ResetFilterHint"));var t=ss.mkdel(this,function(e){e.preventDefault();var t=new K;t.get_filterPanel().set_store(this.get_store());t.dialogOpen(null)});this.element.find(".edit").click(t);this.element.find(".txt").click(t);this.element.find(".reset").click(ss.mkdel(this,function(e){e.preventDefault();ss.clear(this.get_store().get_items());this.get_store().raiseChanged()}))};Y.__typeName="Serenity.FilterDisplayBar";global.Serenity.FilterDisplayBar=Y;var J=function(){};J.__typeName="Serenity.FilteringTypeRegistry";J.get=function(e){if(Q.isEmptyOrNull(e)){throw new ss.ArgumentNullException("key")}J.$initialize();var t=J.$knownTypes[e.toLowerCase()];if(ss.isNullOrUndefined(t)){throw new ss.Exception(ss.formatString("Can't find {0} filter handler type!",e))}return t};J.$initialize=function(){if(ss.isValue(J.$knownTypes)){return}J.$knownTypes={};var e=ss.getAssemblies();for(var t=0;t<e.length;t++){var i=e[t];var s=ss.getAssemblyTypes(i);for(var n=0;n<s.length;n++){var r=s[n];if(!ss.isAssignableFrom(St,r)){continue}if(ss.isGenericTypeDefinition(r)){continue}var a=ss.getTypeFullName(r).toLowerCase();J.$knownTypes[a]=r;for(var l=0;l<Q.Config.rootNamespaces.length;l++){var o=Q.Config.rootNamespaces[l];if(ss.startsWithString(a,o.toLowerCase()+".")){var u=a.substr(o.length+1).toLowerCase();if(ss.isNullOrUndefined(J.$knownTypes[u])){J.$knownTypes[u]=r}}}}}J.$setTypeKeysWithoutFilterHandlerSuffix()};J.reset=function(){J.$knownTypes=null};J.$setTypeKeysWithoutFilterHandlerSuffix=function(){var e="filtering";var t=Object.keys(J.$knownTypes);for(var i=0;i<t.length;i++){var s=t[i];if(!ss.endsWithString(s,e)){continue}var n=s.substr(0,s.length-e.length);if(Q.isEmptyOrNull(n)){continue}if(ss.isValue(J.$knownTypes[n])){continue}J.$knownTypes[n]=J.$knownTypes[s]}};global.Serenity.FilteringTypeRegistry=J;var X=function(){};X.__typeName="Serenity.FilterOperators";global.Serenity.FilterOperators=X;var Z=function(e){this.$rowsDiv=null;this.$showInitialLine=false;this.$showSearchButton=true;this.$updateStoreOnReset=false;ss.makeGenericType(tt,[Object]).call(this,e,null);this.element.addClass("s-FilterPanel");this.$rowsDiv=this.byId("Rows");this.$initButtons();this.$updateButtons()};Z.__typeName="Serenity.FilterPanel";global.Serenity.FilterPanel=Z;var et=function(e){this.$changed=null;this.$displayText=null;this.$1$FieldsField=null;this.$1$FieldByNameField=null;this.$1$ItemsField=null;this.set_items([]);if(ss.isNullOrUndefined(e)){throw new ss.ArgumentNullException("source")}this.set_fields(ss.arrayClone(e));this.get_fields().sort(function(e,t){var i=Q.tryGetText(e.title);if(ss.isNullOrUndefined(i)){var s=e.title;if(ss.isNullOrUndefined(s)){s=e.name}i=s}var n=Q.tryGetText(t.title);if(ss.isNullOrUndefined(n)){var r=t.title;if(ss.isNullOrUndefined(r)){r=t.name}n=r}return Q.turkishLocaleCompare(i,n)});this.set_fieldByName({});for(var t=0;t<e.length;t++){var i=e[t];this.get_fieldByName()[i.name]=i}};et.__typeName="Serenity.FilterStore";et.getCriteriaFor=function(e){if(ss.isNullOrUndefined(e)){return[""]}var t=false;var i=[""];var s=false;var n=[""];for(var r=0;r<e.length;r++){var a=e[r];if(a.leftParen||t&&a.rightParen){if(!Serenity.Criteria.isEmpty(i)){if(t){i=Serenity.Criteria.paren(i)}if(s){n=Serenity.Criteria.join(n,"or",i)}else{n=Serenity.Criteria.join(n,"and",i)}i=[""]}t=false}if(a.leftParen){s=a.isOr;t=true}if(a.isOr){i=Serenity.Criteria.join(i,"or",a.criteria)}else{i=Serenity.Criteria.join(i,"and",a.criteria)}}if(!Serenity.Criteria.isEmpty(i)){if(s){n=Serenity.Criteria.join(n,"or",Serenity.Criteria.paren(i))}else{n=Serenity.Criteria.join(n,"and",Serenity.Criteria.paren(i))}}return n};et.getDisplayTextFor=function(e){var t=false;var i="";if(ss.isNullOrUndefined(e)){return i}for(var s=0;s<e.length;s++){var n=e[s];if(t&&(n.rightParen||n.leftParen)){i+=")";t=false}if(i.length>0){i+=" "+Q.text("Controls.FilterPanel."+(n.isOr?"Or":"And"))+" "}if(n.leftParen){i+="(";t=true}i+=n.displayText}if(t){i+=")"}return i};global.Serenity.FilterStore=et;var tt=function(e){var t=function(e,t){this.$store=null;Serenity.TemplatedWidget.call(this,e,t);this.$store=new et([]);this.$store.add_changed(ss.mkdel(this,this.$onFilterStoreChanged))};ss.registerGenericClassInstance(t,tt,[e],{destroy:function(){if(ss.isValue(this.$store)){this.$store.remove_changed(ss.mkdel(this,this.$onFilterStoreChanged));this.$store=null}Serenity.Widget.prototype.destroy.call(this)},$onFilterStoreChanged:function(e,t){this.filterStoreChanged()},filterStoreChanged:function(){},get_store:function(){return this.$store},set_store:function(e){if(!ss.referenceEquals(this.$store,e)){if(ss.isValue(this.$store)){this.$store.remove_changed(ss.mkdel(this,this.$onFilterStoreChanged))}this.$store=e||new et([]);this.$store.add_changed(ss.mkdel(this,this.$onFilterStoreChanged));this.filterStoreChanged()}}},function(){return Serenity.TemplatedWidget},function(){return[]});return t};tt.__typeName="Serenity.FilterWidgetBase$1";ss.initGenericClass(tt,e,1);global.Serenity.FilterWidgetBase$1=tt;var it=function(e,t){this.$xDifference=0;this.$yDifference=0;Serenity.Widget.call(this,e,t);var i=this;Serenity.LazyLoadHelper.executeOnceWhenShown(e,function(){i.$storeInitialSize()})};it.__typeName="Serenity.Flexify";global.Serenity.Flexify=it;var st=function(){};st.__typeName="Serenity.FormatterTypeRegistry";st.get=function(e){if(Q.isEmptyOrNull(e)){throw new ss.ArgumentNullException("key")}st.$initialize();var t=st.$knownTypes[e.toLowerCase()];if(ss.isNullOrUndefined(t)){throw new ss.Exception(ss.formatString("Can't find {0} formatter type!",e))}return t};st.$initialize=function(){if(ss.isValue(st.$knownTypes)){return}st.$knownTypes={};var e=ss.getAssemblies();for(var t=0;t<e.length;t++){var i=e[t];var s=ss.getAssemblyTypes(i);for(var n=0;n<s.length;n++){var r=s[n];if(!ss.isAssignableFrom(It,r)){continue}if(ss.isGenericTypeDefinition(r)){continue}var a=ss.getTypeFullName(r).toLowerCase();st.$knownTypes[a]=r;for(var l=0;l<Q.Config.rootNamespaces.length;l++){var o=Q.Config.rootNamespaces[l];if(ss.startsWithString(a,o.toLowerCase()+".")){var u=a.substr(o.length+1).toLowerCase();if(ss.isNullOrUndefined(st.$knownTypes[u])){st.$knownTypes[u]=r}}}}}st.$setTypeKeysWithoutFormatterSuffix()};st.reset=function(){st.$knownTypes=null};st.$setTypeKeysWithoutFormatterSuffix=function(){var e="formatter";var t=Object.keys(st.$knownTypes);for(var i=0;i<t.length;i++){var s=t[i];if(!ss.endsWithString(s,e)){continue}var n=s.substr(0,s.length-e.length);if(Q.isEmptyOrNull(n)){continue}if(ss.isValue(st.$knownTypes[n])){continue}st.$knownTypes[n]=st.$knownTypes[s]}};global.Serenity.FormatterTypeRegistry=st;var nt=function(e,t){this.$map=null;Serenity.Widget.call(this,e,t);var i=new google.maps.LatLng(ss.coalesce(this.options.latitude,0),ss.coalesce(this.options.longitude,0));var s=new Object;s.center=i;s.mapTypeId=ss.coalesce(this.options.mapTypeId,"roadmap");s.zoom=ss.coalesce(this.options.zoom,15);s.zoomControl=true;this.$map=new google.maps.Map(e[0],s);if(ss.isValue(this.options.markerTitle)){var n=new Object;var r=this.options.markerLatitude;if(ss.isNullOrUndefined(r)){r=ss.coalesce(this.options.latitude,0)}var a=this.options.markerLongitude;if(ss.isNullOrUndefined(a)){a=ss.coalesce(this.options.longitude,0)}n.position=new google.maps.LatLng(r,a);n.map=this.$map;n.title=this.options.markerTitle;n.animation=2;new google.maps.Marker(n)}Serenity.LazyLoadHelper.executeOnceWhenShown(e,ss.mkdel(this,function(){google.maps.event.trigger(this.$map,"resize",[]);this.$map.setCenter(i)}))};nt.__typeName="Serenity.GoogleMap";global.Serenity.GoogleMap=nt;var rt=function(){};rt.__typeName="Serenity.GridRows";global.Serenity.GridRows=rt;var at=function(e){this.$idField=null;this.$grid=null;this.$include={};this.$grid=e;this.$idField=e.getView().idField;e.getGrid().onClick.subscribe(ss.mkdel(this,function(t,i){if($(t.target).hasClass("select-item")){t.preventDefault();var s=e.getView().getItem(ss.unbox(ss.cast(i.row,ss.Int32)));var n=s[this.$idField].toString();if(!!ss.keyExists(this.$include,ss.cast(n,String))){delete this.$include[ss.cast(n,String)]}else{this.$include[ss.cast(n,String)]=true}for(var r=0;r<e.getView().getLength();r++){e.getGrid().updateRow(r)}this.$updateSelectAll()}}));e.getGrid().onHeaderClick.subscribe(ss.mkdel(this,function(t,i){if(t.isDefaultPrevented()){return}if($(t.target).hasClass("select-all-items")){t.preventDefault();var s=e.getView();if(ss.getKeyCount(this.$include)>0){ss.clearKeys(this.$include)}else{var n=e.getView().getItems();for(var r=0;r<n.length;r++){var a=n[r];var l=a[this.$idField];this.$include[ss.cast(l.toString(),String)]=true}}this.$updateSelectAll();e.getView().setItems(e.getView().getItems(),true)}}));e.getView().onRowsChanged.subscribe(ss.mkdel(this,function(e,t){return this.$updateSelectAll()}))};at.__typeName="Serenity.GridRowSelectionMixin";at.createSelectColumn=function(e){return{name:'<span class="select-all-items check-box no-float "></span>',toolTip:" ",field:"__select__",width:26,minWidth:26,headerCssClass:"select-all-header",sortable:false,format:function(t){var i=t.item;var s=e();if(ss.isNullOrUndefined(s)){return""}var n=!!ss.keyExists(s.$include,ss.cast(t.item[s.$idField].toString(),String));return'<span class="select-item check-box no-float '+(n?" checked":"")+'"></span>'}}};global.Serenity.GridRowSelectionMixin=at;var lt=function(){};lt.__typeName="Serenity.GridSelectAllButtonHelper";lt.update=function(e,t){var i=e;var s=i.element.children(".s-Toolbar");if(s.length===0){return}var n=Ei.getWidget(bi).call(null,s).findButton("select-all-button");var r=i.view.getItems();n.toggleClass("checked",r.length>0&&!r.some(function(e){return!t(e)}))};lt.define=function(e,t,i,s,n,r){var a=n;if(ss.isNullOrUndefined(a)){a=ss.coalesce(Q.tryGetText("Controls.CheckTreeEditor.SelectAll"),"Select All")}return{title:a,cssClass:"select-all-button",onClick:function(){var i=e();var n=i.view;var a=Ei.getWidget(bi).call(null,i.element.children(".s-Toolbar")).findButton("select-all-button");var l=!a.hasClass("checked");n.beginUpdate();try{var o=n.getItems();for(var u=0;u<o.length;u++){var d=o[u];s(d,l);n.updateItem(t(d),d)}if(!ss.staticEquals(r,null)){r()}}finally{n.endUpdate()}a.toggleClass("checked",l)}}};global.Serenity.GridSelectAllButtonHelper=lt;var ot=function(){};ot.__typeName="Serenity.GridUtils";ot.addToggleButton=function(e,t,i,s,n){var r=$('<div><a href="#"></a></div>').addClass("s-ToggleButton").addClass(t).prependTo(e);r.children("a").click(function(e){e.preventDefault();r.toggleClass("pressed");var t=r.hasClass("pressed");if(!ss.staticEquals(i,null)){i(t)}}).attr("title",ss.coalesce(s,""));if(n){r.addClass("pressed")}};ot.addIncludeDeletedToggle=function(e,t,i,s){var n=false;var r=t.onSubmit;t.onSubmit=function(e){e.params.IncludeDeleted=n;if(!ss.staticEquals(r,null)){return r(e)}return true};var a=i;if(ss.isNullOrUndefined(a)){a=Q.text("Controls.EntityGrid.IncludeDeletedToggle")}ot.addToggleButton(e,"s-IncludeDeletedToggle",function(e){n=e;t.seekToPage=1;t.populate()},a,s);e.bind("remove",function(){t.onSubmit=null;r=null})};ot.addQuickSearchInput=function(e,t,i){var s=t.onSubmit;var n="";var r="";t.onSubmit=function(e){if(ss.isValue(n)&&n.length>0){e.params.ContainsText=n}else{delete e.params["ContainsText"]}if(ss.isValue(r)&&r.length>0){e.params.ContainsField=r}else{delete e.params["ContainsField"]}if(!ss.staticEquals(s,null)){return s(e)}return true};var a=null;ot.addQuickSearchInputCustom$1(e,function(e,i,s){n=i;r=e;t.seekToPage=1;a=s;t.populate()},i);t.onDataLoaded.subscribe(function(e,i){if(!ss.staticEquals(a,null)){a(t.getLength()>0);a=null}})};ot.addQuickSearchInputCustom=function(e,t,i){ot.addQuickSearchInputCustom$1(e,function(e,i,s){t(e,i);s(true)},null)};ot.addQuickSearchInputCustom$1=function(e,t,i){var s=$('<div><input type="text"/></div>').addClass("s-QuickSearchBar").prependTo(e);if(ss.isValue(i)&&i.length>0){s.addClass("has-quick-search-fields")}s=s.children();var n=si.$ctor();n.fields=i;n.onSearch=t;new ii(s,n)};ot.makeOrderable=function(e,t){var i=new Slick.RowMoveManager({cancelEditOnDrag:true});i.onBeforeMoveRows.subscribe(function(e,t){for(var i=0;!!(i<t.rows.length);i++){if(!!(ss.referenceEquals(t.rows[i],t.insertBefore)||ss.referenceEquals(t.rows[i],t.insertBefore-1))){e.stopPropagation();return false}}return true});i.onMoveRows.subscribe(function(i,s){var n=ss.cast(s.rows,Array);var r=ss.unbox(ss.cast(s.insertBefore,ss.Int32));t(n,r);try{e.setSelectedRows([])}catch(a){}});e.registerPlugin(i)};ot.makeOrderableWithUpdateRequest=function(e,t){return function(e,t,i,s,n){ot.makeOrderable(e.slickGrid,function(r,a){if(r.length===0){return}var l;var o=a;if(o<0){l=1}else if(a>=e.rows.getDataLength()){l=ss.coalesce(i(e.rows.getDataItem(e.rows.getDataLength()-1)),0);if(l===0){l=a+1}else{l=l+1}}else{l=ss.coalesce(i(e.rows.getDataItem(a)),0);if(l===0){l=a+1}}var u=0;var d=null;d=function(){Q.serviceCall({service:s,request:n(t(e.rows.getDataItem(r[u])),l++),onSuccess:function(t){u++;if(u<r.length){d()}else{e.view.populate()}}})};d()})}};global.Serenity.GridUtils=ot;var ut=function(){};ut.__typeName="Serenity.HiddenAttribute";global.Serenity.HiddenAttribute=ut;var dt=function(e){this.hint=null;this.hint=e};dt.__typeName="Serenity.HintAttribute";global.Serenity.HintAttribute=dt;var ct=function(e,t){this.$instanceReady=false;Serenity.Widget.call(this,e,t);ct.$includeCKEditor();var i=e.attr("id");if(Q.isTrimmedEmpty(i)){e.attr("id",this.uniqueName);i=this.uniqueName}if(ss.isValue(this.options.cols)){e.attr("cols",ss.unbox(this.options.cols).toString())}if(ss.isValue(this.options.rows)){e.attr("rows",ss.unbox(this.options.rows).toString())}var s=this;this.addValidationRule(this.uniqueName,function(e){if(e.hasClass("required")){var t=Q.trimToNull(s.get_value());if(ss.isNullOrUndefined(t)){return Q.text("Validation.Required")}}return null});Serenity.LazyLoadHelper.executeOnceWhenShown(this.element,ss.mkdel(this,function(){var e=this.getConfig();CKEDITOR.replace(i,e)}))};ct.__typeName="Serenity.HtmlContentEditor";ct.$includeCKEditor=function(){var e=window.window;if(!!ss.isValue(e.CKEDITOR)){return}var t=$("#CKEditorScript");if(t.length>0){return}$("<script/>").attr("type","text/javascript").attr("id","CKEditorScript").attr("src",Q.resolveUrl("~/Scripts/CKEditor/ckeditor.js")).appendTo(window.document.head)};global.Serenity.HtmlContentEditor=ct;var ft=function(){};ft.__typeName="Serenity.HtmlContentEditorOptions";ft.createInstance=function(){return ft.$ctor()};ft.$ctor=function(){var e={};e.cols=null;e.rows=null;e.cols=80;e.rows=6;return e};ft.isInstanceOfType=function(){return true};global.Serenity.HtmlContentEditorOptions=ft;var ht=function(e,t){ct.call(this,e,t)};ht.__typeName="Serenity.HtmlNoteContentEditor";global.Serenity.HtmlNoteContentEditor=ht;var pt=function(e,t){ct.call(this,e,t)};pt.__typeName="Serenity.HtmlReportContentEditor";global.Serenity.HtmlReportContentEditor=pt;var mt=function(){};mt.__typeName="Serenity.IAsyncInit";global.Serenity.IAsyncInit=mt;var gt=function(){};gt.__typeName="Serenity.IDataGrid";global.Serenity.IDataGrid=gt;var yt=function(){};yt.__typeName="Serenity.IDialog";global.Serenity.IDialog=yt;var vt=function(){};vt.__typeName="Serenity.IEditDialog";global.Serenity.IEditDialog=vt;var St=function(){};St.__typeName="Serenity.IFiltering";global.Serenity.IFiltering=St;var Ct=function(){};Ct.__typeName="Serenity.IInitializeColumn";global.Serenity.IInitializeColumn=Ct;var bt=function(e,t){this.entity=null;this.toolbar=null;this.fileSymbols=null;this.uploadInput=null;Serenity.Widget.call(this,e,t);e.addClass("s-ImageUploadEditor");if(Q.isEmptyOrNull(this.options.originalNameProperty)){e.addClass("hide-original-name")}var i=this;this.toolbar=new bi($("<div/>").appendTo(this.element),{buttons:this.getToolButtons()});var s=$("<div><div></div></div>").addClass("upload-progress").prependTo(this.toolbar.element);var n=this.toolbar.findButton("add-file-button");this.uploadInput=Ti.addUploadInput({container:n,inputName:this.uniqueName,progress:s,fileDone:ss.mkdel(this,function(e,t,s){if(!Ti.checkImageConstraints(e,this.options)){return}var n={OriginalName:t,Filename:e.TemporaryFile};i.entity=n;i.populate();i.updateInterface()})});this.fileSymbols=$("<ul/>").appendTo(this.element);this.updateInterface()};bt.__typeName="Serenity.ImageUploadEditor";global.Serenity.ImageUploadEditor=bt;var $t=function(){};$t.__typeName="Serenity.ImageUploadEditorOptions";$t.createInstance=function(){return $t.$ctor()};$t.$ctor=function(){var e={};e.minWidth=0;e.maxWidth=0;e.minHeight=0;e.maxHeight=0;e.minSize=0;e.maxSize=0;e.originalNameProperty=null;e.displayFileName=false;e.urlPrefix=null;e.allowNonImage=false;return e};$t.isInstanceOfType=function(){return true};global.Serenity.ImageUploadEditorOptions=$t;var Tt=function(e){this.value=false;this.value=e};Tt.__typeName="Serenity.InsertableAttribute";global.Serenity.InsertableAttribute=Tt;var _t=function(e,t){Serenity.Widget.call(this,e,t);e.addClass("integerQ");var i=$.extend(_.defaultAutoNumericOptions(),{vMin:ss.coalesce(this.options.minValue,0),vMax:ss.coalesce(this.options.maxValue,2147483647),aSep:null});e.autoNumeric(i)};_t.__typeName="Serenity.IntegerEditor";global.Serenity.IntegerEditor=_t;var Ot=function(){};Ot.__typeName="Serenity.IntegerEditorOptions";Ot.createInstance=function(){return Ot.$ctor()};Ot.$ctor=function(){var e={};e.minValue=null;e.maxValue=null;e.minValue=0;e.maxValue=2147483647;return e};Ot.isInstanceOfType=function(){return true};global.Serenity.IntegerEditorOptions=Ot;var xt=function(){ss.makeGenericType(n,[_t]).call(this)};xt.__typeName="Serenity.IntegerFiltering";global.Serenity.IntegerFiltering=xt;var kt=function(){};kt.__typeName="Serenity.IQuickFiltering";global.Serenity.IQuickFiltering=kt;var Et=function(){};Et.__typeName="Serenity.IReadOnly";global.Serenity.IReadOnly=Et;var It=function(){};It.__typeName="Serenity.ISlickFormatter";global.Serenity.ISlickFormatter=It;var Ft=function(){};Ft.__typeName="Serenity.IValidateRequired";global.Serenity.IValidateRequired=Ft;var Nt=function(e,t){wt.call(this,e,t)};Nt.__typeName="Serenity.LookupEditor";global.Serenity.LookupEditor=Nt;var wt=function(e,t){this.$cascadeLink=null;this.onInitNewEntity=null;this.$5$OpenDialogAsPanelField=null;fi.call(this,e,t);this.$setCascadeFrom(this.options.cascadeFrom);var i=this;if(!this.isAsyncWidget()){this.updateItems();Q.ScriptData.bindToChange("Lookup."+this.getLookupKey(),this.uniqueName,function(){i.updateItems()})}if(!this.options.autoComplete&&this.options.inplaceAdd&&(ss.isNullOrUndefined(this.options.inplaceAddPermission)||Q.Authorization.hasPermission(this.options.inplaceAddPermission))){this.addInplaceCreate(Q.text("Controls.SelectEditor.InplaceAdd"),null)}};wt.__typeName="Serenity.LookupEditorBase";global.Serenity.LookupEditorBase=wt;var Vt=function(){ss.makeGenericType(n,[Nt]).call(this)};Vt.__typeName="Serenity.LookupFiltering";global.Serenity.LookupFiltering=Vt;var Dt=function(e){this.maxLength=0;this.maxLength=e};Dt.__typeName="Serenity.MaxLengthAttribute";global.Serenity.MaxLengthAttribute=Dt;var At=function(){};At.__typeName="Serenity.MinuteFormatter";At.format=function(e){var t=ss.Int32.trunc(Math.floor(e/60));var i=e-t*60;var s,n;if(!ss.isValue(e)||isNaN(e)){return""}if(t<10){s="0"+t}else{s=t.toString()}if(i<10){n="0"+i}else{n=i.toString()}return ss.formatString("{0}:{1}",s,n)};global.Serenity.MinuteFormatter=At;var Pt=function(e,t){this.entities=null;this.toolbar=null;this.fileSymbols=null;this.uploadInput=null;this.$4$JsonEncodeValueField=false;Serenity.Widget.call(this,e,t);this.entities=[];e.addClass("s-MultipleImageUploadEditor");var i=this;this.toolbar=new bi($("<div/>").appendTo(this.element),{buttons:this.getToolButtons()});var s=$("<div><div></div></div>").addClass("upload-progress").prependTo(this.toolbar.element);var n=this.toolbar.findButton("add-file-button");this.uploadInput=Ti.addUploadInput({container:n,inputName:this.uniqueName,progress:s,fileDone:ss.mkdel(this,function(e,t,s){if(!Ti.checkImageConstraints(e,this.options)){return}var n={OriginalName:t,Filename:e.TemporaryFile};i.entities.push(n);i.populate();i.updateInterface()})});this.fileSymbols=$("<ul/>").appendTo(this.element);this.updateInterface()};Pt.__typeName="Serenity.MultipleImageUploadEditor";global.Serenity.MultipleImageUploadEditor=Pt;var Qt=function(){this.$1$DisplayFormatField=null};Qt.__typeName="Serenity.NumberFormatter";Qt.format=function(e,t){t=ss.coalesce(t,"0.##");if(!ss.isValue(e)){return""}if(typeof e==="number"){if(isNaN(e)){return""}return Q.htmlEncode(Q.formatNumber(e,t))}var i=Q.parseDecimal(e.toString());if(ss.isNullOrUndefined(i)){return""}return Q.htmlEncode(e.toString())};global.Serenity.NumberFormatter=Qt;var Ut=function(){};Ut.__typeName="Serenity.OneWayAttribute";global.Serenity.OneWayAttribute=Ut;var Bt=function(e){Serenity.StringEditor.call(this,e);e.attr("type","password")};Bt.__typeName="Serenity.PasswordEditor";global.Serenity.PasswordEditor=Bt;var Gt=function(e){Serenity.Widget.call(this,e,new Object);this.addValidationRule(this.uniqueName,ss.mkdel(this,function(){if(!new RegExp("^[ A-Za-zıİğĞöÖüÜşŞÇç]+$").test(Q.trimToEmpty(this.get_value()))){return"Lütfen sadece harflerden oluşan bir metin giriniz!"}return null}))};Gt.__typeName="Serenity.PersonNameEditor";global.Serenity.PersonNameEditor=Gt;var qt=function(e,t){Serenity.Widget.call(this,e,t);var i=this;this.addValidationRule(this.uniqueName,ss.mkdel(this,function(e){var t=Q.trimToNull(this.get_value());if(ss.isNullOrUndefined(t)){return null}return this.validate(t)}));var s=this.options.internal?"Dahili telefon numarası '456, 8930, 12345' formatlarında":this.options.mobile?"Cep telefonu numarası '(533) 342 01 89' formatında":"Telefon numarası '(216) 432 10 98' formatında";if(this.options.multiple){s=ss.replaceAllString(s,"numarası","numaraları")+" ve birden fazlaysa virgülle ayrılarak "}s+=" girilmelidir.";e.attr("title",s);e.bind("change",ss.mkdel(this,function(e){if(!Ei.hasOriginalEvent(e)){return}this.formatValue()}));e.bind("blur",ss.mkdel(this,function(e){if(this.element.hasClass("valid")){this.formatValue()}}));e.bind("keyup",ss.mkdel(this,function(t){if(this.options.internal){return}var i=ss.coalesce(e.val(),"");if(!!(i.length>0&&ss.referenceEquals(e[0].selectionEnd,i.length)&&(t.which>=48&&t.which<=57||t.which>=96&&t.which<=105)&&i.charCodeAt(i.length-1)>=48&&i.charCodeAt(i.length-1)<=57&&!ss.startsWithString(i,"+")&&i.indexOf(String.fromCharCode(47))<0)){if(ss.isNullOrUndefined(this.validate(i))){this.formatValue()}else{for(var s=1;s<=7;s++){i+="9";if(ss.isNullOrUndefined(this.validate(i))){this.set_value(i);this.formatValue();i=this.get_value();for(var n=1;n<=s;n++){i=i.trim();i=i.substr(0,i.length-1)}this.set_value(i);break}}}}}))};qt.__typeName="Serenity.PhoneEditor";qt.$formatMulti=function(e,t){var i=ss.replaceAllString(e,String.fromCharCode(59),String.fromCharCode(44)).split(String.fromCharCode(44));var s="";for(var n=0;n<i.length;n++){var r=i[n];var a=Q.trimToNull(r);if(ss.isNullOrUndefined(a)){continue}if(s.length>0){s+=", "}s+=t(a)}return s};qt.$formatPhoneTurkey=function(e){if(!qt.$isValidPhoneTurkey(e)){return e}e=ss.replaceAllString(ss.replaceAllString(ss.replaceAllString(e," ",""),"(",""),")","");if(ss.startsWithString(e,"0")){e=e.substring(1)}e="("+e.substr(0,3)+") "+e.substr(3,3)+" "+e.substr(6,2)+" "+e.substr(8,2);return e};qt.$formatPhoneTurkeyMulti=function(e){if(!qt.$isValidPhoneTurkeyMulti(e)){return e}return qt.$formatMulti(e,qt.$formatPhoneTurkey)};qt.$formatMobileTurkey=function(e){if(!qt.$isValidMobileTurkey(e)){return e}return qt.$formatPhoneTurkey(e)};qt.$formatMobileTurkeyMulti=function(e){if(!qt.$isValidMobileTurkeyMulti(e)){return e}return qt.$formatPhoneTurkeyMulti(e)};qt.$formatPhoneInternal=function(e){if(!qt.$isValidPhoneInternal(e)){return e}return e.trim()};qt.$formatPhoneInternalMulti=function(e){if(!qt.$isValidPhoneInternalMulti(e)){return e}return qt.$formatMulti(e,qt.$formatPhoneInternal)};qt.$isValidPhoneTurkeyMulti=function(e){return qt.$isValidMulti(e,qt.$isValidPhoneTurkey)};qt.$isValidMobileTurkeyMulti=function(e){return qt.$isValidMulti(e,qt.$isValidMobileTurkey)};qt.$isValidPhoneInternalMulti=function(e){return qt.$isValidMulti(e,qt.$isValidPhoneInternal)};qt.$validate=function(e,t,i,s,n,r){var a;if(i){a=qt.$isValidPhoneInternal}else if(s){a=qt.$isValidMobileTurkey}else{a=qt.$isValidPhoneTurkey}var l=function(e){if(!a(e)){if(i){return false}e=ss.coalesce(e,"").trim();if(ss.startsWithString(e,"+")){if(n&&e.length>7){return true}return false}if(r&&e.indexOf(String.fromCharCode(47))>0){var t=ss.netSplit(e,[47].map(function(e){return String.fromCharCode(e)}));if(t.length!==2){return false}if(t[0].length<5||!a(t[0])){return false}var s={};if(!ss.Int32.tryParse(t[1].trim(),s)){return false}return true}return false}return true};var o=t?qt.$isValidMulti(e,l):l(e);if(o){return null}if(t){if(i){return"Dahili telefon numaraları '4567' formatında ve birden fazlaysa virgülle ayrılarak girilmelidir!"}if(s){return"Telefon numaraları '(533) 342 01 89' formatında ve birden fazlaysa virgülle ayrılarak girilmelidir!"}return"Telefon numaları '(216) 432 10 98' formatında ve birden fazlaysa virgülle ayrılarak girilmelidir!"}else{if(i){return"Dahili telefon numarası '4567' formatında girilmelidir!"}if(s){return"Telefon numarası '(533) 342 01 89' formatında girilmelidir!"}return"Telefon numarası '(216) 432 10 98' formatında girilmelidir!"}};qt.$isValidPhoneTurkey=function(e){if(Q.isEmptyOrNull(e)){return false}e=ss.replaceAllString(e," ","");if(e.length<10){return false}if(ss.startsWithString(e,"0")){e=e.substring(1)}if(ss.startsWithString(e,"(")&&e.charCodeAt(4)===41){e=e.substr(1,3)+e.substring(5)}if(e.length!==10){return false}if(ss.startsWithString(e,"0")){return false}for(var t=0;t<e.length;t++){var i=e.charCodeAt(t);if(i<48||i>57){return false}}return true};qt.$isValidMobileTurkey=function(e){if(!qt.$isValidPhoneTurkey(e)){return false}e=ss.trimStartString(e);e=ss.replaceAllString(e," ","");var t=0;if(ss.startsWithString(e,"0")){t++}if(e.charCodeAt(t)===53||e.charCodeAt(t)===40&&e.charCodeAt(t+1)===53){return true}return false};qt.$isValidPhoneInternal=function(e){if(Q.isEmptyOrNull(e)){return false}e=e.trim();if(e.length<2||e.length>5){return false}for(var t=0;t<e.length;t++){var i=e.charCodeAt(t);if(i<48||i>57){return false}}return true};qt.$isValidMulti=function(e,t){if(Q.isEmptyOrNull(e)){return false}var i=ss.replaceAllString(e,String.fromCharCode(59),String.fromCharCode(44)).split(String.fromCharCode(44));var s=false;for(var n=0;n<i.length;n++){var r=i[n];var a=Q.trimToNull(r);if(ss.isNullOrUndefined(a)){continue}if(!t(a)){return false}s=true}if(!s){return false}return true};global.Serenity.PhoneEditor=qt;var Mt=function(){};Mt.__typeName="Serenity.PhoneEditorOptions";Mt.createInstance=function(){return Mt.$ctor()};Mt.$ctor=function(){var e={};e.multiple=false;e.internal=false;e.mobile=false;e.allowExtension=false;e.allowInternational=false;return e};Mt.isInstanceOfType=function(){return true};global.Serenity.PhoneEditorOptions=Mt;var Lt=function(e){this.value=null;this.value=e};Lt.__typeName="Serenity.PlaceholderAttribute";global.Serenity.PlaceholderAttribute=Lt;var Rt=function(e,t){Serenity.Widget.call(this,e,t);var i=this;e.addClass("s-PopupMenuButton");e.click(ss.mkdel(this,function(e){e.preventDefault();e.stopPropagation();if(!ss.staticEquals(this.options.onPopup,null)){this.options.onPopup()}var t=i.options.menu;t.show().position({my:ss.coalesce(this.options.positionMy,"left top"),at:ss.coalesce(this.options.positionAt,"left bottom"),of:i.element});var s=i.uniqueName;$(document).one("click."+s,function(e){t.hide()})}));i.options.menu.hide().appendTo(document.body).addClass("s-PopupMenu").menu()};Rt.__typeName="Serenity.PopupMenuButton";global.Serenity.PopupMenuButton=Rt;var Wt=function(e,t){Rt.call(this,e,t);e.addClass("s-PopupToolButton");$("<b/>").appendTo(e.children(".button-outer").children("span"))};Wt.__typeName="Serenity.PopupToolButton";global.Serenity.PopupToolButton=Wt;var zt=function(e){this.idPrefix=null;this.idPrefix=e};zt.__typeName="Serenity.PrefixedContext";global.Serenity.PrefixedContext=zt;var Ht=function(e){this.$entity=null;this.$entityId=null;this.propertyGrid=null;Serenity.TemplatedDialog.call(this,e);if(!this.isAsyncWidget()){this.$initPropertyGrid();this.loadInitialEntity()}};Ht.__typeName="Serenity.PropertyDialog";global.Serenity.PropertyDialog=Ht;var jt=function(){Xt.call(this)};jt.__typeName="Serenity.PropertyEditorHelper";global.Serenity.PropertyEditorHelper=jt;var Kt=function(e,t){this.$editors=null;this.$items=null;Serenity.Widget.call(this,e,t);if(!ss.isValue(t.mode)){t.mode=1}e.addClass("s-PropertyGrid");this.$editors=[];this.$items=this.options.items||[];var i=Q.any(this.$items,function(e){return!ss.isNullOrEmptyString(e.tab)});if(i){var s=$("<ul class='nav nav-tabs property-tabs' role='tablist'></ul>").appendTo(this.element);var n=$("<div class='tab-content property-panes'></div>").appendTo(this.element);var r=0;var a=0;while(a<this.$items.length){var l={$:Q.trimToEmpty(this.$items[a].tab)};var o=[];var u=a;do{o.push(this.$items[u])}while(++u<this.$items.length&&ss.referenceEquals(Q.trimToEmpty(this.$items[u].tab),l.$));a=u;var d=$("<li><a data-toggle='tab' role='tab'></a></li>").appendTo(s);if(r===0){d.addClass("active")}var c=this.uniqueName+"_Tab"+r;d.children("a").attr("href","#"+c).text(this.$determineText(l.$,ss.mkdel({tab:l},function(e){return e+"Tabs."+this.tab.$})));var f=$("<div class='tab-pane fade' role='tabpanel'>").appendTo(n);if(r===0){f.addClass("in active")}f.attr("id",c);this.$createItems(f,o);r++}}else{this.$createItems(this.element,this.$items)}this.$updateInterface()};Kt.__typeName="Serenity.PropertyGrid";Kt.$categoryLinkClick=function(e){e.preventDefault();var t=$("a[name="+e.target.getAttribute("href").toString().substr(1)+"]");if(t.closest(".category").hasClass("collapsed")){t.closest(".category").children(".category-title").click()}var i=function(){t.fadeTo(100,.5,function(){t.fadeTo(100,1,function(){})})};var s=t.closest(".category");if(s.closest(":scrollable(both)").length===0){i()}else{s.scrollintoview({duration:"fast",direction:"y",complete:i})}};Kt.loadEditorValue=function(e,t,i){};Kt.saveEditorValue=function(e,t,i){P.saveValue(e,t,i)};Kt.$setMaxLength=function(e,t){if(e.element.is(":input")){if(t>0){e.element.attr("maxlength",t.toString())}else{e.element.removeAttr("maxlength")}}};Kt.setRequired=function(e,t){P.setRequired(e,t)};Kt.setReadOnly=function(e,t){P.setReadOnly(e,t)};Kt.setReadOnly$1=function(e,t){return P.setReadonly(e,t)};global.Serenity.PropertyGrid=Kt;var Yt=function(){};Yt.__typeName="Serenity.PropertyGridMode";global.Serenity.PropertyGridMode=Yt;var Jt=function(){};Jt.__typeName="Serenity.PropertyGridOptions";Jt.createInstance=function(){return Jt.$ctor()};Jt.$ctor=function(){var e={};e.idPrefix=null;e.items=null;e.useCategories=false;e.categoryOrder=null;e.defaultCategory=null;e.localTextPrefix=null;
e.mode=0;e.useCategories=true;e.defaultCategory=Q.text("Controls.PropertyGrid.DefaultCategory");return e};Jt.isInstanceOfType=function(){return true};global.Serenity.PropertyGridOptions=Jt;var Xt=function(){};Xt.__typeName="Serenity.PropertyItemHelper";Xt.getPropertyItemsFor=function(e){if(ss.isNullOrUndefined(e)){throw new ss.Exception("type")}var t=[];var i=ss.getMembers(e,31,20);for(var s=0;s<i.length;s++){var n=i[s];var r={};if(n.type!==16&&n.type!==4){continue}var a=(n.attr||[]).filter(function(e){return ss.isInstanceOfType(e,ut)});if(a.length>0){continue}var l=(n.attr||[]).filter(function(e){return ss.isInstanceOfType(e,Ni)});var o=(n.attr||[]).filter(function(e){return ss.isInstanceOfType(e,dt)});var d=(n.attr||[]).filter(function(e){return ss.isInstanceOfType(e,Lt)});var c=n.type===16?ss.cast(n,ss.isValue(n)&&n.type===16).returnType:ss.cast(n,ss.isValue(n)&&n.type===4).returnType;if(n.type===16){var p=ss.cast(n,ss.isValue(n)&&n.type===16);if(ss.isNullOrUndefined(p.fname)){continue}r.name=p.fname}else if(n.type===4){var m=ss.cast(n,ss.isValue(n)&&n.type===4);r.name=m.sname}else{continue}var g=(n.attr||[]).filter(function(e){return ss.isInstanceOfType(e,u)});if(g.length>0){r.category=ss.cast(g[0],u).category}else if(t.length>0){r.category=t[t.length-1].category}var y=(n.attr||[]).filter(function(e){return ss.isInstanceOfType(e,f)});if(y.length>0&&ss.cast(y[0],f).value){r.collapsible=true;r.collapsed=ss.cast(y[0],f).collapsed}var v=(n.attr||[]).filter(function(e){return ss.isInstanceOfType(e,h)});if(v.length>0){r.cssClass=ss.cast(v[0],h).cssClass}if((n.attr||[]).filter(function(e){return ss.isInstanceOfType(e,Ut)}).length>0){r.oneWay=true}if((n.attr||[]).filter(function(e){return ss.isInstanceOfType(e,ai)}).length>0){r.readOnly=true}if(l.length>0){r.title=ss.cast(l[0],Ni).displayName}if(o.length>0){r.hint=ss.cast(o[0],dt).hint}if(d.length>0){r.placeholder=ss.cast(d[0],Lt).value}if(ss.isNullOrUndefined(r.title)){r.title=r.name}var S=(n.attr||[]).filter(function(e){return ss.isInstanceOfType(e,k)});if(S.length===1){r.defaultValue=ss.cast(S[0],k).value}var C=(n.attr||[]).filter(function(e){return ss.isInstanceOfType(e,Tt)});if(C.length>0){r.insertable=C[0].value}else{r.insertable=true}var b=(n.attr||[]).filter(function(e){return ss.isInstanceOfType(e,$i)});if(b.length>0){r.updatable=b[0].value}else{r.updatable=true}var $=(n.attr||[]).filter(function(e){return ss.isInstanceOfType(e,w)});var T=c;var _=null;if(ss.isEnum(c)){_=c}else if(ss.isValue(T)&&ss.isEnum(T)){_=T}if($.length===0){if(ss.isValue(_)){r.editorType="Select"}else if(ss.referenceEquals(c,ss.JsDate)){r.editorType="Date"}else if(ss.referenceEquals(c,Boolean)){r.editorType="Boolean"}else if(ss.referenceEquals(c,Number)||ss.referenceEquals(c,Number)){r.editorType="Decimal"}else if(ss.referenceEquals(c,ss.Int32)){r.editorType="Integer"}else{r.editorType="String"}}else{var O=ss.cast($[0],w);r.editorType=O.editorType;O.setParams(r.editorParams)}var x=(n.attr||[]).filter(function(e){return ss.isInstanceOfType(e,di)});if(x.length>0){r.required=x[0].isRequired}var E=(n.attr||[]).filter(function(e){return ss.isInstanceOfType(e,Dt)});if(E.length>0){r.maxLength=E.maxLength;r.editorParams["maxLength"]=r.maxLength}var I=(n.attr||[]).filter(function(e){return ss.isInstanceOfType(e,N)});for(var F=0;F<I.length;F++){var V=I[F];var D=V.key;if(ss.isValue(D)&&D.length>=1){D=D.substr(0,1).toLowerCase()+D.substring(1)}r.editorParams[D]=V.value}t.push(r)}return t};global.Serenity.PropertyItemHelper=Xt;var Zt=function(){};Zt.__typeName="Serenity.PropertyItemSlickConverter";Zt.toSlickColumns=function(e){var t=[];if(ss.isNullOrUndefined(e)){return t}for(var i=0;i<e.length;i++){t.push(Zt.toSlickColumn(e[i]))}return t};Zt.toSlickColumn=function(e){var t={};t.sourceItem=e;t.visible=e.visible!==false&&e.filterOnly!==true&&(ss.isNullOrUndefined(e.readPermission)||Q.Authorization.hasPermission(e.readPermission));t.field=e.name;var i=Q.tryGetText(e.title);if(ss.isNullOrUndefined(i)){i=e.title}t.name=i;t.cssClass=e.cssClass;t.headerCssClass=e.headerCssClass;t.sortable=e.sortable!==false;t.sortOrder=ss.coalesce(e.sortOrder,0);if(ss.isValue(e.alignment)&&e.alignment.length>0){if(!Q.isEmptyOrNull(t.cssClass)){t.cssClass+=" align-"+e.alignment}else{t.cssClass="align-"+e.alignment}}t.width=ss.isValue(e.width)?e.width:80;t.minWidth=ss.coalesce(e.minWidth,30);t.maxWidth=ss.isNullOrUndefined(e.maxWidth)||e.maxWidth===0?null:e.maxWidth;t.resizable=ss.isNullOrUndefined(e.resizable)||ss.unbox(e.resizable);if(ss.isValue(e.formatterType)&&e.formatterType.length>0){var s=ss.cast(ss.createInstance(st.get(e.formatterType)),It);if(ss.isValue(e.formatterParams)){oi.set(s,e.formatterParams)}var n=ss.safeCast(s,Ct);if(ss.isValue(n)){n.initializeColumn(t)}t.format=ss.mkdel(s,s.format)}return t};global.Serenity.PropertyItemSlickConverter=Zt;var ei=function(e,t){this.$entity=null;this.$entityId=null;this.propertyGrid=null;Ci.call(this,e,t);if(!this.isAsyncWidget()){this.$initPropertyGrid();this.loadInitialEntity()}};ei.__typeName="Serenity.PropertyPanel";global.Serenity.PropertyPanel=ei;var ti=function(){};ti.__typeName="Serenity.PublicEditorTypes";ti.$registerType=function(e){var t=ss.getTypeFullName(e);var i={type:e};var s=ss.getAttributes(e,Ni,true);if(ss.isValue(s)&&s.length>0){i.displayName=ss.cast(s[0],Ni).displayName}else{i.displayName=ss.getTypeFullName(e)}var n=ss.getAttributes(e,Serenity.OptionsTypeAttribute,true);if(ss.isValue(n)&&n.length>0){i.optionsType=n[0].optionsType}ti.$registeredTypes[t]=i};ti.get_registeredTypes=function(){if(ss.isNullOrUndefined(ti.$registeredTypes)){ti.$registeredTypes={};A.$initialize();var e=new ss.ObjectEnumerator(A.$knownTypes);try{while(e.moveNext()){var t=e.current();if(ss.keyExists(ti.$registeredTypes,ss.getTypeFullName(t.value))){continue}ti.$registerType(t.value)}}finally{e.dispose()}}return ti.$registeredTypes};global.Serenity.PublicEditorTypes=ti;var ii=function(e,t){this.$lastValue=null;this.$timer=0;this.$field=null;this.$fieldChanged=false;Serenity.Widget.call(this,e,t);e.attr("title",Q.text("Controls.QuickSearch.Hint")).attr("placeholder",Q.text("Controls.QuickSearch.Placeholder"));this.$lastValue=Q.trim(ss.coalesce(e.val(),""));var i=this;this.element.bind("keyup."+this.uniqueName,function(){i.checkIfValueChanged()});this.element.bind("change."+this.uniqueName,function(){i.checkIfValueChanged()});$("<span><i></i></span>").addClass("quick-search-icon").insertBefore(e);if(ss.isValue(this.options.fields)&&this.options.fields.length>0){var s=$("<a/>").addClass("quick-search-field").attr("title",Q.text("Controls.QuickSearch.FieldSelection")).insertBefore(e);var n=$("<ul></ul>").css("width","120px");for(var r=0;r<this.options.fields.length;r++){var a=this.options.fields[r];var l={$:a};$("<li><a/></li>").appendTo(n).children().attr("href","#").text(ss.coalesce(a.title,"")).click(ss.mkdel({field:l,$this:this},function(e){e.preventDefault();this.$this.$fieldChanged=!ss.referenceEquals(i.$field,this.field.$);i.$field=this.field.$;this.$this.$updateInputPlaceHolder();this.$this.checkIfValueChanged()}))}new Rt(s,{positionMy:"right top",positionAt:"right bottom",menu:n});this.$field=this.options.fields[0];this.$updateInputPlaceHolder()}this.element.bind("execute-search."+this.uniqueName,ss.mkdel(this,function(e){if(!!this.$timer){window.clearTimeout(this.$timer)}this.$searchNow(Q.trim(ss.coalesce(this.element.val(),"")))}))};ii.__typeName="Serenity.QuickSearchInput";global.Serenity.QuickSearchInput=ii;var si=function(){};si.__typeName="Serenity.QuickSearchInputOptions";si.createInstance=function(){return si.$ctor()};si.$ctor=function(){var e={};e.typeDelay=0;e.loadingParentClass=null;e.filteredParentClass=null;e.onSearch=null;e.fields=null;e.typeDelay=500;e.loadingParentClass="s-QuickSearchLoading";e.filteredParentClass="s-QuickSearchFiltered";return e};si.isInstanceOfType=function(){return true};global.Serenity.QuickSearchInputOptions=si;var ni=function(e,t){Serenity.Widget.call(this,e,t);if(Q.isEmptyOrNull(this.options.enumKey)&&ss.isNullOrUndefined(this.options.enumType)&&Q.isEmptyOrNull(this.options.lookupKey)){return}if(!Q.isEmptyOrNull(this.options.lookupKey)){var i=Q.getLookup(this.options.lookupKey);for(var s=0;s<i.items.length;s++){var n=i.items[s];var r=n[i.textField];var a=ss.isNullOrUndefined(r)?"":r.toString();var l=n[i.idField];var o=ss.isNullOrUndefined(l)?"":l.toString();this.$addRadio(o,a)}}else{var u=this.options.enumType||z.get(this.options.enumKey);var d=this.options.enumKey;if(ss.isNullOrUndefined(d)&&ss.isValue(u)){var c=ss.getAttributes(u,Serenity.EnumKeyAttribute,false);if(c.length>0){d=c[0].value}}var f=ss.Enum.getValues(u);for(var h=0;h<f.length;h++){var p=f[h];var m=ss.Enum.toString(u,p);this.$addRadio(ss.unbox(ss.cast(p,ss.Int32)).toString(),ss.coalesce(Q.tryGetText("Enums."+d+"."+m),m))}}};ni.__typeName="Serenity.RadioButtonEditor";global.Serenity.RadioButtonEditor=ni;var ri=function(){};ri.__typeName="Serenity.RadioButtonEditorOptions";ri.createInstance=function(){return ri.$ctor()};ri.$ctor=function(){var e={};e.enumKey=null;e.enumType=null;e.lookupKey=null;return e};ri.isInstanceOfType=function(){return true};global.Serenity.RadioButtonEditorOptions=ri;var ai=function(e){this.value=false;this.value=e};ai.__typeName="Serenity.ReadOnlyAttribute";global.Serenity.ReadOnlyAttribute=ai;var li=function(e,t){Serenity.Widget.call(this,e,t);this.element.addClass("g-recaptcha").attr("data-sitekey",this.options.siteKey);if(!!(ss.isNullOrUndefined(window.window.grecaptcha)&&$("script#RecaptchaInclude").length===0)){var i="https://www.google.com/recaptcha/api.js";var s=this.options.language;if(ss.isNullOrUndefined(s)){s=ss.coalesce($("html").attr("lang"),"")}i+="?hl="+s;$("<script/>").attr("id","RecaptchaInclude").attr("src",i).appendTo(document.body)}var n=$("<input />").insertBefore(this.element).attr("id",this.uniqueName+"_validate").val("x");var r={};r["visibility"]="hidden";r["width"]="0px";r["height"]="0px";r["padding"]="0px";var a=n.css(r);var l=this;xi.addValidationRule(a,this.uniqueName,ss.mkdel(this,function(e){if(ss.isNullOrEmptyString(this.get_value())){return Q.text("Validation.Required")}return null}))};li.__typeName="Serenity.Recaptcha";global.Serenity.Recaptcha=li;var oi=function(){};oi.__typeName="Serenity.ReflectionOptionsSetter";oi.set=function(e,t){if(ss.isNullOrUndefined(t)){return}var i=ss.getInstanceType(e);if(ss.referenceEquals(i,Object)){return}var s=i.__propByName;var n=i.__fieldByName;if(ss.isNullOrUndefined(s)){var r=ss.getMembers(i,16,20);var a=r.filter(function(e){return!!e.setter&&((e.attr||[]).filter(function(e){return ss.isInstanceOfType(e,Serenity.OptionAttribute)}).length>0||(e.attr||[]).filter(function(e){return ss.isInstanceOfType(e,Ni)}).length>0)});s={};for(var l=0;l<a.length;l++){var o=a[l];s[ui.makeCamelCase(o.name)]=o}i.__propByName=s}if(ss.isNullOrUndefined(n)){var u=ss.getMembers(i,4,20);var d=u.filter(function(e){return(e.attr||[]).filter(function(e){return ss.isInstanceOfType(e,Serenity.OptionAttribute)}).length>0||(e.attr||[]).filter(function(e){return ss.isInstanceOfType(e,Ni)}).length>0});n={};for(var c=0;c<d.length;c++){var f=d[c];n[ui.makeCamelCase(f.name)]=f}i.__fieldByName=n}var h=ss.getEnumerator(Object.keys(t));try{while(h.moveNext()){var p=h.current();var m=t[p];var g=ui.makeCamelCase(p);var y=s[g]||s[p];if(ss.isValue(y)){ss.midel(y.setter,e)(m)}else{var v=n[g]||n[p];if(ss.isValue(v)){ss.fieldAccess(v,e,m)}}}}finally{h.dispose()}};global.Serenity.ReflectionOptionsSetter=oi;var ui=function(){};ui.__typeName="Serenity.ReflectionUtils";ui.getPropertyValue=function(e,t){var i=e;var s=i["get_"+t];if(!!!(typeof s==="undefined")){return s.apply(e)}var n=ui.makeCamelCase(t);s=i["get_"+n];if(!!!(typeof s==="undefined")){return s.apply(e)}return i[n]};ui.setPropertyValue=function(e,t,i){var s=e;var n=s["set_"+t];if(!!!(typeof n==="undefined")){n.apply(e,[i]);return}var r=ui.makeCamelCase(t);n=s["set_"+r];if(!!!(typeof n==="undefined")){n.apply(e,[i]);return}s[r]=i};ui.makeCamelCase=function(e){if(ss.isNullOrEmptyString(e)){return e}if(e==="ID"){return"id"}var t=false;var i=0;for(var s=0;s<e.length;s++){if(e.charCodeAt(s)>=65&&e.charCodeAt(s)<=90){i++}else{t=true;break}}if(!t&&e.length!==1||i===0){return e}else if(i>1){return e.substr(0,i-1).toLowerCase()+e.substr(i-1)}else if(e.length===1){return e.toLowerCase()}else{return e.substr(0,1).toLowerCase()+e.substr(1)}};global.Serenity.ReflectionUtils=ui;var di=function(e){this.isRequired=false;this.isRequired=e};di.__typeName="Serenity.RequiredAttribute";global.Serenity.RequiredAttribute=di;var ci=function(e,t){this.pageSize=50;Serenity.Widget.call(this,e,t);var i=this.emptyItemText();if(ss.isValue(i)){e.attr("placeholder",i)}e.select2(this.getSelect2Options());e.attr("type","text");e.bind("change."+this.uniqueName,function(t,i){if(!!(Ei.hasOriginalEvent(t)||!i)){if(ss.isValue(Oi.getValidator(e))){e.valid()}}})};ci.__typeName="Serenity.Select2AjaxEditor";global.Serenity.Select2AjaxEditor=ci;var fi=function(e,t){this.multiple=false;this.items=null;this.itemById=null;this.pageSize=100;this.lastCreateTerm=null;Serenity.Widget.call(this,e,t);this.items=[];this.itemById={};var i=this.emptyItemText();if(ss.isValue(i)){e.attr("placeholder",i)}var s=this.getSelect2Options();this.multiple=!!s.multiple;e.select2(s);e.attr("type","text");e.bind("change."+this.uniqueName,function(t,i){if(!!(Ei.hasOriginalEvent(t)||!i)){if(ss.isValue(Oi.getValidator(e))){e.valid()}}})};fi.__typeName="Serenity.Select2Editor";global.Serenity.Select2Editor=fi;var hi=function(e,t){fi.call(this,e,t);this.updateItems()};hi.__typeName="Serenity.SelectEditor";global.Serenity.SelectEditor=hi;var pi=function(){};pi.__typeName="Serenity.SelectEditorOptions";pi.createInstance=function(){return pi.$ctor()};pi.$ctor=function(){var e={};e.items=null;e.emptyOptionText=null;e.items=[];return e};pi.isInstanceOfType=function(){return true};global.Serenity.SelectEditorOptions=pi;var mi=function(){};mi.__typeName="Serenity.SlickFormatting";mi.getEnumText=function(e){return function(t){return W.getText(e).call(null,t)}};mi.getEnumText$1=function(e,t){return W.getText$1(e,t)};mi.treeToggle=function(e,t,i){return function(s){var n=i(s);var r=e();var a=ss.coalesce(s.item._indent,0);var l='<span class="s-TreeIndent" style="width:'+15*a+'px"></span>';var o=t(s.item);var u=r.getIdxById(o);var d=r.getItemByIdx(ss.unbox(u)+1);if(ss.isValue(d)){var c=ss.coalesce(d._indent,0);if(c>a){if(!!!!s.item._collapsed){return l+'<span class="s-TreeToggle s-TreeExpand"></span>'+n}else{return l+'<span class="s-TreeToggle s-TreeCollapse"></span>'+n}}}return l+'<span class="s-TreeToggle"></span>'+n}};mi.date=function(e){var t=e;if(ss.isNullOrUndefined(t)){t=Q.Culture.dateFormat}e=t;return function(t){return Q.htmlEncode(y.format(t.value,e))}};mi.dateTime=function(e){var t=e;if(ss.isNullOrUndefined(t)){t=Q.Culture.dateTimeFormat}e=t;return function(t){return Q.htmlEncode(y.format(t.value,e))}};mi.checkBox=function(){return function(e){return'<span class="check-box no-float '+(!!e.value?" checked":"")+'"></span>'}};mi.number=function(e){return function(t){return Qt.format(t.value,e)}};mi.getItemType=function(e){return ss.safeCast(e.data("item-type"),String)};mi.getItemId=function(e){var t=e.data("item-id");return ss.isNullOrUndefined(t)?null:t.toString()};mi.itemLinkText=function(e,t,i,s,n){return"<a"+(ss.isValue(t)?' href="#'+ss.replaceAllString(e,".","-")+"/"+t+'"':"")+' data-item-type="'+Q.attrEncode(e)+'"'+' data-item-id="'+Q.attrEncode(t)+'"'+' class="s-EditLink s-'+ss.replaceAllString(e,".","-")+"Link"+(Q.isEmptyOrNull(s)?"":" "+s)+'">'+(n?Q.htmlEncode(ss.coalesce(i,"")):ss.coalesce(i,""))+"</a>"};mi.itemLink=function(e,t,i,s,n){return function(r){return ss.cast(mi.itemLinkText(e,r.item[t],ss.staticEquals(i,null)?r.value:i(r),ss.staticEquals(s,null)?"":s(r),n),String)}};global.Serenity.SlickFormatting=mi;var gi=function(){};gi.__typeName="Serenity.SlickHelper";gi.setDefaults=function(e,t){var i=ss.getEnumerator(e);try{while(i.moveNext()){var s=i.current();s.sortable=ss.isValue(s.sortable)?s.sortable:true;var n=s.id;if(ss.isNullOrUndefined(n)){n=s.field}s.id=n;if(ss.isValue(t)&&ss.isValue(s.id)&&(ss.isNullOrUndefined(s.name)||ss.startsWithString(s.name,"~"))){var r=ss.isValue(s.name)?s.name.substr(1):s.id;s.name=Q.text(t+r)}if(ss.staticEquals(s.formatter,null)&&!ss.staticEquals(s.format,null)){s.formatter=gi.convertToFormatter(s.format)}else if(ss.staticEquals(s.formatter,null)){s.formatter=function(e,t,i,s,n){return Q.htmlEncode(i)}}}}finally{i.dispose()}return e};gi.convertToFormatter=function(e){if(ss.staticEquals(e,null)){return null}else{return function(t,i,s,n,r){return e({row:t,cell:i,value:s,column:n,item:r})}}};global.Serenity.SlickHelper=gi;var yi=function(){};yi.__typeName="Serenity.SlickTreeHelper";yi.filterCustom=function(e,t){var i=t(e);var s=0;while(ss.isValue(i)){if(!!i._collapsed){return false}i=t(i);if(s++>1e3){throw new ss.InvalidOperationException("Possible infinite loop, check parents has no circular reference!")}}return true};yi.filterById=function(e,t,i){return yi.filterCustom(e,function(e){var s=i(e);if(ss.isNullOrUndefined(s)){return null}return t.getItemById(s)})};yi.setCollapsed=function(e,t){if(ss.isValue(e)){var i=ss.getEnumerator(e);try{while(i.moveNext()){var s=i.current();s._collapsed=t}}finally{i.dispose()}}};yi.setCollapsedFlag=function(e,t){e._collapsed=t};yi.setIndents=function(e,t,i,s){var n=0;var r={};for(var a=0;a<ss.count(e);a++){var l=ss.getItem(e,a);if(a>0){var o=i(l);if(ss.isValue(o)&&ss.referenceEquals(o,t(ss.getItem(e,a-1)))){n+=1}else if(ss.isNullOrUndefined(o)){n=0}else if(!ss.referenceEquals(o,i(ss.getItem(e,a-1)))){if(ss.keyExists(r,o)){n=r[o]+1}else{n=0}}}r[t(l)]=n;l._indent=n;if(ss.isValue(s)){l._collapsed=ss.unbox(s)}}};yi.toggleClick=function(e,t,i,s,n){var r=$(e.target);if(!r.hasClass("s-TreeToggle")){return}if(r.hasClass("s-TreeCollapse")||r.hasClass("s-TreeExpand")){var a=s.getItem(t);if(!!ss.isValue(a)){if(!!!a._collapsed){a._collapsed=true}else{a._collapsed=false}s.updateItem(n(a),a)}if(e.shiftKey){s.beginUpdate();try{yi.setCollapsed(s.getItems(),!!a._collapsed);s.setItems(s.getItems(),true)}finally{s.endUpdate()}}}};global.Serenity.SlickTreeHelper=yi;var vi=function(){r.call(this)};vi.__typeName="Serenity.StringFiltering";global.Serenity.StringFiltering=vi;var Si=function(){};Si.__typeName="Serenity.SubDialogHelper";Si.bindToDataChange=function(e,t,i,s){var n=t.widgetName;e.element.bind("ondatachange."+n,function(e,t){if(s){window.setTimeout(function(){i(e,t)},0)}else{i(e,t)}}).bind("remove."+n,function(){e.element.unbind("ondatachange."+n)});return e};Si.triggerDataChange=function(e){e.element.triggerHandler("ondatachange");return e};Si.triggerDataChanged=function(e){e.triggerHandler("ondatachange");return e};Si.bubbleDataChange=function(e,t,i){return Si.bindToDataChange(e,t,function(e,i){t.element.triggerHandler("ondatachange")},i)};Si.cascade=function(e,t){e.element.one("dialogopen",function(i){e.element.dialog().dialog("option","position",Si.cascadedDialogOffset(t))});return e};Si.cascadedDialogOffset=function(e){return{my:"left top",at:"left+20 top+20",of:e[0]}};global.Serenity.SubDialogHelper=Si;var Ci=function(e,t){this.isPanel=false;this.validator=null;this.tabs=null;this.toolbar=null;Serenity.TemplatedWidget.call(this,e,t);this.initValidator();this.initTabs();this.initToolbar()};Ci.__typeName="Serenity.TemplatedPanel";global.Serenity.TemplatedPanel=Ci;var bi=function(e,t){this.$mouseTrap=null;Serenity.Widget.call(this,e,t);this.element.addClass("s-Toolbar clearfix").html('<div class="tool-buttons"><div class="buttons-outer"><div class="buttons-inner"></div></div></div>');var i=$("div.buttons-inner",this.element);var s=this.options.buttons;for(var n=0;n<s.length;n++){this.$createButton(i,s[n])}};bi.__typeName="Serenity.Toolbar";global.Serenity.Toolbar=bi;var $i=function(e){this.value=false;this.value=e};$i.__typeName="Serenity.UpdatableAttribute";global.Serenity.UpdatableAttribute=$i;var Ti=function(){};Ti.__typeName="Serenity.UploadHelper";Ti.addUploadInput=function(e){e.container.addClass("fileinput-button");var t=$("<input/>").attr("type","file").attr("name",e.inputName+"[]").attr("data-url",Q.resolveUrl("~/File/TemporaryUpload")).attr("multiple","multiple").appendTo(e.container);if(e.allowMultiple){t.attr("multiple","multiple")}t.fileupload({dataType:"json",done:function(t,i){var s=i.result;if(!ss.staticEquals(e.fileDone,null)){e.fileDone(s,ss.cast(i.files[0].name,String),i)}},start:function(){Q.blockUI(null);if(ss.isValue(e.progress)){e.progress.show()}},stop:function(){Q.blockUndo();if(ss.isValue(e.progress)){e.progress.hide()}},progress:function(t,i){if(ss.isValue(e.progress)){var s=ss.unbox(ss.cast(i.loaded,Number))/ss.unbox(ss.cast(i.total,Number))*100;e.progress.children().css("width",s.toString()+"%")}}});return t};Ti.checkImageConstraints=function(e,t){if(!e.IsImage&&!t.allowNonImage){Q.alert(Q.text("Controls.ImageUpload.NotAnImageFile"));return false}if(t.minSize>0&&e.Size<t.minSize){Q.alert(ss.formatString(Q.text("Controls.ImageUpload.UploadFileTooSmall"),Ti.fileSizeDisplay(t.minSize)));return false}if(t.maxSize>0&&e.Size>t.maxSize){Q.alert(ss.formatString(Q.text("Controls.ImageUpload.UploadFileTooBig"),Ti.fileSizeDisplay(t.maxSize)));return false}if(!e.IsImage){return true}if(t.minWidth>0&&e.Width<t.minWidth){Q.alert(ss.formatString(Q.text("Controls.ImageUpload.MinWidth"),t.minWidth));return false}if(t.maxWidth>0&&e.Width>t.maxWidth){Q.alert(ss.formatString(Q.text("Controls.ImageUpload.MaxWidth"),t.maxWidth));return false}if(t.minHeight>0&&e.Height<t.minHeight){Q.alert(ss.formatString(Q.text("Controls.ImageUpload.MinHeight"),t.minHeight));return false}if(t.maxHeight>0&&e.Height>t.maxHeight){Q.alert(ss.formatString(Q.text("Controls.ImageUpload.MaxHeight"),t.maxHeight));return false}return true};Ti.fileNameSizeDisplay=function(e,t){return e+" ("+Ti.fileSizeDisplay(t)+")"};Ti.fileSizeDisplay=function(e){var t=ss.round(e*100/1024)*.01;var i="KB";if(t>1e3){t=ss.round(t*.001*100)*.01;i="MB"}var s=t.toString().split(String.fromCharCode(46));var n;if(s.length>1){n=s[0]+"."+s[1].substr(0,2)}else{n=s[0]}return n+" "+i};Ti.hasImageExtension=function(e){if(ss.isNullOrUndefined(e)){return false}e=e.toLowerCase();return ss.endsWithString(e,".jpg")||ss.endsWithString(e,".jpeg")||ss.endsWithString(e,".gif")||ss.endsWithString(e,".png")};Ti.thumbFileName=function(e){e=ss.coalesce(e,"");var t=e.lastIndexOf(".");if(t>=0){e=e.substr(0,t)}return e+"_t.jpg"};Ti.dbFileUrl=function(e){e=ss.replaceAllString(ss.coalesce(e,""),"\\","/");return Q.resolveUrl("~/upload/")+e};Ti.colorBox=function(e,t){e.colorbox({current:Q.text("Controls.ImageUpload.ColorboxCurrent"),previous:Q.text("Controls.ImageUpload.ColorboxPrior"),next:Q.text("Controls.ImageUpload.ColorboxNext"),close:Q.text("Controls.ImageUpload.ColorboxClose")})};Ti.populateFileSymbols=function(e,t,i,s){t=t||[];e.html("");for(var n=0;n<t.length;n++){var r=t[n];var a=$("<li/>").addClass("file-item").data("index",n);var l=Ti.hasImageExtension(r.Filename);if(l){a.addClass("file-image")}else{a.addClass("file-binary")}var o="#"+n;var u=$("<a/>").addClass("thumb").appendTo(a);var d=ss.coalesce(r.OriginalName,"");var c=r.Filename;if(ss.isValue(s)&&ss.isValue(c)&&!ss.startsWithString(c,"temporary/")){c=s+c}u.attr("href",Ti.dbFileUrl(c));u.attr("target","_blank");if(!Q.isEmptyOrNull(d)){u.attr("title",d)}if(l){u.css("backgroundImage","url('"+Ti.dbFileUrl(Ti.thumbFileName(r.Filename))+"')");Ti.colorBox(u,new Object)}if(i){$("<div/>").addClass("filename").text(d).attr("title",d).appendTo(a)}a.appendTo(e)}};global.Serenity.UploadHelper=Ti;var _i=function(){this.$1$DisplayPropertyField=null;this.$1$DisplayFormatField=null;this.$1$UrlPropertyField=null;this.$1$UrlFormatField=null;this.$1$TargetField=null};_i.__typeName="Serenity.UrlFormatter";global.Serenity.UrlFormatter=_i;var Oi=function(){};Oi.__typeName="Serenity.ValidationHelper";Oi.asyncSubmit=function(e,t,i){var s=e.validate();var n=s.settings;if(!!ss.isValue(n.abortHandler)){return false}if(!ss.staticEquals(t,null)&&t()===false){return false}n["abortHandler"]=Q.validatorAbortHandler;n["submitHandler"]=function(){if(!ss.staticEquals(i,null)){i()}return false};e.trigger("submit");return true};Oi.submit=function(e,t,i){var s=e.validate();var n=s.settings;if(!!ss.isValue(n.abortHandler)){return false}if(!ss.staticEquals(t,null)&&t()===false){return false}if(!s.form()){return false}if(!ss.staticEquals(i,null)){i()}return true};Oi.getValidator=function(e){var t=e.closest("form");if(t.length===0){return null}return t.data("validator")};global.Serenity.ValidationHelper=Oi;var xi=function(){};xi.__typeName="Serenity.VX";xi.addValidationRule=function(e,t,i){if(e.length===0){return e}if(ss.staticEquals(i,null)){throw new ss.Exception("rule is null!")}e.addClass("customValidate").bind("customValidate."+t,i);return e};xi.removeValidationRule=function(e,t){e.unbind("customValidate."+t);return e};xi.validateElement=function(e,t){return e.element(t.element[0])};global.Serenity.VX=xi;var ki=function(){};ki.__typeName="Serenity.WidgetPrototype";global.Serenity.WidgetPrototype=ki;var Ei=function(){};Ei.__typeName="Serenity.WX";Ei.getWidget=function(e){return function(t){if(ss.isNullOrUndefined(t)){throw new ss.ArgumentNullException("element")}if(t.length===0){throw new ss.Exception(ss.formatString("Searching for widget of type '{0}' on a non-existent element! ({1})",ss.getTypeFullName(e),t.selector))}var i=t.tryGetWidget(e);if(ss.isNullOrUndefined(i)){var s=ss.formatString("Element has no widget of type '{0}'! If you have recently changed editor type of a property in a form class, or changed data type in row (which also changes editor type) your script side Form definition might be out of date. Make sure your project builds successfully and transform T4 templates",ss.getTypeFullName(e));Q.notifyError(s,"",null);throw new ss.Exception(s)}return i}};Ei.getWidgetName=function(e){return ss.replaceAllString(ss.getTypeFullName(e),".","_")};Ei.hasOriginalEvent=function(e){return!!!(typeof e.originalEvent==="undefined")};Ei.change=function(e,t){e.element.bind("change."+e.uniqueName,t)};Ei.changeSelect2=function(e,t){e.element.bind("change."+e.uniqueName,function(e,i){if(!!(Ei.hasOriginalEvent(e)||!i)){t(e)}})};Ei.getGridField=function(e){return e.element.closest(".field")};Ei.create=function(e){return function(t,i){return Serenity.Widget.create({type:e,element:t,options:i,init:null})}};global.Serenity.WX=Ei;var Ii=function(e){this.$propertyItems=null;this.$propertyGrid=null;this.$reportKey=null;Serenity.TemplatedDialog.call(this,e);if(ss.isValue(e.reportKey)){this.loadReport(e.reportKey)}};Ii.__typeName="Serenity.Reporting.ReportDialog";global.Serenity.Reporting.ReportDialog=Ii;var Fi=function(e){Serenity.Widget.call(this,e,null);$(".report-link").click(ss.mkdel(this,this.$reportLinkClick));$("div.line").click(ss.mkdel(this,this.$categoryClick));var t=this;var i=$("#QuickSearchInput");var s=si.$ctor();s.onSearch=function(e,i,s){t.$updateMatchFlags(i);s(true)};new ii(i,s)};Fi.__typeName="Serenity.Reporting.ReportPage";global.Serenity.Reporting.ReportPage=Fi;var Ni=function(e){this.displayName=null;this.displayName=e};Ni.__typeName="System.ComponentModel.DisplayNameAttribute";global.System.ComponentModel.DisplayNameAttribute=Ni;ss.initInterface(Et,e,{get_readOnly:null,set_readOnly:null});ss.initClass(fi,e,{destroy:function(){if(ss.isValue(this.element)){this.element.select2("destroy")}Serenity.Widget.prototype.destroy.call(this)},emptyItemText:function(){var e=this.element.attr("placeholder");if(ss.isNullOrUndefined(e)){e=Q.text("Controls.SelectEditor.EmptyItemText")}return e},getSelect2Options:function(){var e=this.emptyItemText();return{data:this.items,placeHolder:!Q.isEmptyOrNull(e)?e:null,allowClear:ss.isValue(e),createSearchChoicePosition:"bottom",query:ss.mkdel(this,function(e){var t=Q.isEmptyOrNull(e.term)?"":Select2.util.stripDiacritics(ss.coalesce(e.term,"")).toUpperCase();var i=this.items.filter(function(e){return ss.isNullOrUndefined(t)||ss.startsWithString(Select2.util.stripDiacritics(ss.coalesce(e.text,"")).toUpperCase(),t)});ss.arrayAddRange(i,this.items.filter(function(e){return ss.isValue(t)&&!ss.startsWithString(Select2.util.stripDiacritics(ss.coalesce(e.text,"")).toUpperCase(),t)&&Select2.util.stripDiacritics(ss.coalesce(e.text,"")).toUpperCase().indexOf(t)>=0}));e.callback({results:i.slice((e.page-1)*this.pageSize,e.page*this.pageSize),more:i.length>=e.page*this.pageSize})}),initSelection:ss.mkdel(this,function(e,t){var i=e.val();var s=this.isAutoComplete();if(this.multiple){var n=[];var r=i.split(",");for(var a=0;a<r.length;a++){var l=r[a];var o=this.itemById[l];if(ss.isNullOrUndefined(o)&&s){o={id:l,text:l};this.addItem(o)}if(ss.isValue(o)){n.push(o)}}t(n);return}var u=this.itemById[i];if(ss.isNullOrUndefined(u)&&s){u={id:i,text:i};this.addItem(u)}t(u)})}},get_delimited:function(){return!!!!this.options.delimited},clearItems:function(){ss.clear(this.items);this.itemById={}},addItem:function(e){this.items.push(e);this.itemById[e.id]=e},addOption:function(e,t,i,s){this.addItem({id:e,text:t,source:i,disabled:s})},addInplaceCreate:function(e,t){var i=this;var s=e;if(ss.isNullOrUndefined(s)){s=Q.text("Controls.SelectEditor.InplaceAdd")}e=s;var n=t;if(ss.isNullOrUndefined(n)){n=Q.text("Controls.SelectEditor.InplaceEdit")}t=n;var r=$("<a><b/></a>").addClass("inplace-button inplace-create").attr("title",e).insertAfter(this.element).click(function(e){i.inplaceCreateClick(e)});this.get_select2Container().add(this.element).addClass("has-inplace-button");Ei.change(this,ss.mkdel(this,function(i){var s=this.multiple||Q.isEmptyOrNull(this.get_value());r.attr("title",s?e:t).toggleClass("edit",!s)}));Ei.changeSelect2(this,ss.mkdel(this,function(e){if(this.multiple){var t=this.get_values();if(t.length>0&&ss.referenceEquals(t[t.length-1],(-2147483648).toString())){this.set_values(t.slice(0,t.length-1));this.inplaceCreateClick(e)}}else if(ss.referenceEquals(this.get_value(),(-2147483648).toString())){this.set_value(null);this.inplaceCreateClick(e)}}));if(this.multiple){this.get_select2Container().on("dblclick."+this.uniqueName,".select2-search-choice",ss.mkdel(this,function(e){var t=$(e.target);if(!t.hasClass("select2-search-choice")){t=t.closest(".select2-search-choice")}var i=t.index();var s=this.get_values();if(i<0||i>=this.get_values().length){return}e["editItem"]=s[i];this.inplaceCreateClick(e)}))}},inplaceCreateClick:function(e){},isAutoComplete:function(){return false},getCreateSearchChoice:function(e){return ss.mkdel(this,function(t){this.lastCreateTerm=t;t=ss.coalesce(Select2.util.stripDiacritics(t),"").toLowerCase();if(Q.isTrimmedEmpty(t)){return null}if(Q.any(this.get_items(),function(i){var s=!ss.staticEquals(e,null)?e(i.source):i.text;return ss.referenceEquals(Select2.util.stripDiacritics(ss.coalesce(s,"")).toLowerCase(),t)})){return null}if(!Q.any(this.get_items(),function(e){return ss.coalesce(Select2.util.stripDiacritics(e.text),"").toLowerCase().indexOf(t)!==-1})){if(this.isAutoComplete()){return{id:this.lastCreateTerm,text:this.lastCreateTerm}}return{id:(-2147483648).toString(),text:Q.text("Controls.SelectEditor.NoResultsClickToDefine")}}if(this.isAutoComplete()){return{id:this.lastCreateTerm,text:this.lastCreateTerm}}return{id:(-2147483648).toString(),text:Q.text("Controls.SelectEditor.ClickToDefine")}})},setEditValue:function(e,t){var i=e[t.name];if(ss.isArray(i)){this.set_values(i)}else{this.set_value(ss.isNullOrUndefined(i)?null:i.toString())}},getEditValue:function(e,t){if(!this.multiple||this.get_delimited()){t[e.name]=this.get_value()}else{t[e.name]=this.get_values()}},get_select2Container:function(){return this.element.prevAll(".select2-container")},get_items:function(){return this.items},get_itemByKey:function(){return this.itemById},get_value:function(){var e=this.element.select2("val");if(ss.isValue(e)&&ss.isArray(e)){return ss.cast(e,Array).join(",")
}return ss.safeCast(e,String)},set_value:function(e){if(!ss.referenceEquals(e,this.get_value())){var t=e;if(!ss.isNullOrEmptyString(e)&&this.multiple){t=e.split(String.fromCharCode(44)).map(function(e){return Q.trimToNull(e)}).filter(function(e){return ss.isValue(e)})}this.element.select2("val",t).triggerHandler("change",[true])}},get_values:function(){var e=this.element.select2("val");if(ss.isNullOrUndefined(e)){return[]}if(ss.isArray(e)){return ss.cast(e,Array)}var t=ss.safeCast(e,String);if(ss.isNullOrEmptyString(t)){return[]}return[t]},set_values:function(e){if(ss.isNullOrUndefined(e)||e.length===0){this.set_value(null);return}this.set_value(e.join(","))},get_text:function(){var e=this.element.select2("data");if(ss.isNullOrUndefined(e)){e=new Object}return ss.cast(e.text,String)},get_readOnly:function(){return!ss.isNullOrEmptyString(this.element.attr("readonly"))},set_readOnly:function(e){if(e!==this.get_readOnly()){P.setReadonly(this.element,e);this.element.nextAll(".inplace-create").attr("disabled",e?"disabled":"").css("opacity",e?"0.1":"").css("cursor",e?"default":"")}}},Serenity.Widget,[Serenity.ISetEditValue,Serenity.IGetEditValue,Serenity.IStringValue,Et]);ss.initClass(t,e,{emptyItemText:function(){if(Q.isEmptyOrNull(this.get_value())){return Q.text("Controls.FilterPanel.SelectField")}return null},getSelect2Options:function(){var e=fi.prototype.getSelect2Options.call(this);e.allowClear=false;return e}},fi,[Serenity.ISetEditValue,Serenity.IGetEditValue,Serenity.IStringValue,Et]);ss.initClass(i,e,{emptyItemText:function(){return null},getSelect2Options:function(){var e=fi.prototype.getSelect2Options.call(this);e.allowClear=false;return e}},fi,[Serenity.ISetEditValue,Serenity.IGetEditValue,Serenity.IStringValue,Et]);ss.initClass(wt,e,{initializeAsync:function(){return this.updateItemsAsync().then(ss.mkdel(this,function(){Q.ScriptData.bindToChange("Lookup."+this.getLookupKey(),this.uniqueName,ss.mkdel(this,function(){this.updateItemsAsync()}))}),null)},destroy:function(){Q.ScriptData.unbindFromChange(this.uniqueName);fi.prototype.destroy.call(this)},getLookupKey:function(){if(ss.isValue(this.options.lookupKey)){return this.options.lookupKey}var e=ss.getTypeFullName(ss.getInstanceType(this));var t=e.indexOf(".");if(t>=0){e=e.substring(t+1)}if(ss.endsWithString(e,"Editor")){e=e.substr(0,e.length-6)}return e},getLookup:function(){return Q.getLookup(this.getLookupKey())},getLookupAsync:function(){return Promise.resolve().then(ss.mkdel(this,function(){var e=this.getLookupKey();return Q.getLookupAsync(e)}),null)},getItems:function(e){return this.filterItems(this.cascadeItems(e.items))},getItemText:function(e,t){var i=!ss.staticEquals(t.textFormatter,null)?t.textFormatter(e):e[t.textField];return ss.isNullOrUndefined(i)?"":i.toString()},getItemDisabled:function(e,t){return false},updateItems:function(){var e=this.getLookup();this.clearItems();var t=this.getItems(e);for(var i=0;i<t.length;i++){var s=t[i];var n=this.getItemText(s,e);var r=this.getItemDisabled(s,e);var a=s[e.idField];var l=ss.isNullOrUndefined(a)?"":a.toString();this.addItem({id:l,text:n,source:s,disabled:r})}},updateItemsAsync:function(){return this.getLookupAsync().then(ss.mkdel(this,function(e){this.clearItems();var t=this.getItems(e);for(var i=0;i<t.length;i++){var s=t[i];var n=this.getItemText(s,e);var r=this.getItemDisabled(s,e);var a=s[e.idField];var l=ss.isNullOrUndefined(a)?"":a.toString();this.addItem({id:l,text:n,source:s,disabled:r})}}),null)},getDialogTypeKey:function(){if(ss.isValue(this.options.dialogType)){return this.options.dialogType}return this.getLookupKey()},createEditDialog:function(e){var t=this.getDialogTypeKey();var i=I.get(t);Serenity.Widget.create({type:i,element:null,options:{},init:function(t){e(ss.cast(t,vt))}})},initNewEntity:function(e){if(!ss.isNullOrEmptyString(this.get_cascadeField())){e[this.get_cascadeField()]=this.get_cascadeValue()}if(!ss.isNullOrEmptyString(this.get_filterField())){e[this.get_filterField()]=this.get_filterValue()}if(!ss.staticEquals(this.onInitNewEntity,null)){this.onInitNewEntity(e)}},inplaceCreateClick:function(e){if(this.get_readOnly()){return}var t=this;this.createEditDialog(ss.mkdel(this,function(i){Si.bindToDataChange(i,this,ss.mkdel(this,function(e,i){Q.reloadLookup(this.getLookupKey());t.updateItems();this.lastCreateTerm=null;if((i.type==="create"||i.type==="update")&&ss.isValue(i.entityId)){var s=i.entityId.toString();if(this.multiple){var n=ss.arrayClone(t.get_values());if(!ss.contains(n,s)){n.push(s)}t.set_values(null);t.set_values(Array.prototype.slice.call(n))}else{t.set_value(null);t.set_value(s)}}else if(this.multiple&&i.type==="delete"&&ss.isValue(i.entityId)){var r=i.entityId.toString();var a=ss.arrayClone(t.get_values());ss.remove(a,r);t.set_values(Array.prototype.slice.call(a))}else if(!this.multiple){t.set_value(null)}}),true);var s=e["editItem"];if(ss.isValue(s)){i.load(s,ss.mkdel(this,function(){i.dialogOpen(this.get_openDialogAsPanel())}),null)}else if(this.multiple||Q.isEmptyOrNull(this.get_value())){var n=new Object;n[this.getLookup().textField]=Q.trimToEmpty(this.lastCreateTerm);this.initNewEntity(n);i.load(n,ss.mkdel(this,function(){i.dialogOpen(this.get_openDialogAsPanel())}),null)}else{i.load(this.get_value(),ss.mkdel(this,function(){i.dialogOpen(this.get_openDialogAsPanel())}),null)}}))},cascadeItems:function(e){if(ss.isNullOrUndefined(this.get_cascadeValue())||ss.safeCast(this.get_cascadeValue(),String)===""){if(!Q.isEmptyOrNull(this.get_cascadeField())){return[]}return e}var t=this.get_cascadeValue().toString();return e.filter(ss.mkdel(this,function(e){var i=e[this.get_cascadeField()];if(ss.isNullOrUndefined(i)){i=ui.getPropertyValue(e,this.get_cascadeField())}var s=i;return!!(ss.isValue(s)&&ss.referenceEquals(s.toString(),t))}))},filterItems:function(e){if(ss.isNullOrUndefined(this.get_filterValue())||ss.safeCast(this.get_filterValue(),String)===""){return e}var t=this.get_filterValue().toString();return e.filter(ss.mkdel(this,function(e){var i=e[this.get_filterField()];if(ss.isNullOrUndefined(i)){i=ui.getPropertyValue(e,this.get_filterField())}var s=i;return!!(ss.isValue(s)&&ss.referenceEquals(s.toString(),t))}))},getCascadeFromValue:function(e){return P.getValue(e)},$setCascadeFrom:function(e){if(ss.isNullOrEmptyString(e)){if(ss.isValue(this.$cascadeLink)){this.$cascadeLink.set_parentID(null);this.$cascadeLink=null}this.options.cascadeFrom=null;return}this.$cascadeLink=new(ss.makeGenericType(o,[Object]))(this,ss.mkdel(this,function(e){this.set_cascadeValue(this.getCascadeFromValue(e))}));this.$cascadeLink.set_parentID(e);this.options.cascadeFrom=e},isAutoComplete:function(){return ss.isValue(this.options)&&this.options.autoComplete},getSelect2Options:function(){var e=fi.prototype.getSelect2Options.call(this);if(ss.isValue(this.options.minimumResultsForSearch)){e.minimumResultsForSearch=ss.unbox(this.options.minimumResultsForSearch)}if(this.options.autoComplete){e.createSearchChoice=this.getCreateSearchChoice(null)}else if(this.options.inplaceAdd&&(ss.isNullOrUndefined(this.options.inplaceAddPermission)||Q.Authorization.hasPermission(this.options.inplaceAddPermission))){e.createSearchChoice=this.getCreateSearchChoice(null)}if(this.options.multiple){e.multiple=true}e.allowClear=ss.coalesce(this.options.allowClear,true);return e},get_cascadeFrom:function(){return this.options.cascadeFrom},set_cascadeFrom:function(e){if(!ss.referenceEquals(e,this.options.cascadeFrom)){this.$setCascadeFrom(e);this.updateItems()}},get_cascadeField:function(){var e=this.options.cascadeField;if(ss.isNullOrUndefined(e)){e=this.options.cascadeFrom}return e},set_cascadeField:function(e){this.options.cascadeField=e},get_cascadeValue:function(){return this.options.cascadeValue},set_cascadeValue:function(e){if(!ss.referenceEquals(this.options.cascadeValue,e)){this.options.cascadeValue=e;this.set_value(null);this.updateItems()}},get_filterField:function(){return this.options.filterField},set_filterField:function(e){this.options.filterField=e},get_filterValue:function(){return this.options.filterValue},set_filterValue:function(e){if(!ss.referenceEquals(this.options.filterValue,e)){this.options.filterValue=e;this.set_value(null);this.updateItems()}},get_openDialogAsPanel:function(){return this.$5$OpenDialogAsPanelField},set_openDialogAsPanel:function(e){this.$5$OpenDialogAsPanelField=e}},fi,[Serenity.ISetEditValue,Serenity.IGetEditValue,Serenity.IStringValue,Et]);ss.initInterface(mt,e,{});ss.initClass(s,e,{getLookupKey:function(){var e=this.options.lookupKey;if(ss.isNullOrUndefined(e)){e=wt.prototype.getLookupKey.call(this)}return e}},wt,[Serenity.ISetEditValue,Serenity.IGetEditValue,Serenity.IStringValue,Et,mt]);ss.initInterface(St,e,{get_field:null,set_field:null,get_container:null,set_container:null,get_operator:null,set_operator:null,createEditor:null,getCriteria:null,getOperators:null,loadState:null,saveState:null});ss.initInterface(kt,e,{initQuickFilter:null});ss.initClass(r,e,{get_field:function(){return this.$1$FieldField},set_field:function(e){this.$1$FieldField=e},get_container:function(){return this.$1$ContainerField},set_container:function(e){this.$1$ContainerField=e},get_operator:function(){return this.$1$OperatorField},set_operator:function(e){this.$1$OperatorField=e},getOperators:null,appendNullableOperators:function(e){if(!this.isNullable()){return e}e.push({key:X.isNotNull});e.push({key:X.isNull});return e},appendComparisonOperators:function(e){e.push({key:X.EQ});e.push({key:X.NE});e.push({key:X.LT});e.push({key:X.LE});e.push({key:X.GT});e.push({key:X.GE});return e},isNullable:function(){return this.get_field().required!==true},createEditor:function(){switch(this.get_operator().key){case"true":case"false":case"isnull":case"isnotnull":{return}case"contains":case"startswith":case"eq":case"ne":case"lt":case"le":case"gt":case"ge":{this.get_container().html('<input type="text"/>');return}}throw new ss.Exception(ss.formatString("Filtering '{0}' has no editor for '{1}' operator",ss.getTypeName(ss.getInstanceType(this)),this.get_operator().key))},operatorFormat:function(e){var t=e.format;if(ss.isNullOrUndefined(t)){var i=Q.tryGetText("Controls.FilterPanel.OperatorFormats."+e.key);if(ss.isNullOrUndefined(i)){i=e.key}t=i}return t},getTitle:function(e){var t=Q.tryGetText(e.title);if(ss.isNullOrUndefined(t)){var i=e.title;if(ss.isNullOrUndefined(i)){i=e.name}t=i}return t},displayText:function(e,t){if(t.length===0){return ss.formatString(this.operatorFormat(e),this.getTitle(this.get_field()))}else if(t.length===1){return ss.formatString(this.operatorFormat(e),this.getTitle(this.get_field()),t[0])}else{return ss.formatString(this.operatorFormat(e),this.getTitle(this.get_field()),t[0],t[1])}},getCriteriaField:function(){return this.get_field().name},getCriteria:function(e){var t;switch(this.get_operator().key){case"true":{e.$=this.displayText(this.get_operator(),[]);return[[this.getCriteriaField()],"=",true]}case"false":{e.$=this.displayText(this.get_operator(),[]);return[[this.getCriteriaField()],"=",false]}case"isnull":{e.$=this.displayText(this.get_operator(),[]);return["is null",[this.getCriteriaField()]]}case"isnotnull":{e.$=this.displayText(this.get_operator(),[]);return["is not null",[this.getCriteriaField()]]}case"contains":{t=this.getEditorText();e.$=this.displayText(this.get_operator(),[t]);return[[this.getCriteriaField()],"like","%"+t+"%"]}case"startswith":{t=this.getEditorText();e.$=this.displayText(this.get_operator(),[t]);return[[this.getCriteriaField()],"like",t+"%"]}case"eq":case"ne":case"lt":case"le":case"gt":case"ge":{t=this.getEditorText();e.$=this.displayText(this.get_operator(),[t]);return[[this.getCriteriaField()],X.toCriteriaOperator[this.get_operator().key],this.getEditorValue()]}}throw new ss.Exception(ss.formatString("Filtering '{0}' has no handler for '{1}' operator",ss.getTypeName(ss.getInstanceType(this)),this.get_operator().key))},loadState:function(e){var t=this.get_container().find(":input").first();t.val(ss.safeCast(e,String))},saveState:function(){switch(this.get_operator().key){case"contains":case"startswith":case"eq":case"ne":case"lt":case"le":case"gt":case"ge":{var e=this.get_container().find(":input").first();return e.val()}}return null},argumentNull:function(){return new ss.ArgumentNullException("value",Q.text("Controls.FilterPanel.ValueRequired"))},validateEditorValue:function(e){if(e.length===0){throw this.argumentNull()}return e},getEditorValue:function(){var e=this.get_container().find(":input").not(".select2-focusser").first();if(e.length!==1){var t=this.get_field().title;if(ss.isNullOrUndefined(t)){t=this.get_field().name}throw new ss.Exception(ss.formatString("Couldn't find input in filter container for {0}",t))}var i;if(ss.isValue(e.data("select2"))){i=ss.safeCast(e.select2("val"),String)}else{i=e.val()}i=ss.coalesce(i,"").trim();return this.validateEditorValue(i)},getEditorText:function(){var e=this.get_container().find(":input").not(".select2-focusser").not(".select2-input").first();if(e.length===0){return this.get_container().text().trim()}var t;if(ss.isValue(e.data("select2"))){var i=e.select2("data");if(ss.isNullOrUndefined(i)){i=new Object}t=ss.cast(i.text,String)}else{t=e.val()}return t},initQuickFilter:function(e){e.field=this.getCriteriaField();e.type=Serenity.StringEditor;e.title=this.getTitle(this.get_field());e.options=Q.deepClone({},this.get_field().quickFilterParams)}},null,[St,kt]);ss.initClass(a,e,{getOperators:function(){var e=[];e.push({key:X.isTrue});e.push({key:X.isFalse});return this.appendNullableOperators(e)}},r,[St,kt]);ss.initInterface(It,e,{format:null});ss.initClass(l,e,{format:function(e){if(!ss.isValue(e.value)){return""}if(!!e.value){var t=Q.tryGetText(this.get_trueText());if(ss.isNullOrUndefined(t)){var i=this.get_trueText();if(ss.isNullOrUndefined(i)){i=ss.coalesce(Q.tryGetText("Dialogs.YesButton"),"Yes")}t=i}return Q.htmlEncode(t)}var s=Q.tryGetText(this.get_falseText());if(ss.isNullOrUndefined(s)){var n=this.get_falseText();if(ss.isNullOrUndefined(n)){n=ss.coalesce(Q.tryGetText("Dialogs.NoButton"),"No")}s=n}return Q.htmlEncode(s)},get_falseText:function(){return this.$1$FalseTextField},set_falseText:function(e){this.$1$FalseTextField=e},get_trueText:function(){return this.$1$TrueTextField},set_trueText:function(e){this.$1$TrueTextField=e}},null,[It]);ss.initClass(u,e,{});ss.initClass(d,e,{format:function(e){return'<span class="check-box no-float readonly '+(!!e.value?" checked":"")+'"></span>'}},null,[It]);ss.initInterface(gt,e,{getElement:null,getGrid:null,getView:null,getFilterStore:null});ss.initClass(p,e,{add_submitHandlers:function(e){this.$4$submitHandlersField=ss.delegateCombine(this.$4$submitHandlersField,e)},remove_submitHandlers:function(e){this.$4$submitHandlersField=ss.delegateRemove(this.$4$submitHandlersField,e)},layout:function(){if(!this.element.is(":visible")){return}if(ss.isNullOrUndefined(this.slickContainer)){return}Q.layoutFillHeight(this.slickContainer);if(this.element.hasClass("responsive-height")){if(ss.isValue(this.slickGrid)&&this.slickGrid.getOptions().autoHeight){this.slickContainer.children(".slick-viewport").css("height","auto");this.slickGrid.setOptions({autoHeight:false})}if(ss.isValue(this.slickGrid)&&(this.slickContainer.height()<200||$(window.window).width()<768)){this.element.css("height","auto");this.slickContainer.css("height","auto").children(".slick-viewport").css("height","auto");this.slickGrid.setOptions({autoHeight:true})}}if(ss.isValue(this.slickGrid)){this.slickGrid.resizeCanvas();this.slickGrid.invalidate()}},getInitialTitle:function(){return null},createToolbarExtensions:function(){},createQuickFilters:function(){var e=this.getQuickFilters();for(var t=0;t<e.length;t++){var i=e[t];this.addQuickFilter(i)}},getQuickFilters:function(){var e=[];var t=this.allColumns.filter(function(e){return ss.isValue(e.sourceItem)&&e.sourceItem.quickFilter===true});for(var i=0;i<t.length;i++){var s=t[i];var n=s.sourceItem;var r={};var l=J.get(ss.coalesce(n.filteringType,"String"));if(ss.referenceEquals(l,g)){var o=n.name;var u=Q.tryGetText(n.title);if(ss.isNullOrUndefined(u)){var d=n.title;if(ss.isNullOrUndefined(d)){d=n.name}u=d}r=this.dateRangeQuickFilter(o,u)}else if(ss.referenceEquals(l,S)){var c=n.name;var f=Q.tryGetText(n.title);if(ss.isNullOrUndefined(f)){var h=n.title;if(ss.isNullOrUndefined(h)){h=n.name}f=h}r=this.dateTimeRangeQuickFilter(c,f)}else if(ss.referenceEquals(l,a)){var p=n.quickFilterParams||{};var m=n.filteringParams||{};var y=n.name;var v=Q.tryGetText(n.title);if(ss.isNullOrUndefined(v)){var C=n.title;if(ss.isNullOrUndefined(C)){C=n.name}v=C}var b=p["trueText"];if(ss.isNullOrUndefined(b)){b=m["trueText"]}var $=p["falseText"];if(ss.isNullOrUndefined($)){$=m["falseText"]}r=this.booleanQuickFilter(y,v,b,$)}else{var T=ss.cast(ss.createInstance(l),St);if(ss.isValue(T)&&ss.isInstanceOfType(T,kt)){oi.set(T,n.filteringParams);T.set_field(n);T.set_operator({key:X.EQ});ss.cast(T,kt).initQuickFilter(r);r.options=Q.deepClone(r.options,n.quickFilterParams)}else{continue}}if(n.quickFilterSeparator===true){r.seperator=true}r.cssClass=n.quickFilterCssClass;e.push(r)}return e},findQuickFilter:function(e,t){return Serenity.WX.getWidget(e)($("#"+this.uniqueName+"_QuickFilter_"+t))},createIncludeDeletedButton:function(){if(!Q.isEmptyOrNull(this.getIsActiveProperty())){ot.addIncludeDeletedToggle(this.toolbar.element,this.view,null,false)}},getQuickSearchFields:function(){return null},createQuickSearchInput:function(){ot.addQuickSearchInput(this.toolbar.element,this.view,this.getQuickSearchFields())},destroy:function(){this.$4$submitHandlersField=null;if(ss.isValue(this.toolbar)){this.toolbar.destroy();this.toolbar=null}if(ss.isValue(this.slickGrid)){this.slickGrid.onClick.clear();this.slickGrid.onSort.clear();this.slickGrid.onColumnsResized.clear();this.slickGrid.onColumnsReordered.clear();this.slickGrid.destroy();this.slickGrid=null}if(ss.isValue(this.view)){this.view.onDataChanged.clear();this.view.onSubmit=null;this.view.setFilter(null);this.view=null}this.titleDiv=null;Serenity.Widget.prototype.destroy.call(this)},getItemCssClass:function(e,t){var i=this.getIsActiveProperty();if(Q.isEmptyOrNull(i)){return null}var s=e[i];if(ss.isNullOrUndefined(s)){return null}if(typeof s==="number"){if(s<0){return"deleted"}else if(s===0){return"inactive"}}else if(typeof s==="boolean"){if(s===false){return"deleted"}}return null},getItemMetadata:function(e,t){var i=this.getItemCssClass(e,t);if(Q.isEmptyOrNull(i)){return new Object}return{cssClasses:i}},postProcessColumns:function(e){gi.setDefaults(e,this.getLocalTextDbPrefix());return e},initialPopulate:function(){var e=this;if(this.populateWhenVisible()){Serenity.LazyLoadHelper.executeEverytimeWhenShown(this.element,function(){e.$refreshIfNeeded()},false);if(this.element.is(":visible")&&ss.isValue(this.view)){this.view.populate()}}else if(ss.isValue(this.view)){this.view.populate()}},initializeAsync:function(){return Serenity.Widget.prototype.initializeAsync.call(this).then(ss.mkdel(this,this.getColumnsAsync),null).then(ss.mkdel(this,function(e){this.allColumns=e;this.postProcessColumns(this.allColumns);var t=this;if(ss.isValue(this.filterBar)){this.filterBar.set_store(new et(this.allColumns.filter(function(e){return ss.isValue(e.sourceItem)&&e.sourceItem.notFilterable!==true}).map(function(e){return e.sourceItem})));this.filterBar.get_store().add_changed(ss.mkdel(this,function(e,i){if(this.restoringSettings<=0){t.persistSettings(null);t.refresh()}}))}var i=this.allColumns.filter(function(e){return e.visible!==false});if(ss.isValue(this.slickGrid)){this.slickGrid.setColumns(i)}this.setInitialSortOrder();this.initialSettings=this.getCurrentSettings(null);this.restoreSettings(null,null);this.initialPopulate()}),null)},createSlickGrid:function(){var e;if(this.isAsyncWidget()){e=[]}else{this.allColumns=this.getColumns();e=this.postProcessColumns(this.allColumns).filter(function(e){return e.visible!==false})}var t=this.getSlickOptions();var i=new Slick.Grid(this.slickContainer,this.view,e,t);i.registerPlugin(new Slick.AutoTooltips({enableForHeaderCells:true}));this.slickGrid=i;this.rows=this.slickGrid;if(!this.isAsyncWidget()){this.setInitialSortOrder()}return i},setInitialSortOrder:function(){var e=this.getDefaultSortBy();if(ss.isValue(this.view)){this.view.sortBy=Array.prototype.slice.call(e)}var t=e.map(function(e){var t={};if(ss.isValue(e)&&ss.endsWithString(e.toLowerCase()," desc")){t.columnId=ss.trimEndString(e.substr(0,e.length-5));t.sortAsc=false}else{t.columnId=e;t.sortAsc=true}return t});this.slickGrid.setSortColumns(t)},itemAt:function(e){return this.slickGrid.getDataItem(e)},rowCount:function(){return this.slickGrid.getDataLength()},getItems:function(){return this.view.getItems()},setItems:function(e){this.view.setItems(e,true)},bindToSlickEvents:function(){var e=this;this.$slickGridOnSort=ss.mkdel(this,function(t,i){e.view.populateLock();try{var s=[];if(!!i.multiColumnSort){for(var n=0;!!(n<i.sortCols.length);n++){var r=i.sortCols[n];var a=r.sortCol;if(ss.isNullOrUndefined(a)){a={}}var l=a;s.push(ss.cast(l.field+(!!r.sortAsc?"":" DESC"),String))}}else{var o=i.sortCol;if(ss.isNullOrUndefined(o)){o={}}var u=o;s.push(ss.cast(u.field+(!!i.sortAsc?"":" DESC"),String))}e.view.sortBy=s}finally{e.view.populateUnlock()}e.view.populate();this.persistSettings(null)});this.slickGrid.onSort.subscribe(this.$slickGridOnSort);this.$slickGridOnClick=function(t,i){e.onClick(t,ss.unbox(ss.cast(i.row,ss.Int32)),ss.unbox(ss.cast(i.cell,ss.Int32)))};this.slickGrid.onClick.subscribe(this.$slickGridOnClick);this.slickGrid.onColumnsReordered.subscribe(ss.mkdel(this,function(e,t){return this.persistSettings(null)}));this.slickGrid.onColumnsResized.subscribe(ss.mkdel(this,function(e,t){return this.persistSettings(null)}))},getAddButtonCaption:function(){return"New"},getButtons:function(){return[]},editItem:function(e){throw new ss.NotImplementedException},editItemOfType:function(e,t){if(ss.referenceEquals(e,this.getItemType())){this.editItem(t);return}throw new ss.NotImplementedException},onClick:function(e,t,i){if(e.isDefaultPrevented()){return}var s=$(e.target);if(!s.hasClass("s-EditLink")){s=s.closest("a")}if(s.hasClass("s-EditLink")){e.preventDefault();this.editItemOfType(mi.getItemType(s),mi.getItemId(s))}},$viewDataChanged:function(e,t){this.markupReady()},bindToViewEvents:function(){var e=this;this.view.onDataChanged.subscribe(function(t,i){return e.$viewDataChanged(t,i)});this.view.onSubmit=function(t){return e.onViewSubmit()};this.view.setFilter(function(t,i){return e.onViewFilter(t)});this.view.onProcessData=function(t,i){return e.onViewProcessData(t)}},onViewProcessData:function(e){return e},onViewFilter:function(e){return true},getIncludeColumns:function(e){var t=this.slickGrid.getColumns();for(var i=0;i<t.length;i++){var s=t[i];if(ss.isValue(s.field)){e[s.field]=true}if(ss.isValue(s.referencedFields)){for(var n=0;n<s.referencedFields.length;n++){var r=s.referencedFields[n];e[r]=true}}}},setCriteriaParameter:function(){delete this.view.params["Criteria"];if(ss.isValue(this.filterBar)){var e=this.filterBar.get_store().get_activeCriteria();if(!Serenity.Criteria.isEmpty(e)){this.view.params.Criteria=e}}},setEquality:function(e,t){Q.setEquality(this.view.params,e,t)},setIncludeColumnsParameter:function(){var e={};this.getIncludeColumns(e);var t=null;if(ss.getKeyCount(e)>0){t=[];var i=ss.getEnumerator(Object.keys(e));try{while(i.moveNext()){var s=i.current();t.push(s)}}finally{i.dispose()}}this.view.params.IncludeColumns=t},onViewSubmit:function(){if(this.isDisabled||!this.getGridCanLoad()){return false}this.setCriteriaParameter();this.setIncludeColumnsParameter();this.invokeSubmitHandlers();return true},markupReady:function(){},createSlickContainer:function(){return $('<div class="grid-container"></div>').appendTo(this.element)},createView:function(){var e=this.getViewOptions();return new Slick.RemoteView(e)},getDefaultSortBy:function(){if(ss.isValue(this.slickGrid)&&this.slickGrid.getColumns().length>0){var e=this.slickGrid.getColumns().filter(function(e){return ss.isValue(e.sortOrder)&&e.sortOrder!==0});if(e.length>0){e.sort(function(e,t){return ss.compare(Math.abs(e.sortOrder),Math.abs(t.sortOrder))});var t=[];for(var i=0;i<e.length;i++){var s=e[i];t.push(s.field+(s.sortOrder<0?" DESC":""))}return t}}return[]},usePager:function(){return false},enableFiltering:function(){var e=ss.getAttributes(ss.getInstanceType(this),j,true);return e.length>0&&e[0].value},populateWhenVisible:function(){return false},createFilterBar:function(){var e=$("<div/>").appendTo(this.element);var t=this;this.filterBar=new Y(e);if(!this.isAsyncWidget()){this.filterBar.set_store(new et(this.allColumns.filter(function(e){return ss.isValue(e.sourceItem)&&e.sourceItem.notFilterable!==true}).map(function(e){return e.sourceItem})));this.filterBar.get_store().add_changed(ss.mkdel(this,function(e,i){if(this.restoringSettings<=0){t.persistSettings(null);t.refresh()}}))}},createPager:function(){var e=$("<div></div>").appendTo(this.element);e.slickPager({view:this.view,rowsPerPage:20,rowsPerPageOptions:[20,100,500,2500]})},getViewOptions:function(){var e={};e.idField=this.getIdProperty();e.sortBy=this.getDefaultSortBy();if(!this.usePager()){e.rowsPerPage=0}else if(this.element.hasClass("responsive-height")){e.rowsPerPage=$(window.window).width()<768?20:100}else{e.rowsPerPage=100}e.getItemMetadata=ss.mkdel(this,function(e,t){return this.getItemMetadata(e,t)});return e},createToolbar:function(e){var t=$('<div class="grid-toolbar"></div>').appendTo(this.element);this.toolbar=new bi(t,{buttons:e,hotkeyContext:this.element[0]})},getTitle:function(){if(ss.isNullOrUndefined(this.titleDiv)){return null}return this.titleDiv.children().text()},setTitle:function(e){if(!ss.referenceEquals(e,this.getTitle())){if(ss.isNullOrUndefined(e)){if(ss.isValue(this.titleDiv)){this.titleDiv.remove();this.titleDiv=null}}else{if(ss.isNullOrUndefined(this.titleDiv)){this.titleDiv=$('<div class="grid-title"><div class="title-text"></div></div>').prependTo(this.element)}this.titleDiv.children().text(e)}this.layout()}},getItemType:function(){return"Item"},itemLink:function(e,t,i,s,n){var r=e;if(ss.isNullOrUndefined(r)){r=this.getItemType()}e=r;var a=t;if(ss.isNullOrUndefined(a)){a=this.getIdProperty()}t=a;return mi.itemLink(e,t,i,s,n)},getColumnsKey:function(){var e=ss.getAttributes(ss.getInstanceType(this),Serenity.ColumnsKeyAttribute,true);if(ss.isValue(e)&&e.length>0){return e[0].value}return null},getPropertyItemsAsync:function(){return Promise.resolve().then(ss.mkdel(this,function(){var e=this.getColumnsKey();if(!ss.isNullOrEmptyString(e)){return Q.getColumnsAsync(e)}return Promise["Promise.resolve({value})"]([])}),null)},getPropertyItems:function(){var e=ss.getAttributes(ss.getInstanceType(this),Serenity.ColumnsKeyAttribute,true);var t=this.getColumnsKey();if(!ss.isNullOrEmptyString(t)){return Q.getColumns(t)}return[]},getColumns:function(){var e=this.getPropertyItems();return this.propertyItemsToSlickColumns(e)},propertyItemsToSlickColumns:function(e){var t=Zt.toSlickColumns(e);for(var i=0;i<e.length;i++){var s=e[i];var n=t[i];if(s.editLink===true){var r={$:n.format};var a={$:ss.isValue(s.editLinkCssClass)?s.editLinkCssClass:null};n.format=this.itemLink(ss.isValue(s.editLinkItemType)?s.editLinkItemType:null,ss.isValue(s.editLinkIdField)?s.editLinkIdField:null,ss.mkdel({oldFormat:r},function(e){if(!ss.staticEquals(this.oldFormat.$,null)){return this.oldFormat.$(e)}return Q.htmlEncode(e.value)}),ss.mkdel({css:a},function(e){return ss.coalesce(this.css.$,"")}),false);if(!ss.isNullOrEmptyString(s.editLinkIdField)){n.referencedFields=n.referencedFields||[];n.referencedFields.push(s.editLinkIdField)}}}return t},getColumnsAsync:function(){return this.getPropertyItemsAsync().then(ss.mkdel(this,function(e){return this.propertyItemsToSlickColumns(e)}),null)},getSlickOptions:function(){var e={};e.multiSelect=false;e.multiColumnSort=true;e.enableCellNavigation=false;e.headerRowHeight=p.defaultHeaderHeight;e.rowHeight=p.defaultRowHeight;return e},populateLock:function(){this.view.populateLock()},populateUnlock:function(){this.view.populateUnlock()},getGridCanLoad:function(){return true},refresh:function(){if(!this.populateWhenVisible()){this.internalRefresh();return}if(this.slickContainer.is(":visible")){this.slickContainer.data("needsRefresh",false);this.internalRefresh();return}this.slickContainer.data("needsRefresh",true)},$refreshIfNeeded:function(){if(!!this.slickContainer.data("needsRefresh")){this.slickContainer.data("needsRefresh",false);this.internalRefresh()}},internalRefresh:function(){this.view.populate()},setIsDisabled:function(e){if(this.$isDisabled!==e){this.$isDisabled=e;if(this.$isDisabled){this.view.setItems([],true)}this.updateDisabledState()}},getLocalTextDbPrefix:function(){if(ss.isNullOrUndefined(this.$localTextDbPrefix)){this.$localTextDbPrefix=ss.coalesce(this.getLocalTextPrefix(),"");if(this.$localTextDbPrefix.length>0&&!ss.endsWithString(this.$localTextDbPrefix,".")){this.$localTextDbPrefix="Db."+this.$localTextDbPrefix+"."}}return this.$localTextDbPrefix},getLocalTextPrefix:function(){var e=ss.getAttributes(ss.getInstanceType(this),Serenity.LocalTextPrefixAttribute,true);if(e.length>=1){return e[0].value}else{return""}},getIdProperty:function(){if(ss.isNullOrUndefined(this.$idProperty)){var e=ss.getAttributes(ss.getInstanceType(this),Serenity.IdPropertyAttribute,true);if(e.length===1){this.$idProperty=e[0].value}else{this.$idProperty="ID"}}return this.$idProperty},getIsActiveProperty:function(){if(ss.isNullOrUndefined(this.$isActiveProperty)){var e=ss.getAttributes(ss.getInstanceType(this),Serenity.IsActivePropertyAttribute,true);if(e.length===1){this.$isActiveProperty=e[0].value}else{this.$isActiveProperty=""}}return this.$isActiveProperty},updateDisabledState:function(){this.slickContainer.toggleClass("ui-state-disabled",!!this.isDisabled)},resizeCanvas:function(){this.slickGrid.resizeCanvas()},subDialogDataChange:function(){this.refresh()},addFilterSeparator:function(){if(ss.isValue(this.quickFiltersDiv)){this.quickFiltersDiv.append($("<hr/>"))}},determineText:function(e){var t=this.getLocalTextDbPrefix();if(!Q.isEmptyOrNull(t)){var i=Q.tryGetText(e(t));if(ss.isValue(i)){return i}}return null},addQuickFilter:function(e){if(ss.isNullOrUndefined(e)){throw new ss.ArgumentNullException("opt")}if(ss.isNullOrUndefined(this.quickFiltersDiv)){$("<div/>").addClass("clear").appendTo(this.toolbar.element);this.quickFiltersDiv=$("<div/>").addClass("quick-filters-bar").appendTo(this.toolbar.element)}if(e.seperator){this.addFilterSeparator()}var t=$("<div class='quick-filter-item'><span class='quick-filter-label'></span></div>").appendTo(this.quickFiltersDiv).data("qffield",e.field).children();var i=e.title;if(ss.isNullOrUndefined(i)){var s=this.determineText(function(t){return t+e.field});if(ss.isNullOrUndefined(s)){s=e.field}i=s}var n=t.text(i).parent();if(!ss.staticEquals(e.displayText,null)){n.data("qfdisplaytext",e.displayText)}if(!ss.staticEquals(e.saveState,null)){n.data("qfsavestate",e.saveState)}if(!ss.staticEquals(e.loadState,null)){n.data("qfloadstate",e.loadState)}if(!ss.isNullOrEmptyString(e.cssClass)){n.addClass(e.cssClass)}var r=Serenity.Widget.create({type:e.type,element:ss.mkdel(this,function(t){if(!Q.isEmptyOrNull(e.field)){t.attr("id",this.uniqueName+"_QuickFilter_"+e.field)}t.attr("placeholder"," ");t.appendTo(n);if(!ss.staticEquals(e.element,null)){e.element(t)}}),options:e.options,init:e.init});var a=ss.mkdel(this,function(){if(n.hasClass("ignore")){return}var t=this.view.params;t.EqualityFilter=t.EqualityFilter||{};var i=P.getValue(r);var s=ss.isValue(i)&&!ss.isNullOrEmptyString(i.toString());if(!ss.staticEquals(e.handler,null)){var a={field:e.field,request:t,equalityFilter:t.EqualityFilter,value:i,active:s,widget:r,handled:true};e.handler(a);n.toggleClass("quick-filter-active",a.active);if(!a.handled){t.EqualityFilter[e.field]=i}}else{t.EqualityFilter[e.field]=i;
n.toggleClass("quick-filter-active",s)}});Ei.changeSelect2(r,ss.mkdel(this,function(e){this.quickFilterChange(e)}));this.add_submitHandlers(a);r.element.bind("remove."+this.uniqueName,ss.mkdel(this,function(e){this.remove_submitHandlers(a)}));return r},addDateRangeFilter:function(e,t){return ss.cast(this.addQuickFilter(this.dateRangeQuickFilter(e,t)),m)},dateRangeQuickFilter:function(e,t){var i=null;return{field:e,type:m,title:t,element:function(e){i=Serenity.Widget.create({type:m,element:function(t){t.insertAfter(e)},options:null,init:null});i.element.change(function(t){e.triggerHandler("change")});$("<span/>").addClass("range-separator").text("-").insertAfter(e)},handler:function(e){var t=!Q.isTrimmedEmpty(e.widget.get_value());var s=!Q.isTrimmedEmpty(i.get_value());if(t&&!Q.parseDate(e.widget.element.val())){t=false;Q.notifyWarning(Q.text("Validation.DateInvalid"),"",null);e.widget.element.val("")}if(s&&!Q.parseDate(i.element.val())){s=false;Q.notifyWarning(Q.text("Validation.DateInvalid"),"",null);i.element.val("")}e.active=t||s;if(t){e.request.Criteria=Serenity.Criteria.join(e.request.Criteria,"and",[[e.field],">=",e.widget.get_value()])}if(s){var n=new Date(i.get_valueAsDate().valueOf());n.setDate(n.getDate()+1);e.request.Criteria=Serenity.Criteria.join(e.request.Criteria,"and",[[e.field],"<",Q.formatDate(n,"yyyy-MM-dd")])}},displayText:function(e,t){var s=P.getDisplayText(e);var n=P.getDisplayText(i);if(ss.isNullOrEmptyString(s)&&ss.isNullOrEmptyString(n)){return null}var r=t+" >= "+s;var a=t+" <= "+n;if(!ss.isNullOrEmptyString(s)&&!ss.isNullOrEmptyString(n)){return r+" "+ss.coalesce(Q.tryGetText("Controls.FilterPanel.And"),"and")+" "+a}else if(!ss.isNullOrEmptyString(s)){return r}else{return a}},saveState:function(e){return[P.getValue(e),P.getValue(i)]},loadState:function(e,t){if(ss.isNullOrUndefined(t)||!ss.isArray(t)||t.length!==2){t=[null,null]}P.setValue(e,t[0]);P.setValue(i,t[1])}}},addDateTimeRangeFilter:function(e,t){return ss.cast(this.addQuickFilter(this.dateTimeRangeQuickFilter(e,t)),v)},dateTimeRangeQuickFilter:function(e,t){var i=null;return{field:e,type:v,title:t,element:function(e){i=Serenity.Widget.create({type:v,element:function(t){t.insertAfter(e)},options:null,init:null});i.element.change(function(t){e.triggerHandler("change")});$("<span/>").addClass("range-separator").text("-").insertAfter(e)},init:function(e){e.element.parent().find(".time").change(function(t){e.element.triggerHandler("change")})},handler:function(e){var t=!Q.isTrimmedEmpty(e.widget.get_value());var s=!Q.isTrimmedEmpty(i.get_value());if(t&&!Q.parseDate(e.widget.element.val())){t=false;Q.notifyWarning(Q.text("Validation.DateInvalid"),"",null);e.widget.element.val("")}if(s&&!Q.parseDate(i.element.val())){s=false;Q.notifyWarning(Q.text("Validation.DateInvalid"),"",null);i.element.val("")}e.active=t||s;if(t){e.request.Criteria=Serenity.Criteria.join(e.request.Criteria,"and",[[e.field],">=",e.widget.get_value()])}if(s){e.request.Criteria=Serenity.Criteria.join(e.request.Criteria,"and",[[e.field],"<=",i.get_value()])}},displayText:function(e,t){var s=P.getDisplayText(e);var n=P.getDisplayText(i);if(ss.isNullOrEmptyString(s)&&ss.isNullOrEmptyString(n)){return null}var r=t+" >= "+s;var a=t+" <= "+n;if(!ss.isNullOrEmptyString(s)&&!ss.isNullOrEmptyString(n)){return r+" "+ss.coalesce(Q.tryGetText("Controls.FilterPanel.And"),"and")+" "+a}else if(!ss.isNullOrEmptyString(s)){return r}else{return a}},saveState:function(e){return[P.getValue(e),P.getValue(i)]},loadState:function(e,t){if(ss.isNullOrUndefined(t)||!ss.isArray(t)||t.length!==2){t=[null,null]}P.setValue(e,t[0]);P.setValue(i,t[1])}}},addBooleanFilter:function(e,t,i,s){return ss.cast(this.addQuickFilter(this.booleanQuickFilter(e,t,i,s)),hi)},booleanQuickFilter:function(e,t,i,s){var n=pi.$ctor();var r=[];var a=i;if(ss.isNullOrUndefined(a)){a=Q.text("Controls.FilterPanel.OperatorNames.true")}r.push(["1",a]);var l=s;if(ss.isNullOrUndefined(l)){l=Q.text("Controls.FilterPanel.OperatorNames.false")}r.push(["0",l]);n.items=r;return{field:e,type:hi,title:t,options:n,handler:function(e){e.equalityFilter[e.field]=ss.isNullOrEmptyString(ss.safeCast(e.value,String))?null:!!Q.toId(e.value)}}},invokeSubmitHandlers:function(){if(!ss.staticEquals(this.$4$submitHandlersField,null)){this.$4$submitHandlersField()}},quickFilterChange:function(e){this.persistSettings(null);this.refresh()},getPersistanceStorage:function(){return p.defaultPersistanceStorage},getPersistanceKey:function(){var e="GridSettings:";var t=window.location.pathname;if(!ss.isNullOrEmptyString(t)){e+=t.substr(1).split(String.fromCharCode(47)).slice(0,2).join("/")+":"}e+=ss.getTypeFullName(ss.getInstanceType(this));return e},gridPersistanceFlags:function(){return{}},$canShowColumn:function(e){if(ss.isNullOrUndefined(e)){return false}var t=e.sourceItem;if(ss.isNullOrUndefined(t)){return true}if(t.filterOnly===true){return false}if(ss.isNullOrUndefined(t.readPermission)){return true}return Q.Authorization.hasPermission(t.readPermission)},restoreSettings:function(e,t){if(ss.isNullOrUndefined(e)){var i=this.getPersistanceStorage();if(ss.isNullOrUndefined(i)){return}var s=Q.trimToNull(i.getItem(this.getPersistanceKey()));if(ss.isValue(s)&&ss.startsWithString(s,"{")&&ss.endsWithString(s,"}")){e=JSON.parse(s)}else{return}}if(ss.isNullOrUndefined(this.slickGrid)){return}var n=this.slickGrid.getColumns();var r=null;var a=function(e){r={};for(var t=0;t<e.length;t++){var i=e[t];r[i.id]=i}};this.view.beginUpdate();this.restoringSettings++;try{t=t||this.gridPersistanceFlags();if(ss.isValue(e.columns)){if(t.columnVisibility!==false){var l={};a(this.allColumns);var o=[];for(var u=0;u<e.columns.length;u++){var d=e.columns[u];if(ss.isValue(d.id)&&d.visible===true){var c=r[d.id];if(this.$canShowColumn(c)){c.visible=true;o.push(c);delete r[d.id]}}}for(var f=0;f<this.allColumns.length;f++){var h=this.allColumns[f];if(ss.keyExists(r,h.id)){h.visible=false;o.push(h)}}this.allColumns=o;n=this.allColumns.filter(function(e){return e.visible===true})}if(t.columnWidths!==false){a(n);for(var p=0;p<e.columns.length;p++){var m=e.columns[p];if(ss.isValue(m.id)&&ss.isValue(m.width)&&m.width!==0){var g=r[m.id];if(ss.isValue(g)){g.width=ss.unbox(m.width)}}}}if(t.sortColumns!==false){a(n);var y=[];var v=e.columns.filter(function(e){return ss.isValue(e.id)&&ss.coalesce(e.sort,0)!==0});v.sort(function(e,t){return ss.unbox(e.sort)-ss.unbox(t.sort)});for(var S=0;S<v.length;S++){var C=v[S];var b=r[C.id];if(ss.isValue(b)){y.push({columnId:C.id,sortAsc:ss.Nullable$1.gt(C.sort,0)})}}this.view.sortBy=y.map(function(e){return e.columnId+(e.sortAsc===false?" DESC":"")});this.slickGrid.setSortColumns(y)}this.slickGrid.setColumns(n);this.slickGrid.invalidate()}if(ss.isValue(e.filterItems)&&t.filterItems!==false&&ss.isValue(this.filterBar)&&ss.isValue(this.filterBar.get_store())){ss.clear(this.filterBar.get_store().get_items());ss.arrayAddRange(this.filterBar.get_store().get_items(),e.filterItems);this.filterBar.get_store().raiseChanged()}if(ss.isValue(e.includeDeleted)&&t.includeDeleted!==false){var T=this.element.find(".s-IncludeDeletedToggle");if(!!e.includeDeleted!==T.hasClass("pressed")){T.children("a").click()}}if(ss.isValue(e.quickFilters)&&t.quickFilters!==false&&ss.isValue(this.quickFiltersDiv)&&this.quickFiltersDiv.length>0){this.quickFiltersDiv.find(".quick-filter-item").each(ss.mkdel(this,function(t,i){var s=ss.safeCast($(i).data("qffield"),String);if(ss.isNullOrEmptyString(s)){return}var n=$("#"+this.uniqueName+"_QuickFilter_"+s).tryGetWidget(Object);if(ss.isNullOrUndefined(n)){return}var r=e.quickFilters[s];var a=ss.safeCast($(i).data("qfloadstate"),Function);if(!ss.staticEquals(a,null)){a(n,r)}else{P.setValue(n,r)}}))}if(t.quickSearch===true&&(ss.isValue(e.quickSearchField)||ss.isValue(e.quickSearchText))){var _=this.toolbar.element.find(".s-QuickSearchInput").first();if(_.length>0){var O=_.tryGetWidget(ii);if(ss.isValue(O)){this.view.populateLock();try{O.element.addClass("ignore-change");try{if(ss.isValue(e.quickSearchField)){O.set_field(e.quickSearchField)}if(ss.isValue(e.quickSearchText)&&!ss.referenceEquals(Q.trimToNull(e.quickSearchText),Q.trimToNull(O.element.val()))){O.element.val(e.quickSearchText)}}finally{O.element.removeClass("ignore-change");O.element.triggerHandler("execute-search")}}finally{this.view.populateUnlock()}}}}}finally{this.restoringSettings--;this.view.endUpdate()}},persistSettings:function(e){var t=this.getPersistanceStorage();if(ss.isNullOrUndefined(t)){return}var i=this.getCurrentSettings(e);t.setItem(this.getPersistanceKey(),$.toJSON(i))},getCurrentSettings:function(e){e=e||this.gridPersistanceFlags();var t={};if(e.columnVisibility!==false||e.columnWidths!==false||e.sortColumns!==false){t.columns=[];var i=this.slickGrid.getSortColumns();var s=this.slickGrid.getColumns();for(var n=0;n<s.length;n++){var r={$:s[n]};var a={};a.id=r.$.id;if(e.columnVisibility!==false){a.visible=true}if(e.columnWidths!==false){a.width=r.$.width}if(e.sortColumns!==false){var l=Q.indexOf(i,ss.mkdel({column:r},function(e){return ss.referenceEquals(e.columnId,this.column.$.id)}));a.sort=l>=0?i[l].sortAsc!==false?l+1:-l-1:0}t.columns.push(a)}}if(e.includeDeleted!==false){t.includeDeleted=this.element.find(".s-IncludeDeletedToggle").hasClass("pressed")}if(e.filterItems!==false&&ss.isValue(this.filterBar)&&ss.isValue(this.filterBar.get_store())){t.filterItems=ss.arrayClone(this.filterBar.get_store().get_items())}if(e.quickSearch===true){var o=this.toolbar.element.find(".s-QuickSearchInput").first();if(o.length>0){var u=o.tryGetWidget(ii);if(ss.isValue(u)){t.quickSearchField=u.get_field();t.quickSearchText=u.element.val()}}}if(e.quickFilters!==false&&ss.isValue(this.quickFiltersDiv)&&this.quickFiltersDiv.length>0){t.quickFilters={};this.quickFiltersDiv.find(".quick-filter-item").each(ss.mkdel(this,function(i,s){var n=ss.safeCast($(s).data("qffield"),String);if(ss.isNullOrEmptyString(n)){return}var r=$("#"+this.uniqueName+"_QuickFilter_"+n).tryGetWidget(Object);if(ss.isNullOrUndefined(r)){return}var a=ss.safeCast($(s).data("qfsavestate"),Function);var l=!ss.staticEquals(a,null)?a(r):P.getValue(r);t.quickFilters[n]=l;if(e.quickFilterText===true&&$(s).hasClass("quick-filter-active")){var o=ss.safeCast($(s).data("qfdisplaytext"),Function);var u=$(s).find(".quick-filter-label").text();var d;if(!ss.staticEquals(o,null)){d=o(r,u)}else{d=u+" = "+P.getDisplayText(r)}if(!ss.isNullOrEmptyString(d)){if(!ss.isNullOrEmptyString(t.quickFilterText)){t.quickFilterText+=" "+ss.coalesce(Q.tryGetText("Controls.FilterPanel.And"),"and")+" ";t.quickFilterText+=d}else{t.quickFilterText=d}}}}))}return t},getElement:function(){return this.element},getGrid:function(){return this.slickGrid},getView:function(){return this.view},getFilterStore:function(){return ss.isNullOrUndefined(this.filterBar)?null:this.filterBar.get_store()}},Serenity.Widget,[gt]);ss.initClass(c,e,{getTreeItems:function(){return[]},updateItems:function(){var e=this.getTreeItems();var t={};for(var i=0;i<e.length;i++){var s=e[i];s.children=[];if(!Q.isEmptyOrNull(s.id)){t[s.id]=s}if(!Q.isEmptyOrNull(s.parentId)){var n=t[s.parentId];if(ss.isValue(n)){n.children.push(s)}}}this.view.addData({Entities:e,Skip:0,Take:0,TotalCount:e.length});this.updateSelectAll();this.updateFlags()},getEditValue:function(e,t){t[e.name]=this.get_value()},setEditValue:function(e,t){var i=ss.safeCast(e[t.name],Array);if(ss.isValue(i)){this.set_value(i)}},getButtons:function(){var e=this.getSelectAllText();if(Q.isEmptyOrNull(e)){return null}var t=this;var i=[];i.push(lt.define(function(){return t},function(e){return e.id},function(e){return e.isSelected},ss.mkdel(this,function(e,t){if(e.isSelected!==t){e.isSelected=t;this.itemSelectedChanged(e)}}),null,ss.mkdel(this,function(){this.updateFlags()})));return i},itemSelectedChanged:function(e){},getSelectAllText:function(){return ss.coalesce(Q.tryGetText("Controls.CheckTreeEditor.SelectAll"),"Select All")},isThreeStateHierarchy:function(){return false},createSlickGrid:function(){this.element.addClass("slick-no-cell-border").addClass("slick-no-odd-even");var e=p.prototype.createSlickGrid.call(this);this.element.addClass("slick-hide-header");e.resizeCanvas();return e},onViewFilter:function(e){if(!p.prototype.onViewFilter.call(this,e)){return false}var t=this.view.getItems();var i=this;return yi.filterCustom(e,function(e){if(ss.isNullOrUndefined(e.parentId)){return null}if(ss.isNullOrUndefined(i.$byId)){i.$byId={};for(var s=0;s<t.length;s++){var n=t[s];if(ss.isValue(n.id)){i.$byId[n.id]=n}}}return i.$byId[e.parentId]})},getInitialCollapse:function(){return false},onViewProcessData:function(e){e=p.prototype.onViewProcessData.call(this,e);this.$byId=null;yi.setIndents(e.Entities,function(e){return e.id},function(e){return e.parentId},this.getInitialCollapse());return e},onClick:function(e,t,i){p.prototype.onClick.call(this,e,t,i);if(!e.isDefaultPrevented()){yi.toggleClick(e,t,i,this.view,function(e){return e.id})}if(e.isDefaultPrevented()){return}var s=$(e.target);if(s.hasClass("check-box")){var n=s.hasClass("checked")||s.hasClass("partial");var r=this.rows.getDataItem(t);var a=r.isSelected!==!n;this.view.beginUpdate();try{if(r.isSelected!==!n){r.isSelected=!n;this.view.updateItem(r.id,r);this.itemSelectedChanged(r)}a=!!(this.$setAllSubTreeSelected(r,r.isSelected)|a);this.updateSelectAll();this.updateFlags()}finally{this.view.endUpdate()}if(a){this.element.triggerHandler("change")}}},updateSelectAll:function(){lt.update(this,function(e){return e.isSelected})},updateFlags:function(){var e=this.view;var t=e.getItems();var i=this.isThreeStateHierarchy();if(!i){return}e.beginUpdate();try{for(var s=0;s<t.length;s++){var n=t[s];if(ss.isNullOrUndefined(n.children)||n.children.length===0){var r=this.getDescendantsSelected(n);if(r!==n.isAllDescendantsSelected){n.isAllDescendantsSelected=r;e.updateItem(n.id,n)}continue}var a=this.allDescendantsSelected(n);var l=a||this.anyDescendantsSelected(n);if(a!==n.isAllDescendantsSelected||l!==n.isSelected){var o=n.isSelected!==l;n.isAllDescendantsSelected=a;n.isSelected=l;e.updateItem(n.id,n);if(o){this.itemSelectedChanged(n)}}}}finally{e.endUpdate()}},getDescendantsSelected:function(e){return true},$setAllSubTreeSelected:function(e,t){var i=false;for(var s=0;s<e.children.length;s++){var n=e.children[s];if(n.isSelected!==t){i=true;n.isSelected=t;this.view.updateItem(n.id,n);this.itemSelectedChanged(n)}if(n.children.length>0){i=!!(this.$setAllSubTreeSelected(n,t)|i)}}return i},$allItemsSelected:function(){for(var e=0;e<this.rows.getDataLength();e++){var t=this.rows.getDataItem(e);if(!t.isSelected){return false}}return this.rows.getDataLength()>0},allDescendantsSelected:function(e){if(e.children.length>0){for(var t=0;t<e.children.length;t++){var i=e.children[t];if(!i.isSelected){return false}if(!this.allDescendantsSelected(i)){return false}}}return true},anyDescendantsSelected:function(e){if(e.children.length>0){for(var t=0;t<e.children.length;t++){var i=e.children[t];if(i.isSelected){return true}if(this.anyDescendantsSelected(i)){return true}}}return false},getColumns:function(){var e=this;var t=[];t.push({field:"text",name:"Kayıt",width:80,format:mi.treeToggle(function(){return e.view},function(e){return e.id},ss.mkdel(this,function(e){var t="check-box";var i=e.item;if(i.hideCheckBox){return this.getItemText(e)}var s=this.isThreeStateHierarchy();if(i.isSelected){if(s&&!i.isAllDescendantsSelected){t+=" partial"}else{t+=" checked"}}return'<span class="'+t+'"></span>'+this.getItemText(e)}))});return t},getItemText:function(e){return Q.htmlEncode(e.value)},getSlickOptions:function(){var e=p.prototype.getSlickOptions.call(this);e.forceFitColumns=true;return e},sortItems:function(){if(!this.moveSelectedUp()){return}var e={};var t=this.view.getItems();var i=0;for(var s=0;s<t.length;s++){var n=t[s];e[n.id]=i++}t.sort(function(t,i){if(t.isSelected&&!i.isSelected){return-1}if(i.isSelected&&!t.isSelected){return 1}var s=Q.turkishLocaleCompare(t.text,i.text);if(s!==0){return s}return ss.compare(e[t.id],e[i.id])});this.view.setItems(t,true)},moveSelectedUp:function(){return false},get_value:function(){var e=[];var t=this.view.getItems();for(var i=0;i<t.length;i++){if(t[i].isSelected){e.push(t[i].id)}}return e},set_value:function(e){var t={};if(ss.isValue(e)){for(var i=0;i<e.length;i++){t[e[i]]=true}}this.view.beginUpdate();try{var s=this.view.getItems();for(var n=0;n<s.length;n++){var r=s[n];var a=t[r.id];if(a!==r.isSelected){r.isSelected=a;this.view.updateItem(r.id,r)}}this.updateSelectAll();this.updateFlags();this.sortItems()}finally{this.view.endUpdate()}}},p,[gt,Serenity.IGetEditValue,Serenity.ISetEditValue]);ss.initClass(f,e,{});ss.initClass(h,e,{});ss.initClass(m,e,{get_value:function(){var e=this.element.val().trim();if(ss.isValue(e)&&e.length===0){return null}return Q.formatDate(e,"yyyy-MM-dd")},set_value:function(e){if(ss.isNullOrUndefined(e)){this.element.val("")}else if(e.toLowerCase()==="today"||e.toLowerCase()==="now"){this.element.val(Q.formatDate(ss.today(),null))}else{this.element.val(Q.formatDate(e,null))}},get_valueAsDate:function(){if(ss.isNullOrEmptyString(this.get_value())){return null}return Q.parseISODateTime(this.get_value())},set_valueAsDate:function(e){if(ss.staticEquals(e,null)){this.set_value(null)}this.set_value(Q.formatDate(e,"yyyy-MM-dd"))},get_readOnly:function(){return this.element.hasClass("readonly")},set_readOnly:function(e){if(e!==this.get_readOnly()){if(e){this.element.addClass("readonly").attr("readonly","readonly");this.element.nextAll(".ui-datepicker-trigger").css("opacity","0.1")}else{this.element.removeClass("readonly").removeAttr("readonly");this.element.nextAll(".ui-datepicker-trigger").css("opacity","1")}}},get_minValue:function(){return this.$4$MinValueField},set_minValue:function(e){this.$4$MinValueField=e},get_maxValue:function(){return this.$4$MaxValueField},set_maxValue:function(e){this.$4$MaxValueField=e},get_minDate:function(){return Q.parseISODateTime(this.get_minValue())},set_minDate:function(e){this.set_minValue(Q.formatDate(e,"yyyy-MM-dd"))},get_maxDate:function(){return Q.parseISODateTime(this.get_maxValue())},set_maxDate:function(e){this.set_maxValue(Q.formatDate(e,"yyyy-MM-dd"))},get_sqlMinMax:function(){return this.get_minValue()==="1753-01-01"&&this.get_maxValue()==="9999-12-31"},set_sqlMinMax:function(e){if(e){this.set_minValue("1753-01-01");this.set_maxValue("9999-12-31")}else{this.set_minValue(null);this.set_maxValue(null)}}},Serenity.Widget,[Serenity.IStringValue,Et]);ss.initClass(g,e,{getOperators:function(){return this.appendNullableOperators(this.appendComparisonOperators([]))}},ss.makeGenericType(n,[m]),[St,kt]);ss.initClass(y,e,{get_displayFormat:function(){return this.$1$DisplayFormatField},set_displayFormat:function(e){this.$1$DisplayFormatField=e},format:function(e){return y.format(e.value,this.get_displayFormat())}},null,[It]);ss.initClass(v,e,{get_value:function(){var e=this.element.val().trim();if(ss.isValue(e)&&e.length===0){return null}var t=Q.formatDate(e,"yyyy-MM-dd");var i=this.$time.val();var s=t+"T"+i+":00.000";if(this.options.useUtc){s=Q.formatISODateTimeUTC(Q.parseISODateTime(s))}return s},set_value:function(e){if(ss.isNullOrEmptyString(e)){this.element.val("");this.$time.val("00:00")}else if(e.toLowerCase()==="today"){this.element.val(Q.formatDate(ss.today(),null));this.$time.val("00:00")}else{var t=e.toLowerCase()==="now"?new Date:Q.parseISODateTime(e);t=v.roundToMinutes(t,ss.coalesce(this.options.intervalMinutes,5));this.element.val(Q.formatDate(t,null));this.$time.val(Q.formatDate(t,"HH:mm"))}},get_valueAsDate:function(){if(ss.isNullOrEmptyString(this.get_value())){return null}return Q.parseISODateTime(this.get_value())},set_valueAsDate:function(e){if(ss.staticEquals(e,null)){this.set_value(null)}this.set_value(Q.formatDate(e,"yyyy-MM-ddTHH:mm"))},get_minValue:function(){return this.$4$MinValueField},set_minValue:function(e){this.$4$MinValueField=e},get_maxValue:function(){return this.$4$MaxValueField},set_maxValue:function(e){this.$4$MaxValueField=e},get_minDate:function(){return Q.parseISODateTime(this.get_minValue())},set_minDate:function(e){this.set_minValue(Q.formatDate(e,"yyyy-MM-ddTHH:mm:ss"))},get_maxDate:function(){return Q.parseISODateTime(this.get_maxValue())},set_maxDate:function(e){this.set_maxValue(Q.formatDate(e,"yyyy-MM-ddTHH:mm:ss"))},get_sqlMinMax:function(){return this.get_minValue()==="1753-01-01"&&this.get_maxValue()==="9999-12-31"},set_sqlMinMax:function(e){if(e){this.set_minValue("1753-01-01");this.set_maxValue("9999-12-31")}else{this.set_minValue(null);this.set_maxValue(null)}},get_readOnly:function(){return this.element.hasClass("readonly")},set_readOnly:function(e){if(e!==this.get_readOnly()){if(e){this.element.addClass("readonly").attr("readonly","readonly");this.element.nextAll(".ui-datepicker-trigger").css("opacity","0.1")}else{this.element.removeClass("readonly").removeAttr("readonly");this.element.nextAll(".ui-datepicker-trigger").css("opacity","1")}P.setReadonly(this.$time,e)}}},Serenity.Widget,[Serenity.IStringValue,Et]);ss.initClass(S,e,{getOperators:function(){return this.appendNullableOperators(this.appendComparisonOperators([]))},getCriteria:function(e){switch(this.get_operator().key){case"eq":case"ne":case"lt":case"le":case"gt":case"ge":{{var t=this.getEditorText();e.$=this.displayText(this.get_operator(),[t]);var i=Q.parseISODateTime(ss.cast(this.getEditorValue(),String));i=new Date(i.getFullYear(),i.getMonth(),i.getDate());var s=new Date(i.getFullYear(),i.getMonth(),i.getDate()+1);var n=[this.getCriteriaField()];var a=Q.formatDate(i,"yyyy-MM-dd");var l=Q.formatDate(s,"yyyy-MM-dd");switch(this.get_operator().key){case"eq":{return Serenity.Criteria.join([n,">=",a],"and",[n,"<",l])}case"ne":{return Serenity.Criteria.paren(Serenity.Criteria.join([n,"<",a],"or",[n,">",l]))}case"lt":{return[n,"<",a]}case"le":{return[n,"<",l]}case"gt":{return[n,">=",l]}case"ge":{return[n,">=",a]}}}break}}return r.prototype.getCriteria.call(this,e)}},ss.makeGenericType(n,[m]),[St,kt]);ss.initClass(C,e,{},y,[It]);ss.initClass(hi,e,{getItems:function(){return this.options.items||[]},emptyItemText:function(){if(!ss.isNullOrEmptyString(this.options.emptyOptionText)){return this.options.emptyOptionText}return fi.prototype.emptyItemText.call(this)},updateItems:function(){var e=this.getItems();this.clearItems();if(e.length>0){var t=typeof e[0]==="string";for(var i=0;i<e.length;i++){var s=e[i];var n=ss.cast(t?s:s[0],String);var r;if(t){r=s}else{var a=s[1];if(ss.isNullOrUndefined(a)){a=s[0]}r=a}var l=ss.cast(r,String);this.addOption(n,l,s,false)}}}},fi,[Serenity.ISetEditValue,Serenity.IGetEditValue,Serenity.IStringValue,Et]);ss.initClass(b,e,{getItems:function(){var e=this.options;if(ss.isValue(e.items)&&e.items.length>=1){return e.items}var t=[];var i=(new Date).getFullYear();var s=(new Date).getFullYear();if(ss.isValue(e.minYear)){e.minYear=e.minYear.toString();if(ss.startsWithString(e.minYear,"-")){i-=parseInt(e.minYear.substr(1),10)}else if(ss.startsWithString(e.minYear,"+")){i+=parseInt(e.minYear.substr(1),10)}else{i=parseInt(e.minYear,10)}}if(ss.isValue(e.maxYear)){e.maxYear=e.maxYear.toString();if(ss.startsWithString(e.maxYear,"-")){s-=parseInt(e.maxYear.substr(1),10)}else if(ss.startsWithString(e.maxYear,"+")){s+=parseInt(e.maxYear.substr(1),10)}else{s=parseInt(e.maxYear,10)}}if(e.descending){for(var n=s;n>=i;n--){t.push(n.toString())}}else{for(var r=i;r<=s;r++){t.push(r.toString())}}return t}},hi,[Serenity.ISetEditValue,Serenity.IGetEditValue,Serenity.IStringValue,Et]);ss.initClass(pi,e,{});ss.initClass(T,e,{},pi);ss.initClass(_,e,{get_value:function(){var e=this.element.autoNumeric("get");if(!!(ss.isNullOrUndefined(e)||ss.referenceEquals(e.Length,0))){return null}else{return ss.cast(parseFloat(ss.cast(e,String)),Number)}},set_value:function(e){if(ss.isNullOrUndefined(e)||e===""){this.element.val("")}else{this.element.autoNumeric("set",e)}},get_isValid:function(){return!isNaN(this.get_value())}},Serenity.Widget,[Serenity.IDoubleValue]);ss.initClass(O,e,{});ss.initClass(x,e,{getOperators:function(){return this.appendNullableOperators(this.appendComparisonOperators([]))}},ss.makeGenericType(n,[_]),[St,kt]);ss.initClass(k,e,{});ss.initClass(E,e,{});ss.initClass(I,e,{});ss.initClass(F,e,{get_editorType:function(){return this.$3$EditorTypeField},set_editorType:function(e){this.$3$EditorTypeField=e},get_useRelative:function(){return this.$3$UseRelativeField},set_useRelative:function(e){this.$3$UseRelativeField=e},get_useLike:function(){return this.$3$UseLikeField},set_useLike:function(e){this.$3$UseLikeField=e},getOperators:function(){var e=[];e.push({key:X.EQ});e.push({key:X.NE});if(this.get_useRelative()){e.push({key:X.LT});e.push({key:X.LE});e.push({key:X.GT});e.push({key:X.GE})}if(this.get_useLike()){e.push({key:X.contains});e.push({key:X.startsWith})}this.appendNullableOperators(e);return e},useEditor:function(){return ss.referenceEquals(this.get_operator().key,X.EQ)||ss.referenceEquals(this.get_operator().key,X.NE)||this.get_useRelative()&&(ss.referenceEquals(this.get_operator().key,X.LT)||ss.referenceEquals(this.get_operator().key,X.LE)||ss.referenceEquals(this.get_operator().key,X.GT)||ss.referenceEquals(this.get_operator().key,X.GE))},getEditorOptions:function(){var e=ss.makeGenericType(n,[Object]).prototype.getEditorOptions.call(this);if(this.useEditor()&&ss.referenceEquals(this.get_editorType(),ss.coalesce(this.get_field().editorType,"String"))){e=$.extend(e,this.get_field().editorParams)}return e},createEditor:function(){if(this.useEditor()){var e=A.get(this.get_editorType());this.editor=Serenity.Widget.create({type:e,element:ss.mkdel(this,function(e){e.appendTo(this.get_container())}),options:this.getEditorOptions(),init:null});return}ss.makeGenericType(n,[Object]).prototype.createEditor.call(this)},useIdField:function(){return this.useEditor()},getEditorText:function(){return r.prototype.getEditorText.call(this)},initQuickFilter:function(e){ss.makeGenericType(n,[Object]).prototype.initQuickFilter.call(this,e);e.type=A.get(this.get_editorType())}},ss.makeGenericType(n,[Object]),[St,kt]);ss.initClass(N,e,{});ss.initClass(V,e,{setParams:function(e){}});ss.initClass(w,e,{},V);ss.initClass(D,e,{getItems:function(){if(ss.isNullOrUndefined(D.$editorTypeList)){D.$editorTypeList=[];var e=new ss.ObjectEnumerator(ti.get_registeredTypes());try{while(e.moveNext()){var t=e.current();D.$editorTypeList.push([t.key,t.value.displayName])}}finally{e.dispose()}D.$editorTypeList.sort(function(e,t){var i=e[1];var s=t[1];return Q.turkishLocaleCompare(i,s)})}return D.$editorTypeList}},hi,[Serenity.ISetEditValue,Serenity.IGetEditValue,Serenity.IStringValue,Et]);ss.initClass(A,e,{});ss.initClass(P,e,{});ss.initClass(U,e,{get_value:function(){var e=this.element.nextAll(".emaildomain");var t=this.element.val();var i=e.val();if(Q.isEmptyOrNull(t)){if(this.options.readOnlyDomain||Q.isEmptyOrNull(i)){return""}return"@"+i}return t+"@"+i},set_value:function(e){var t=this.element.nextAll(".emaildomain");e=Q.trimToNull(e);if(ss.isNullOrUndefined(e)){if(!this.options.readOnlyDomain){t.val("")}this.element.val("")}else{var i=e.split("@");if(i.length>1){if(!this.options.readOnlyDomain){t.val(i[1]);this.element.val(i[0])}else if(!Q.isEmptyOrNull(this.options.domain)){if(!ss.referenceEquals(i[1],this.options.domain)){this.element.val(e)}else{this.element.val(i[0])}}else{this.element.val(i[0])}}else{this.element.val(i[0])}}},get_readOnly:function(){var e=this.element.nextAll(".emaildomain");return!(ss.isNullOrUndefined(this.element.attr("readonly"))&&(!this.options.readOnlyDomain||ss.isNullOrUndefined(e.attr("readonly"))))},set_readOnly:function(e){var t=this.element.nextAll(".emaildomain");if(e){this.element.attr("readonly","readonly").addClass("readonly");if(!this.options.readOnlyDomain){t.attr("readonly","readonly").addClass("readonly")}}else{this.element.removeAttr("readonly").removeClass("readonly");if(!this.options.readOnlyDomain){t.removeAttr("readonly").removeClass("readonly")}}}},Serenity.Widget,[Serenity.IStringValue,Et]);ss.initClass(B,e,{});ss.initInterface(yt,e,{dialogOpen:null});ss.initInterface(vt,e,{load:null},[yt]);ss.initClass(G,e,{initializeAsync:function(){return Serenity.Widget.prototype.initializeAsync.call(this).then(ss.mkdel(this,this.$initPropertyGridAsync),null).then(ss.mkdel(this,this.$initLocalizationGridAsync),null)},destroy:function(){if(ss.isValue(this.propertyGrid)){this.propertyGrid.destroy();this.propertyGrid=null}if(ss.isValue(this.localizationGrid)){this.localizationGrid.destroy();this.localizationGrid=null}this.undeleteButton=null;this.applyChangesButton=null;this.deleteButton=null;this.saveAndCloseButton=null;Serenity.TemplatedDialog.prototype.destroy.call(this)},get_entity:function(){return this.entity},set_entity:function(e){this.entity=e||new Object},get_entityId:function(){return this.entityId},set_entityId:function(e){this.entityId=e},getEntityNameFieldValue:function(){return ss.coalesce(this.get_entity()[this.getNameProperty()],"").toString()},getEntityTitle:function(){if(!this.isEditMode()){return ss.formatString(Q.text("Controls.EntityDialog.NewRecordTitle"),this.getEntitySingular())}else{var e=ss.coalesce(this.getEntityNameFieldValue(),"");return ss.formatString(Q.text("Controls.EntityDialog.EditRecordTitle"),this.getEntitySingular(),Q.isEmptyOrNull(e)?"":" ("+e+")")}},updateTitle:function(){this.dialogTitle=this.getEntityTitle()},isCloneMode:function(){return false},isEditMode:function(){return ss.isValue(this.get_entityId())&&!this.isCloneMode()},isDeleted:function(){if(ss.isNullOrUndefined(this.get_entityId())){return false}var e=this.get_entity()[this.getIsActiveProperty()];if(ss.isNullOrUndefined(e)){return false}return ss.Nullable$1.lt(e,0)},isNew:function(){return ss.isNullOrUndefined(this.get_entityId())},isNewOrDeleted:function(){return this.isNew()||this.isDeleted()},getDeleteOptions:function(e){return{}},deleteHandler:function(e,t){Q.serviceCall(e)},doDelete:function(e){var t=this;var i={};i.service=this.getService()+"/Delete";var s={};s.EntityId=this.get_entityId();i.request=s;i.onSuccess=ss.mkdel(this,function(i){t.onDeleteSuccess(i);if(!ss.staticEquals(e,null)){e(i)}t.element.triggerHandler("ondatachange",[{entityId:s.EntityId,entity:this.entity,type:"delete"}])});var n=this.getDeleteOptions(e);var r=$.extend(i,n);this.deleteHandler(r,e)},onDeleteSuccess:function(e){},getEntityType:function(){if(ss.isNullOrUndefined(this.$entityType)){var e=ss.getAttributes(ss.getInstanceType(this),Serenity.EntityTypeAttribute,true);if(e.length===1){this.$entityType=e[0].value;return this.$entityType}var t=ss.getTypeFullName(ss.getInstanceType(this));var i=t.indexOf(".");if(i>=0){t=t.substring(i+1)}if(ss.endsWithString(t,"Dialog")||ss.endsWithString(t,"Control")){t=t.substr(0,t.length-6)}else if(ss.endsWithString(t,"Panel")){t=t.substr(0,t.length-5)}this.$entityType=t}return this.$entityType},getFormKey:function(){if(ss.isNullOrUndefined(this.$formKey)){var e=ss.getAttributes(ss.getInstanceType(this),Serenity.FormKeyAttribute,true);if(e.length>=1){this.$formKey=e[0].value}else{this.$formKey=this.getEntityType()}}return this.$formKey},getLocalTextDbPrefix:function(){if(ss.isNullOrUndefined(this.$localTextDbPrefix)){this.$localTextDbPrefix=ss.coalesce(this.getLocalTextPrefix(),"");if(this.$localTextDbPrefix.length>0&&!ss.endsWithString(this.$localTextDbPrefix,".")){this.$localTextDbPrefix="Db."+this.$localTextDbPrefix+"."}}return this.$localTextDbPrefix},getLocalTextPrefix:function(){var e=ss.getAttributes(ss.getInstanceType(this),Serenity.LocalTextPrefixAttribute,true);if(e.length>=1){return e[0].value}return this.getEntityType()},getEntitySingular:function(){if(ss.isNullOrUndefined(this.$entitySingular)){var e=ss.getAttributes(ss.getInstanceType(this),Serenity.ItemNameAttribute,true);if(e.length>=1){this.$entitySingular=e[0].value;this.$entitySingular=Q.LT.getDefault(this.$entitySingular,this.$entitySingular)}else{var t=Q.tryGetText(this.getLocalTextDbPrefix()+"EntitySingular");
if(ss.isNullOrUndefined(t)){t=this.getEntityType()}this.$entitySingular=t}}return this.$entitySingular},getNameProperty:function(){if(ss.isNullOrUndefined(this.$nameProperty)){var e=ss.getAttributes(ss.getInstanceType(this),Serenity.NamePropertyAttribute,true);if(e.length>=1){this.$nameProperty=e[0].value}else{this.$nameProperty="Name"}}return this.$nameProperty},getIdProperty:function(){if(ss.isNullOrUndefined(this.$idProperty)){var e=ss.getAttributes(ss.getInstanceType(this),Serenity.IdPropertyAttribute,true);if(e.length>=1){this.$idProperty=e[0].value}else{this.$idProperty="ID"}}return this.$idProperty},getIsActiveProperty:function(){if(ss.isNullOrUndefined(this.$isActiveProperty)){var e=ss.getAttributes(ss.getInstanceType(this),Serenity.IsActivePropertyAttribute,true);if(e.length>=1){this.$isActiveProperty=e[0].value}else{this.$isActiveProperty="IsActive"}}return this.$isActiveProperty},getService:function(){if(ss.isNullOrUndefined(this.$service)){var e=ss.getAttributes(ss.getInstanceType(this),Serenity.ServiceAttribute,true);if(e.length>=1){this.$service=e[0].value}else{this.$service=ss.replaceAllString(this.getEntityType(),String.fromCharCode(46),String.fromCharCode(47))}}return this.$service},load:function(e,t,i){var s=ss.mkdel(this,function(){if(ss.isNullOrUndefined(e)){this.loadResponse({});if(!ss.staticEquals(t,null)){t()}return}var i=typeof e;if(i==="string"||i==="number"){var s=this;var n=e;this.loadById(n,function(e){if(!ss.staticEquals(t,null)){window.setTimeout(t,0)}},null);return}var r=e||new Object;this.loadResponse({Entity:r});if(!ss.staticEquals(t,null)){t()}});if(ss.staticEquals(i,null)){s();return}try{s()}catch(n){var r=ss.Exception.wrap(n);i(r)}},loadNewAndOpenDialog:function(e){this.loadResponse({});this.dialogOpen(e)},loadEntityAndOpenDialog:function(e,t){this.loadResponse({Entity:e});this.dialogOpen(t)},loadResponse:function(e){e=e||{};this.onLoadingData(e);var t=e.Entity||new Object;this.beforeLoadEntity(t);this.loadEntity(t);this.set_entity(t);this.afterLoadEntity()},loadEntity:function(e){var t=this.getIdProperty();if(ss.isValue(t)){this.set_entityId(e[t])}this.set_entity(e);if(ss.isValue(this.propertyGrid)){this.propertyGrid.set_mode(this.isEditMode()?2:1);this.propertyGrid.load(e)}},beforeLoadEntity:function(e){this.localizationPendingValue=null;this.localizationLastValue=null},afterLoadEntity:function(){this.updateInterface();this.updateTitle()},loadByIdAndOpenDialog:function(e,t){var i=this;this.loadById(e,ss.mkdel(this,function(e){window.setTimeout(ss.mkdel(this,function(){this.dialogOpen(t)}),0)}),function(){if(!i.element.is(":visible")){i.element.remove()}})},onLoadingData:function(e){},getLoadByIdOptions:function(e,t){return{}},getLoadByIdRequest:function(e){var t={};t.EntityId=e;return t},reloadById:function(){this.loadById(this.get_entityId(),null,null)},loadById:function(e,t,i){var s={};s.service=this.getService()+"/Retrieve";s.blockUI=true;s.request=this.getLoadByIdRequest(e);var n=this;s.onSuccess=function(e){n.loadResponse(e);if(!ss.staticEquals(t,null)){t(e)}};s.onCleanup=function(){if(ss.isValue(n.validator)){Q.validatorAbortHandler(n.validator)}};var r=this.getLoadByIdOptions(e,t);var a=$.extend(s,r);this.loadByIdHandler(a,t,i)},loadByIdHandler:function(e,t,i){var s=Q.serviceCall(e);if(!ss.staticEquals(i,null)){s.fail(i)}},$initLocalizationGrid:function(){var e=this.byId("PropertyGrid");if(e.length<=0){return}var t=this.getPropertyGridOptions();this.$initLocalizationGridCommon(t)},$initLocalizationGridAsync:function(){return Promise.resolve().then(ss.mkdel(this,function(){var e=this.byId("PropertyGrid");if(e.length<=0){return Promise.resolve()}return this.getPropertyGridOptionsAsync().then(ss.mkdel(this,function(e){this.$initLocalizationGridCommon(e)}),null)}),null)},$initLocalizationGridCommon:function(e){var t=this.byId("PropertyGrid");var i=false;for(var s=0;s<e.items.length;s++){var n=e.items[s];if(n.localizable===true){i=true}}if(!i){return}var r=$("<div/>").attr("id",this.idPrefix+"LocalizationGrid").hide().insertAfter(t);e.idPrefix=this.idPrefix+"Localization_";var a=[];for(var l=0;l<e.items.length;l++){var o=e.items[l];var u=null;if(o.localizable===true){var d=$.extend({},o);d.oneWay=true;d.readOnly=true;d.required=false;d.defaultValue=null;a.push(d);if(ss.isNullOrUndefined(u)){var c=this.getLanguages();u=ss.safeCast(c,Array);if(ss.isNullOrUndefined(u)||u.length===0||ss.isNullOrUndefined(u[0])||!ss.isArray(u[0])){u=Array.prototype.slice.call(c.map(function(e){return[e.item1,e.item2]}))}}for(var f=0;f<u.length;f++){var h=u[f];d=$.extend({},o);d.name=h[0]+"$"+d.name;d.title=h[1];d.cssClass=[d.cssClass,"translation"].join(" ");d.insertable=true;d.updatable=true;d.oneWay=false;d.required=false;d.localizable=false;d.defaultValue=null;a.push(d)}}}e.items=a;this.localizationGrid=new Kt(r,e).init(null);r.addClass("s-LocalizationGrid");var p=this},isLocalizationMode:function(){return ss.isValue(this.localizationButton)&&this.localizationButton.hasClass("pressed")},isLocalizationModeAndChanged:function(){if(!this.isLocalizationMode()){return false}var e=this.$getLocalizationGridValue();return!ss.referenceEquals($.toJSON(this.localizationLastValue),$.toJSON(e))},$localizationButtonClick:function(){if(this.isLocalizationMode()&&!this.validateForm()){return}if(this.isLocalizationModeAndChanged()){var e=this.$getLocalizationGridValue();this.localizationLastValue=e;this.localizationPendingValue=e}this.localizationButton.toggleClass("pressed");this.updateInterface();if(this.isLocalizationMode()){this.$loadLocalization()}},getLanguages:function(){if(!ss.staticEquals(G.defaultLanguageList,null)){return G.defaultLanguageList()||[]}return[]},$loadLocalization:function(){if(ss.isNullOrUndefined(this.localizationLastValue)&&this.isNew()){this.localizationGrid.load({});this.$setLocalizationGridCurrentValues();this.localizationLastValue=this.$getLocalizationGridValue();return}if(ss.isValue(this.localizationLastValue)){this.localizationGrid.load(this.localizationLastValue);this.$setLocalizationGridCurrentValues();return}var e=this;var t={};t.service=this.getService()+"/Retrieve";t.blockUI=true;var i=this.get_entityId();var s=[];s.push("Localizations");t.request={EntityId:i,ColumnSelection:"keyOnly",IncludeColumns:s};t.onSuccess=ss.mkdel(this,function(t){var i=$.extend(new Object,e.get_entity());var s=ss.getEnumerator(Object.keys(t.Localizations));try{while(s.moveNext()){var n=s.current();var r=t.Localizations[n];var a=ss.getEnumerator(Object.keys(r));try{while(a.moveNext()){var l=a.current();i[n+"$"+l]=r[l]}}finally{a.dispose()}}}finally{s.dispose()}e.localizationGrid.load(i);this.$setLocalizationGridCurrentValues();this.localizationPendingValue=null;this.localizationLastValue=this.$getLocalizationGridValue()});Q.serviceCall(t)},$setLocalizationGridCurrentValues:function(){var e={};this.localizationGrid.enumerateItems(ss.mkdel(this,function(t,i){if(t.name.indexOf("$")<0&&i.element.is(":input")){e[t.name]=this.byId(t.name).val();i.element.val(e[t.name])}}));this.localizationGrid.enumerateItems(function(t,i){var s=t.name.indexOf("$");if(s>=0&&i.element.is(":input")){var n=e[t.name.substr(s+1)];if(ss.isValue(n)&&n.length>0){i.element.attr("title",n).attr("placeholder",n)}}})},$getLocalizationGridValue:function(){var e={};this.localizationGrid.save(e);var t=ss.getEnumerator(Object.keys(e));try{while(t.moveNext()){var i=t.current();if(i.indexOf(String.fromCharCode(36))<0){delete e[i]}}}finally{t.dispose()}return e},$getPendingLocalizations:function(){if(ss.isNullOrUndefined(this.localizationPendingValue)){return null}var e={};var t=this.getIdProperty();var i=this.getLanguages();var s=ss.safeCast(i,Array);if(ss.isNullOrUndefined(s)||s.length===0||ss.isNullOrUndefined(s[0])||!ss.isArray(s[0])){s=Array.prototype.slice.call(i.map(function(e){return[e.item1,e.item2]}))}for(var n=0;n<s.length;n++){var r=s[n];var a=r[0];var l={};if(ss.isValue(t)){l[t]=this.get_entityId()}var o=a+"$";var u=ss.getEnumerator(Object.keys(this.localizationPendingValue));try{while(u.moveNext()){var d=u.current();if(ss.startsWithString(d,o)){l[d.substr(o.length)]=this.localizationPendingValue[d]}}}finally{u.dispose()}e[a]=l}return e},$initPropertyGrid:function(){var e=this.byId("PropertyGrid");if(e.length<=0){return}var t=this.getPropertyGridOptions();this.propertyGrid=new Kt(e,t).init(null);if(this.element.closest(".ui-dialog").hasClass("s-Flexify")){this.propertyGrid.element.children(".categories").flexHeightOnly(1)}},$initPropertyGridAsync:function(){return Promise.resolve().then(ss.mkdel(this,function(){var e=this.byId("PropertyGrid");if(e.length<=0){return Promise.resolve()}return this.getPropertyGridOptionsAsync().then(ss.mkdel(this,function(t){this.propertyGrid=new Kt(e,t);if(this.element.closest(".ui-dialog").hasClass("s-Flexify")){this.propertyGrid.element.children(".categories").flexHeightOnly(1)}return this.propertyGrid.initialize()}),null)}),null)},getPropertyItems:function(){var e=this.getFormKey();return Q.getForm(e)},getPropertyGridOptions:function(){var e=Jt.$ctor();e.idPrefix=this.idPrefix;e.items=this.getPropertyItems();e.mode=1;e.localTextPrefix="Forms."+this.getFormKey()+".";return e},getPropertyGridOptionsAsync:function(){return this.getPropertyItemsAsync().then(ss.mkdel(this,function(e){var t=Jt.$ctor();t.idPrefix=this.idPrefix;t.items=e;t.mode=1;t.localTextPrefix="Forms."+this.getFormKey()+".";return t}),null)},getPropertyItemsAsync:function(){return Promise.resolve().then(ss.mkdel(this,function(){var e=this.getFormKey();return Q.getFormAsync(e)}),null)},validateBeforeSave:function(){return true},getSaveOptions:function(e){var t=this;var i={};i.service=this.getService()+"/"+(this.isEditMode()?"Update":"Create");i.onSuccess=ss.mkdel(this,function(s){t.onSaveSuccess(s);if(!ss.staticEquals(e,null)){e(s)}var n=t.isEditMode()?"update":"create";var r=i.request;if(ss.isNullOrUndefined(r)){r=new Object}var a=r.Entity;var l;if(t.isEditMode()){l=this.get_entityId()}else{var o=s;if(ss.isNullOrUndefined(o)){o=new Object}l=o.EntityId}var u={type:n,entity:a,entityId:l};t.element.triggerHandler("ondatachange",[u])});i.onCleanup=function(){if(ss.isValue(t.validator)){Q.validatorAbortHandler(t.validator)}};i.request=this.getSaveRequest();return i},getSaveEntity:function(){var e=new Object;if(ss.isValue(this.propertyGrid)){this.propertyGrid.save(e)}if(this.isEditMode()){var t=this.getIdProperty();if(ss.isValue(t)&&!ss.isValue(e[t])){e[t]=this.get_entityId()}}return e},getSaveRequest:function(){var e=this.getSaveEntity();var t={};t.Entity=e;if(this.isEditMode()){var i=this.getIdProperty();if(ss.isValue(i)){t.EntityId=this.get_entityId()}}if(ss.isValue(this.localizationPendingValue)){t.Localizations=this.$getPendingLocalizations()}return t},onSaveSuccess:function(e){},save_SubmitHandler:function(e){var t=this.getSaveOptions(e);this.saveHandler(t,e)},save:function(e){var t=this;return Oi.submit(this.byId("Form"),function(){return t.validateBeforeSave()},function(){t.save_SubmitHandler(e)})},saveHandler:function(e,t){Q.serviceCall(e)},initToolbar:function(){Serenity.TemplatedDialog.prototype.initToolbar.call(this);if(ss.isNullOrUndefined(this.toolbar)){return}this.saveAndCloseButton=this.toolbar.findButton("save-and-close-button");this.applyChangesButton=this.toolbar.findButton("apply-changes-button");this.deleteButton=this.toolbar.findButton("delete-button");this.undeleteButton=this.toolbar.findButton("undo-delete-button");this.cloneButton=this.toolbar.findButton("clone-button");this.localizationButton=this.toolbar.findButton("localization-button")},showSaveSuccessMessage:function(e){Q.notifySuccess(Q.text("Controls.EntityDialog.SaveSuccessMessage"),"",null)},getToolbarButtons:function(){var e=[];var t=this;e.push({title:Q.text("Controls.EntityDialog.SaveButton"),cssClass:"save-and-close-button",hotkey:"alt+s",onClick:function(){t.save(function(e){t.dialogClose()})}});e.push({title:"",hint:Q.text("Controls.EntityDialog.ApplyChangesButton"),cssClass:"apply-changes-button",hotkey:"alt+a",onClick:ss.mkdel(this,function(){t.save(ss.mkdel(this,function(e){if(t.isEditMode()){var i=e.EntityId;if(ss.isNullOrUndefined(i)){i=t.get_entityId()}t.loadById(i,null,null)}else{t.loadById(e.EntityId,null,null)}this.showSaveSuccessMessage(e)}))})});e.push({title:Q.text("Controls.EntityDialog.DeleteButton"),cssClass:"delete-button",hotkey:"alt+x",onClick:function(){Q.confirm(Q.text("Controls.EntityDialog.DeleteConfirmation"),function(){t.doDelete(function(){t.dialogClose()})})}});e.push({title:Q.text("Controls.EntityDialog.UndeleteButton"),cssClass:"undo-delete-button",onClick:function(){if(t.isDeleted()){Q.confirm(Q.text("Controls.EntityDialog.UndeleteConfirmation"),function(){t.undelete(function(){t.loadById(t.get_entityId(),null,null)})})}}});e.push({title:Q.text("Controls.EntityDialog.LocalizationButton"),cssClass:"localization-button",onClick:ss.mkdel(this,function(){this.$localizationButtonClick()})});e.push({title:Q.text("Controls.EntityDialog.CloneButton"),cssClass:"clone-button",onClick:ss.mkdel(this,function(){if(!t.isEditMode()){return}var e=this.getCloningEntity();Serenity.Widget.create({type:ss.getInstanceType(this),element:null,options:new Object,init:ss.mkdel(this,function(t){Si.bubbleDataChange(Si.cascade(t,this.element),this,true).loadEntityAndOpenDialog(e,null)})})})});return e},getCloningEntity:function(){var e=new Object;e=$.extend(e,this.get_entity());var t=this.getIdProperty();if(!Q.isEmptyOrNull(t)){delete e[t]}var i=this.getIsActiveProperty();if(!Q.isEmptyOrNull(i)){delete e[i]}return e},updateInterface:function(){var e=this.isDeleted();var t=this.isLocalizationMode();if(ss.isValue(this.tabs)){Serenity.TabsExtensions.setDisabled(this.tabs,"Log",this.isNewOrDeleted())}if(ss.isValue(this.propertyGrid)){this.propertyGrid.element.toggle(!t)}if(ss.isValue(this.localizationGrid)){this.localizationGrid.element.toggle(t)}if(ss.isValue(this.localizationButton)){this.localizationButton.toggle(ss.isValue(this.localizationGrid));this.localizationButton.find(".button-inner").text(this.isLocalizationMode()?Q.text("Controls.EntityDialog.LocalizationBack"):Q.text("Controls.EntityDialog.LocalizationButton"))}if(t){if(ss.isValue(this.toolbar)){this.toolbar.findButton("tool-button").not(".localization-hidden").addClass(".localization-hidden").hide()}if(ss.isValue(this.localizationButton)){this.localizationButton.show()}return}this.toolbar.findButton("localization-hidden").removeClass("localization-hidden").show();if(ss.isValue(this.deleteButton)){this.deleteButton.toggle(this.isEditMode()&&!e)}if(ss.isValue(this.undeleteButton)){this.undeleteButton.toggle(this.isEditMode()&&e)}if(ss.isValue(this.saveAndCloseButton)){this.saveAndCloseButton.toggle(!e);this.saveAndCloseButton.find(".button-inner").text(Q.text(this.isNew()?"Controls.EntityDialog.SaveButton":"Controls.EntityDialog.UpdateButton"))}if(ss.isValue(this.applyChangesButton)){this.applyChangesButton.toggle(!e)}if(ss.isValue(this.cloneButton)){this.cloneButton.toggle(false)}},getUndeleteOptions:function(e){return{}},undeleteHandler:function(e,t){Q.serviceCall(e)},undelete:function(e){var t=this;var i={};i.service=this.getService()+"/Undelete";var s={};s.EntityId=this.get_entityId();i.request=s;i.onSuccess=ss.mkdel(this,function(i){if(!ss.staticEquals(e,null)){e(i)}t.element.triggerHandler("ondatachange",[{entityId:t.get_entityId(),entity:this.entity,type:"undelete"}])});var n=this.getUndeleteOptions(e);var r=$.extend(i,n);this.undeleteHandler(r,e)}},Serenity.TemplatedDialog,[yt,vt]);ss.initClass(q,e,{usePager:function(){return true},createToolbarExtensions:function(){this.createIncludeDeletedButton();this.createQuickSearchInput()},getInitialTitle:function(){return this.getDisplayName()},getLocalTextPrefix:function(){var e=p.prototype.getLocalTextPrefix.call(this);if(Q.isEmptyOrNull(e)){return this.getEntityType()}return e},getEntityType:function(){if(ss.isNullOrUndefined(this.$entityType)){var e=ss.getAttributes(ss.getInstanceType(this),Serenity.EntityTypeAttribute,true);if(e.length===1){this.$entityType=e[0].value;return this.$entityType}var t=ss.getTypeFullName(ss.getInstanceType(this));var i=t.indexOf(".");if(i>=0){t=t.substring(i+1)}if(ss.endsWithString(t,"Grid")){t=t.substr(0,t.length-4)}else if(ss.endsWithString(t,"SubGrid")){t=t.substr(0,t.length-7)}this.$entityType=t}return this.$entityType},getDisplayName:function(){if(ss.isNullOrUndefined(this.$displayName)){var e=ss.getAttributes(ss.getInstanceType(this),Ni,true);if(e.length>=1){this.$displayName=e[0].displayName;this.$displayName=Q.LT.getDefault(this.$displayName,this.$displayName)}else{var t=Q.tryGetText(this.getLocalTextDbPrefix()+"EntityPlural");if(ss.isNullOrUndefined(t)){t=this.getEntityType()}this.$displayName=t}}return this.$displayName},getItemName:function(){if(ss.isNullOrUndefined(this.$itemName)){var e=ss.getAttributes(ss.getInstanceType(this),Serenity.ItemNameAttribute,true);if(e.length>=1){this.$itemName=e[0].value;this.$itemName=Q.LT.getDefault(this.$itemName,this.$itemName)}else{var t=Q.tryGetText(this.getLocalTextDbPrefix()+"EntitySingular");if(ss.isNullOrUndefined(t)){t=this.getEntityType()}this.$itemName=t}}return this.$itemName},getAddButtonCaption:function(){return ss.formatString(Q.text("Controls.EntityGrid.NewButton"),this.getItemName())},getButtons:function(){var e=this;var t=[];t.push({title:this.getAddButtonCaption(),cssClass:"add-button",hotkey:"alt+n",onClick:function(){e.addButtonClick()}});t.push(this.newRefreshButton(true));t.push(Serenity.ColumnPickerDialog.createToolButton(this));return t},newRefreshButton:function(e){var t=this;return{title:e?null:Q.text("Controls.EntityGrid.RefreshButton"),hint:e?Q.text("Controls.EntityGrid.RefreshButton"):null,cssClass:"refresh-button",onClick:function(){t.refresh()}}},addButtonClick:function(){this.editItem(new Object)},editItem:function(e){this.createEntityDialog(this.getItemType(),ss.mkdel(this,function(t){var i=ss.safeCast(t,vt);if(ss.isValue(i)){i.load(e,ss.mkdel(this,function(){i.dialogOpen(this.openDialogsAsPanel)}),null);return}throw new ss.InvalidOperationException(ss.formatString("{0} doesn't implement IEditDialog!",ss.getTypeFullName(ss.getInstanceType(t))))}))},editItemOfType:function(e,t){if(ss.referenceEquals(e,this.getItemType())){this.editItem(t);return}this.createEntityDialog(e,ss.mkdel(this,function(e){var i=ss.safeCast(e,vt);if(ss.isValue(i)){i.load(t,ss.mkdel(this,function(){i.dialogOpen(this.openDialogsAsPanel)}),null);return}throw new ss.InvalidOperationException(ss.formatString("{0} doesn't implement IEditDialog!",ss.getTypeFullName(ss.getInstanceType(e))))}))},getService:function(){if(ss.isNullOrUndefined(this.$service)){var e=ss.getAttributes(ss.getInstanceType(this),Serenity.ServiceAttribute,true);if(e.length>=1){this.$service=e[0].value}else{this.$service=ss.replaceAllString(this.getEntityType(),String.fromCharCode(46),String.fromCharCode(47))}}return this.$service},getViewOptions:function(){var e=p.prototype.getViewOptions.call(this);e.url=Q.resolveUrl("~/Services/"+this.getService()+"/List");return e},getItemType:function(){return this.getEntityType()},routeDialog:function(e,t){Q.Router.dialog(this.element,t.element,ss.mkdel(this,function(){var i="";if(!ss.referenceEquals(e,this.getItemType())){i=e+"/"}if(!!(ss.isValue(t)&&ss.isValue(t.entityId))){i+="edit/"+t.entityId.toString()}else{i+="new"}return i}))},initDialog:function(e){var t=this;Si.bindToDataChange(e,this,function(e,i){t.subDialogDataChange()},true);this.routeDialog(this.getItemType(),e)},initEntityDialog:function(e,t){if(ss.referenceEquals(e,this.getItemType())){this.initDialog(t);return}var i=this;Si.bindToDataChange(t,this,function(e,t){i.subDialogDataChange()},true);this.routeDialog(e,t)},createEntityDialog:function(e,t){var i=this.getDialogTypeFor(e);var s=Serenity.Widget.create({type:i,element:null,options:this.getDialogOptionsFor(e),init:ss.mkdel(this,function(i){this.initEntityDialog(e,i);if(!ss.staticEquals(t,null)){t(i)}})});return s},getDialogOptions:function(){return{}},getDialogOptionsFor:function(e){if(ss.referenceEquals(e,this.getItemType())){return this.getDialogOptions()}return{}},getDialogTypeFor:function(e){if(ss.referenceEquals(e,this.getItemType())){return this.getDialogType()}return I.get(e)},getDialogType:function(){if(ss.isNullOrUndefined(this.$dialogType)){var e=ss.getAttributes(ss.getInstanceType(this),Serenity.DialogTypeAttribute,true);if(e.length>=1){this.$dialogType=e[0].value}else{this.$dialogType=I.get(this.getEntityType())}}return this.$dialogType}},p,[gt]);ss.initClass(M,e,{updateItems:function(){this.clearItems();var e=this.options.enumType||z.get(this.options.enumKey);var t=this.options.enumKey;if(ss.isNullOrUndefined(t)&&ss.isValue(e)){var i=ss.getAttributes(e,Serenity.EnumKeyAttribute,false);if(i.length>0){t=i[0].value}}var s=ss.Enum.getValues(e);for(var n=0;n<s.length;n++){var r=s[n];var a=ss.Enum.toString(e,r);this.addOption(ss.unbox(ss.cast(r,ss.Int32)).toString(),ss.coalesce(Q.tryGetText("Enums."+t+"."+a),a),null,false)}},getSelect2Options:function(){var e=fi.prototype.getSelect2Options.call(this);e.allowClear=ss.coalesce(this.options.allowClear,true);return e}},fi,[Serenity.ISetEditValue,Serenity.IGetEditValue,Serenity.IStringValue,Et]);ss.initClass(L,e,{});ss.initClass(R,e,{getOperators:function(){var e=[];e.push({key:X.EQ});e.push({key:X.NE});return this.appendNullableOperators(e)}},ss.makeGenericType(n,[M]),[St,kt]);ss.initClass(W,e,{get_enumKey:function(){return this.$1$EnumKeyField},set_enumKey:function(e){this.$1$EnumKeyField=e},format:function(e){return W.format(z.get(this.get_enumKey()),e.value)}},null,[It]);ss.initClass(z,e,{});ss.initInterface(Ct,e,{initializeColumn:null});ss.initClass(H,e,{format:function(e){var t=ss.safeCast(e.value,String);if(ss.isNullOrEmptyString(t)){return""}var i=H.dbFileUrl(t);var s=!ss.isNullOrEmptyString(this.get_originalNameProperty())?ss.safeCast(e.item[this.get_originalNameProperty()],String):null;s=ss.coalesce(s,"");var n=ss.formatString(ss.coalesce(this.get_displayFormat(),"{0}"),s,t,i);return"<a class='file-download-link' target='_blank' href='"+Q.attrEncode(i)+"'>"+Q.htmlEncode(n)+"</a>"},get_displayFormat:function(){return this.$1$DisplayFormatField},set_displayFormat:function(e){this.$1$DisplayFormatField=e},get_originalNameProperty:function(){return this.$1$OriginalNamePropertyField},set_originalNameProperty:function(e){this.$1$OriginalNamePropertyField=e},initializeColumn:function(e){e.referencedFields=e.referencedFields||[];if(!ss.isNullOrEmptyString(this.get_originalNameProperty())){e.referencedFields.push(this.get_originalNameProperty());return}}},null,[It,Ct]);ss.initClass(j,e,{});j.$ctor1.prototype=j.prototype;ss.initClass(K,e,{getTemplate:function(){return"<div id='~_FilterPanel'/>"},getDialogOptions:function(){var e=Serenity.TemplatedDialog.prototype.getDialogOptions.call(this);e.buttons=[{text:Q.text("Dialogs.OkButton"),click:ss.mkdel(this,function(){this.$filterPanel.search();if(this.$filterPanel.get_hasErrors()){Q.notifyError(Q.text("Controls.FilterPanel.FixErrorsMessage"),"",null);return}this.dialogClose()})},{text:Q.text("Dialogs.CancelButton"),click:ss.mkdel(this,this.dialogClose)}];e.title=Q.text("Controls.FilterPanel.DialogTitle");return e},get_filterPanel:function(){return this.$filterPanel}},Serenity.TemplatedDialog,[yt]);ss.initClass(Y,e,{filterStoreChanged:function(){ss.makeGenericType(tt,[Object]).prototype.filterStoreChanged.call(this);var e=Q.trimToNull(this.get_store().get_displayText());this.element.find(".current").toggle(ss.isValue(e));this.element.find(".reset").toggle(ss.isValue(e));var t=this.element.find(".txt");var i=e;if(ss.isNullOrUndefined(i)){i=Q.text("Controls.FilterPanel.EffectiveEmpty")}t.text("["+i+"]")},getTemplate:function(){return"<div><a class='reset'></a><a class='edit'></a><div class='current'><span class='cap'></span><a class='txt'></a></div></div>"}},ss.makeGenericType(tt,[Object]));ss.initClass(J,e,{});ss.initClass(X,e,{});ss.initClass(Z,e,{get_showInitialLine:function(){return this.$showInitialLine},set_showInitialLine:function(e){if(this.$showInitialLine!==e){this.$showInitialLine=e;if(this.$showInitialLine&&this.$rowsDiv.children().length===0){this.$addEmptyRow(false)}}},filterStoreChanged:function(){ss.makeGenericType(tt,[Object]).prototype.filterStoreChanged.call(this);this.updateRowsFromStore()},updateRowsFromStore:function(){this.$rowsDiv.empty();var e=this.get_store().get_items();for(var s=0;s<e.length;s++){var n=e[s];this.$addEmptyRow(false);var r=this.$rowsDiv.children().last();var a=r.children("div.l");a.children(".leftparen").toggleClass("active",!!n.leftParen);a.children(".rightparen").toggleClass("active",!!n.rightParen);a.children(".andor").toggleClass("or",!!n.isOr).text(Q.text(!!n.isOr?"Controls.FilterPanel.Or":"Controls.FilterPanel.And"));var l=Ei.getWidget(t).call(null,r.children("div.f").find("input.field-select"));l.set_value(n.field);this.$rowFieldChange(r);var o=Ei.getWidget(i).call(null,r.children("div.o").find("input.op-select"));o.set_value(n.operator);this.$rowOperatorChange(r);var u=this.$getFilteringFor(r);if(ss.isValue(u)){u.set_operator({key:n.operator});u.loadState(n.state)}}if(this.get_showInitialLine()&&this.$rowsDiv.children().length===0){this.$addEmptyRow(false)}this.$updateParens()},get_showSearchButton:function(){return this.$showSearchButton},set_showSearchButton:function(e){if(this.$showSearchButton!==e){this.$showSearchButton=e;this.$updateButtons()}},get_updateStoreOnReset:function(){return this.$updateStoreOnReset},set_updateStoreOnReset:function(e){if(this.$updateStoreOnReset!==e){this.$updateStoreOnReset=e}},getTemplate:function(){return Z.panelTemplate},$initButtons:function(){this.byId("AddButton").text(Q.text("Controls.FilterPanel.AddFilter")).click(ss.mkdel(this,this.$addButtonClick));this.byId("SearchButton").text(Q.text("Controls.FilterPanel.SearchButton")).click(ss.mkdel(this,this.$searchButtonClick));this.byId("ResetButton").text(Q.text("Controls.FilterPanel.ResetButton")).click(ss.mkdel(this,this.$resetButtonClick))},$searchButtonClick:function(e){e.preventDefault();this.search()},get_hasErrors:function(){return this.$rowsDiv.children().children("div.v").children("span.error").length>0},search:function(){this.$rowsDiv.children().children("div.v").children("span.error").remove();var e=[];var t=null;var s=null;for(var n=0;n<this.$rowsDiv.children().length;n++){try{s=this.$rowsDiv.children().eq(n);var r=this.$getFilteringFor(s);if(ss.isNullOrUndefined(r)){continue}var a=this.$getFieldFor(s);var l=Ei.getWidget(i).call(null,s.children("div.o").find("input.op-select")).get_value();if(ss.isNullOrUndefined(l)||l.length===0){throw new ss.ArgumentOutOfRangeException("operator",Q.text("Controls.FilterPanel.InvalidOperator"))}var o={};o.field=a.name;o.operator=l;o.isOr=s.children("div.l").children("a.andor").hasClass("or");o.leftParen=s.children("div.l").children("a.leftparen").hasClass("active");o.rightParen=s.children("div.l").children("a.rightparen").hasClass("active");var u={};r.set_operator({key:l});o.criteria=r.getCriteria(u);o.state=r.saveState();o.displayText=u.$;e.push(o)}catch(d){d=ss.Exception.wrap(d);if(ss.isInstanceOfType(d,ss.ArgumentException)){var c=ss.cast(d,ss.ArgumentException);t=c.get_message();break}else{throw d}}}if(ss.isValue(t)){$("<span/>").addClass("error").attr("title",t).appendTo(s.children("div.v"));s.children("div.v").find("input:first").focus();return}ss.clear(this.get_store().get_items());ss.arrayAddRange(this.get_store().get_items(),e);this.get_store().raiseChanged()},$addButtonClick:function(e){this.$addEmptyRow(true);e.preventDefault()},$resetButtonClick:function(e){e.preventDefault();if(this.get_updateStoreOnReset()){if(this.get_store().get_items().length>0){ss.clear(this.get_store().get_items());this.get_store().raiseChanged()}}this.$rowsDiv.empty();this.$updateButtons();if(this.get_showInitialLine()){this.$addEmptyRow(false)}},$findEmptyRow:function(){var e=null;this.$rowsDiv.children().each(function(t,i){var s=$(i).children("div.f").children("input.field-select").first();if(s.length===0){return true}var n=s.val();if(ss.isNullOrUndefined(n)||n.length===0){e=$(i);return false}return true});return e},$addEmptyRow:function(e){var i=this.$findEmptyRow();if(ss.isValue(i)){i.find("input.field-select").select2("focus");if(e){i.find("input.field-select").select2("open")}return i}var s=this.$rowsDiv.children().last().children("a.andor").hasClass("or");var n=$(Z.rowTemplate).appendTo(this.$rowsDiv);var r=n.children("div.l").hide();r.children("a.leftparen, a.rightparen").click(ss.mkdel(this,this.$leftRightParenClick));var a=r.children("a.andor").attr("title",Q.text("Controls.FilterPanel.ChangeAndOr"));if(s){a.addClass("or").text(Q.text("Controls.FilterPanel.Or"))}else{a.text(Q.text("Controls.FilterPanel.And"))}a.click(ss.mkdel(this,this.$andOrClick));n.children("a.delete").attr("title",Q.text("Controls.FilterPanel.RemoveField")).click(ss.mkdel(this,this.$deleteRowClick));var l=new t(n.children("div.f").children("input"),this.get_store().get_fields());Ei.changeSelect2(l,ss.mkdel(this,this.$onRowFieldChange));this.$updateParens();this.$updateButtons();n.find("input.field-select").select2("focus");if(e){n.find("input.field-select").select2("open")}return n},$onRowFieldChange:function(e){var t=$(e.target).closest("div.filter-line");this.$rowFieldChange(t);var i=t.children("div.o").find("input.op-select");i.select2("focus")},$rowFieldChange:function(e){e.removeData("Filtering");var i=Ei.getWidget(t).call(null,e.children("div.f").find("input.field-select"));var s=i.get_value();var n=ss.isNullOrUndefined(s)||s==="";this.$removeFiltering(e);this.$populateOperatorList(e);this.$rowOperatorChange(e);this.$updateParens();this.$updateButtons()},$removeFiltering:function(e){e.data("Filtering",null);e.data("FilteringField",null)},$populateOperatorList:function(e){e.children("div.o").html("");var t=this.$getFilteringFor(e);if(ss.isNullOrUndefined(t)){return}var s=e.children("div.o").html("<input/>").children().attr("type","hidden").addClass("op-select");var n=t.getOperators();Ei.changeSelect2(new i(s,n),ss.mkdel(this,this.$onRowOperatorChange))},$getFieldFor:function(e){if(e.length===0){return null}var i=Ei.getWidget(t).call(null,e.children("div.f").find("input.field-select"));if(Q.isEmptyOrNull(i.get_value())){return null}return this.get_store().get_fieldByName()[i.get_value()]},$getFilteringFor:function(e){var t=this.$getFieldFor(e);if(ss.isNullOrUndefined(t)){return null}var i=ss.cast(e.data("Filtering"),St);if(ss.isValue(i)){return i}var s=J.get(ss.coalesce(t.filteringType,"String"));var n=e.children("div.v");i=ss.cast(ss.createInstance(s),St);oi.set(i,t.filteringParams);i.set_container(n);i.set_field(t);e.data("Filtering",i);return i},$onRowOperatorChange:function(e){var t=$(e.target).closest("div.filter-line");this.$rowOperatorChange(t);var i=t.children("div.v").find(":input:visible").first();try{i.focus()}catch(s){}},$rowOperatorChange:function(e){if(e.length===0){return}var t=e.children("div.v");t.html("");var s=this.$getFilteringFor(e);if(ss.isNullOrUndefined(s)){return}var n=Ei.getWidget(i).call(null,e.children("div.o").find("input.op-select"));if(Q.isEmptyOrNull(n.get_value())){return}var r=s.getOperators().filter(function(e){return ss.referenceEquals(e.key,n.get_value())});var a=r.length>0?r[0]:null;if(ss.isNullOrUndefined(a)){return}s.set_operator(a);s.createEditor()},$deleteRowClick:function(e){e.preventDefault();var t=$(e.target).closest("div.filter-line");t.remove();if(this.$rowsDiv.children().length===0){this.search()}this.$updateParens();this.$updateButtons()},$updateButtons:function(){this.byId("SearchButton").toggle(this.$rowsDiv.children().length>=1&&this.$showSearchButton);this.byId("ResetButton").toggle(this.$rowsDiv.children().length>=1)},$andOrClick:function(e){e.preventDefault();var t=$(e.target).toggleClass("or");t.text(Q.text("Controls.FilterPanel."+(t.hasClass("or")?"Or":"And")))},$leftRightParenClick:function(e){e.preventDefault();
$(e.target).toggleClass("active");this.$updateParens()},$updateParens:function(){var e=this.$rowsDiv.children();if(e.length===0){return}e.removeClass("paren-start");e.removeClass("paren-end");e.children("div.l").css("display",e.length===1?"none":"block");e.first().children("div.l").children("a.rightparen, a.andor").css("visibility","hidden");for(var t=1;t<e.length;t++){var i=e.eq(t);i.children("div.l").css("display","block").children("a.lefparen, a.andor").css("visibility","visible")}var s=false;for(var n=0;n<e.length;n++){var r=e.eq(n);var a=r.children("div.l");var l=a.children("a.leftparen");var o=a.children("a.rightparen");if(o.hasClass("active")&&s){s=false;if(n>0){e.eq(n-1).addClass("paren-end")}}if(l.hasClass("active")){s=true;if(n>0){r.addClass("paren-start")}}}}},ss.makeGenericType(tt,[Object]));ss.initClass(et,e,{get_fields:function(){return this.$1$FieldsField},set_fields:function(e){this.$1$FieldsField=e},get_fieldByName:function(){return this.$1$FieldByNameField},set_fieldByName:function(e){this.$1$FieldByNameField=e},get_items:function(){return this.$1$ItemsField},set_items:function(e){this.$1$ItemsField=e},raiseChanged:function(){this.$displayText=null;if(!ss.staticEquals(this.$changed,null)){this.$changed(this,ss.EventArgs.Empty)}},add_changed:function(e){this.$changed=ss.delegateCombine(this.$changed,e)},remove_changed:function(e){this.$changed=ss.delegateRemove(this.$changed,e)},get_activeCriteria:function(){return et.getCriteriaFor(this.get_items())},get_displayText:function(){if(ss.isNullOrUndefined(this.$displayText)){this.$displayText=et.getDisplayTextFor(this.get_items())}return this.$displayText}});ss.initClass(it,e,{$storeInitialSize:function(){if(!!this.element.data("flexify-init")){return}var e=this.element;var t=this.options.designWidth;if(ss.isNullOrUndefined(t)){t=this.element.width()}e.data("flexify-width",t);var i=this.element;var s=this.options.designHeight;if(ss.isNullOrUndefined(s)){s=this.element.height()}i.data("flexify-height",s);this.element.data("flexify-init",true);var n=this;this.element.bind("resize."+this.uniqueName,function(e,t){n.$resizeElements()});this.element.bind("resizestop."+this.uniqueName,function(e,t){n.$resizeElements()});var r=this.element.find(".ui-tabs");if(r.length>0){r.bind("tabsactivate."+this.uniqueName,function(){n.$resizeElements()})}if(ss.isValue(this.options.designWidth)||ss.isValue(this.options.designHeight)){n.$resizeElements()}},$getXFactor:function(e){var t=null;if(!ss.staticEquals(this.options.getXFactor,null)){t=this.options.getXFactor(e)}if(ss.isNullOrUndefined(t)){t=e.data("flex-x")}return ss.coalesce(t,1)},$getYFactor:function(e){var t=null;if(!ss.staticEquals(this.options.getYFactor,null)){t=this.options.getYFactor(e)}if(ss.isNullOrUndefined(t)){t=e.data("flex-y")}return ss.coalesce(t,0)},$resizeElements:function(){var e=this.element.width();var t=this.element.data("flexify-width");if(ss.isNullOrUndefined(t)){this.element.data("flexify-width",e);t=e}var i=this.element.height();var s=this.element.data("flexify-height");if(ss.isNullOrUndefined(s)){this.element.data("flexify-height",i);s=i}this.$xDifference=e-ss.unbox(t);this.$yDifference=i-ss.unbox(s);var n=this;var r=this.element;var a=this.element.find(".ui-tabs-panel");if(a.length>0){r=a.filter(":visible")}r.find(".flexify").add(a.filter(".flexify:visible")).each(function(e,t){n.$resizeElement($(t))})},$resizeElement:function(e){var t=this.$getXFactor(e);if(t!==0){var i=e.data("flexify-width");if(ss.isNullOrUndefined(i)){var s=e.width();e.data("flexify-width",s);i=s}e.width(ss.unbox(i)+t*this.$xDifference|0)}var n=this.$getYFactor(e);if(n!==0){var r=e.data("flexify-height");if(ss.isNullOrUndefined(r)){var a=e.height();e.data("flexify-height",a);r=a}e.height(ss.unbox(r)+n*this.$yDifference|0)}if(e.hasClass("require-layout")){e.triggerHandler("layout")}}},Serenity.Widget);ss.initClass(st,e,{});ss.initClass(nt,e,{get_map:function(){return this.$map}},Serenity.Widget);ss.initClass(rt,e,{});ss.initClass(at,e,{clear:function(){ss.clearKeys(this.$include);this.$updateSelectAll()},selectKeys:function(e){for(var t=0;t<e.length;t++){var i=e[t];this.$include[i]=true}this.$updateSelectAll()},resetCheckedAndRefresh:function(){this.$include={};this.$updateSelectAll();this.$grid.getView().populate()},$updateSelectAll:function(){var e=this.$grid.getElement().find(".select-all-header .slick-column-name .select-all-items");if(ss.isValue(e)){e.toggleClass("checked",ss.getKeyCount(this.$include)>0&&this.$grid.getView().getItems().length===ss.getKeyCount(this.$include))}},getSelectedKeys:function(){return Object.keys(this.$include)},getSelectedAsInt32:function(){return Object.keys(this.$include).map(function(e){return parseInt(e)})},getSelectedAsInt64:function(){return Object.keys(this.$include).map(function(e){return parseInt(e)})},setSelectedKeys:function(e){this.clear();for(var t=0;t<e.length;t++){var i=e[t];this.$include[i]=true}this.$updateSelectAll()}});ss.initClass(lt,e,{});ss.initClass(ot,e,{});ss.initClass(ut,e,{});ss.initClass(dt,e,{});ss.initClass(ct,e,{instanceReady:function(e){this.$instanceReady=true;$(e.editor.container.$).addClass(this.element.attr("class"));this.element.addClass("select2-offscreen").css("display","block");e.editor.setData(this.element.val());e.editor.setReadOnly(this.get_readOnly())},getLanguage:function(){var e=ss.coalesce(Q.trimToNull($("html").attr("lang")),"en");if(!!CKEDITOR.lang.languages[e]){return e}if(e.indexOf(String.fromCharCode(45))>=0){e=e.split(String.fromCharCode(45))[0]}if(!!CKEDITOR.lang.languages[e]){return e}return"en"},getConfig:function(){var e=this;return{customConfig:"",language:this.getLanguage(),bodyClass:"s-HtmlContentBody",on:{instanceReady:function(t){e.instanceReady(t)},change:function(t){t.editor.updateElement();e.element.triggerHandler("change")}},toolbarGroups:[{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"insert",groups:["links","insert","blocks","bidi","list","indent"]},{name:"forms",groups:["forms","mode","document","doctools","others","about","tools"]},{name:"colors"},{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"align"},{name:"styles"}],removeButtons:"SpecialChar,Anchor,Subscript,Styles",format_tags:"p;h1;h2;h3;pre",removeDialogTabs:"image:advanced;link:advanced",contentsCss:Q.resolveUrl("~/Content/site/site.htmlcontent.css"),entities:false,entities_latin:false,entities_greek:false,autoUpdateElement:true,height:ss.isNullOrUndefined(this.options.rows)||this.options.rows===0?null:ss.Nullable$1.mul(this.options.rows,20)+"px"}},$getEditorInstance:function(){var e=this.element.attr("id");return CKEDITOR.instances[e]},destroy:function(){var e=this.$getEditorInstance();if(ss.isValue(e)){e.destroy(true)}Serenity.Widget.prototype.destroy.call(this)},get_value:function(){var e=this.$getEditorInstance();if(this.$instanceReady&&ss.isValue(e)){return e.getData()}else{return this.element.val()}},set_value:function(e){var t=this.$getEditorInstance();this.element.val(e);if(this.$instanceReady&&ss.isValue(t)){t.setData(e)}},get_readOnly:function(){return!ss.isNullOrEmptyString(this.element.attr("disabled"))},set_readOnly:function(e){if(this.get_readOnly()!==e){if(e){this.element.attr("disabled","disabled")}else{this.element.removeAttr("disabled")}var t=this.$getEditorInstance();if(this.$instanceReady&&ss.isValue(t)){t.setReadOnly(e)}}}},Serenity.Widget,[Serenity.IStringValue,Et]);ss.initClass(ft,e,{});ss.initClass(ht,e,{getConfig:function(){var e=ct.prototype.getConfig.call(this);e.removeButtons+=",Cut,Copy,Paste,BulletedList,NumberedList,Indent,Outdent,SpecialChar,Subscript,Superscript,Styles,PasteText,PasteFromWord,Strike,Link,Unlink,CreatePlaceholder,Image,Table,HorizontalRule,Source,Maximize,Format,Font,FontSize,Anchor,Blockquote,CreatePlaceholder,BGColor,JustifyLeft,JustifyCenter,JustifyRight,JustifyBlock,Superscript,RemoveFormat";e.removePlugins+=",elementspath";return e}},ct,[Serenity.IStringValue,Et]);ss.initClass(pt,e,{getConfig:function(){var e=ct.prototype.getConfig.call(this);e.removeButtons+=",Image,Table,HorizontalRule,Anchor,Blockquote,CreatePlaceholder,BGColor,JustifyLeft,JustifyCenter,JustifyRight,JustifyBlock,Superscript";return e}},ct,[Serenity.IStringValue,Et]);ss.initClass(bt,e,{addFileButtonText:function(){return Q.text("Controls.ImageUpload.AddFileButton")},getToolButtons:function(){var e=this;var t=[];t.push({title:this.addFileButtonText(),cssClass:"add-file-button",onClick:function(){}});t.push({title:"",hint:Q.text("Controls.ImageUpload.DeleteButtonHint"),cssClass:"delete-button",onClick:function(){e.entity=null;e.populate();e.updateInterface()}});return t},populate:function(){var e=this.options.displayFileName||!Q.isTrimmedEmpty(this.options.originalNameProperty);if(ss.isNullOrUndefined(this.entity)){Ti.populateFileSymbols(this.fileSymbols,null,e,this.options.urlPrefix)}else{var t=this.fileSymbols;var i=[];i.push(this.entity);Ti.populateFileSymbols(t,i,e,this.options.urlPrefix)}},updateInterface:function(){var e=this.toolbar.findButton("add-file-button");var t=this.toolbar.findButton("delete-button");e.toggleClass("disabled",this.get_readOnly());t.toggleClass("disabled",this.get_readOnly()||ss.isNullOrUndefined(this.entity))},get_readOnly:function(){return!ss.isNullOrUndefined(this.uploadInput.attr("disabled"))},set_readOnly:function(e){if(this.get_readOnly()!==e){if(e){this.uploadInput.attr("disabled","disabled")}else{this.uploadInput.removeAttr("disabled")}this.updateInterface()}},get_value:function(){if(ss.isNullOrUndefined(this.entity)){return null}var e=$.extend({},this.entity);return e},set_value:function(e){if(ss.isValue(e)){if(ss.isNullOrUndefined(e.Filename)){this.entity=null}else{this.entity=$.extend({},e)}}else{this.entity=null}this.populate();this.updateInterface()},getEditValue:function(e,t){t[e.name]=ss.isNullOrUndefined(this.entity)?null:Q.trimToNull(this.entity.Filename)},setEditValue:function(e,t){var i={};i.Filename=ss.cast(e[t.name],String);if(ss.isNullOrEmptyString(this.options.originalNameProperty)){if(this.options.displayFileName){var s=ss.coalesce(i.Filename,"");var n=ss.lastIndexOfAnyString(s,[47,92]);if(n>=0){i.OriginalName=s.substr(n+1)}else{i.OriginalName=s}}}else{i.OriginalName=ss.cast(e[this.options.originalNameProperty],String)}this.set_value(i)}},Serenity.Widget,[Serenity.IGetEditValue,Serenity.ISetEditValue,Et]);ss.initClass($t,e,{});ss.initClass(Tt,e,{});ss.initClass(_t,e,{get_value$1:function(){var e=this.element.autoNumeric("get");if(!!Q.isTrimmedEmpty(ss.cast(e,String))){return null}else{return ss.cast(parseInt(ss.cast(e,String),10),ss.Int32)}},set_value$1:function(e){if(ss.isNullOrUndefined(e)||e===""){this.element.val("")}else{this.element.autoNumeric("set",e)}},get_value:function(){return this.get_value$1()},set_value:function(e){this.set_value$1(ss.Int32.trunc(e))}},Serenity.Widget,[Serenity.IDoubleValue]);ss.initClass(Ot,e,{});ss.initClass(xt,e,{getOperators:function(){return this.appendNullableOperators(this.appendComparisonOperators([]))}},ss.makeGenericType(n,[_t]),[St,kt]);ss.initInterface(Ft,e,{get_required:null,set_required:null});ss.initClass(Nt,e,{},wt,[Serenity.ISetEditValue,Serenity.IGetEditValue,Serenity.IStringValue,Et]);ss.initClass(Vt,e,{getOperators:function(){var e=[];e.push({key:X.EQ});e.push({key:X.NE});e.push({key:X.contains});e.push({key:X.startsWith});return this.appendNullableOperators(e)},useEditor:function(){return ss.referenceEquals(this.get_operator().key,X.EQ)||ss.referenceEquals(this.get_operator().key,X.NE)},useIdField:function(){return this.useEditor()},getEditorText:function(){if(this.useEditor()){return this.editor.get_text()}return r.prototype.getEditorText.call(this)}},ss.makeGenericType(n,[Nt]),[St,kt]);ss.initClass(Dt,e,{});ss.initClass(At,e,{format:function(e){return At.format(e.value)}},null,[It]);ss.initClass(Pt,e,{addFileButtonText:function(){return Q.text("Controls.ImageUpload.AddFileButton")},getToolButtons:function(){var e=this;var t=[];t.push({title:this.addFileButtonText(),cssClass:"add-file-button",onClick:function(){}});return t},populate:function(){Ti.populateFileSymbols(this.fileSymbols,this.entities,true,this.options.urlPrefix);this.fileSymbols.children().each(ss.mkdel(this,function(e,t){var i=e;$("<a class='delete'></a>").appendTo($(t).children(".filename")).click(ss.mkdel(this,function(e){e.preventDefault();ss.removeAt(this.entities,i);this.populate()}))}))},updateInterface:function(){var e=this.toolbar.findButton("add-file-button");e.toggleClass("disabled",this.get_readOnly())},get_readOnly:function(){return!ss.isNullOrUndefined(this.uploadInput.attr("disabled"))},set_readOnly:function(e){if(this.get_readOnly()!==e){if(e){this.uploadInput.attr("disabled","disabled")}else{this.uploadInput.removeAttr("disabled")}this.updateInterface()}},get_value:function(){return this.entities.map(function(e){return $.extend({},e)})},set_value:function(e){this.entities=(e||[]).map(function(e){return $.extend({},e)});this.populate();this.updateInterface()},getEditValue:function(e,t){if(this.get_jsonEncodeValue()){t[e.name]=$.toJSON(this.get_value())}else{t[e.name]=this.get_value()}},setEditValue:function(e,t){var i=e[t.name];if(ss.isInstanceOfType(i,String)){var s=ss.coalesce(Q.trimToNull(ss.safeCast(e[t.name],String)),"[]");if(ss.startsWithString(s,"[")&&ss.endsWithString(s,"]")){this.set_value($.parseJSON(s))}else{var n=[];n.push({Filename:s,OriginalName:"UnknownFile"});this.set_value(n)}}else{this.set_value(ss.cast(i,Array))}},get_jsonEncodeValue:function(){return this.$4$JsonEncodeValueField},set_jsonEncodeValue:function(e){this.$4$JsonEncodeValueField=e}},Serenity.Widget,[Serenity.IGetEditValue,Serenity.ISetEditValue,Et]);ss.initClass(Qt,e,{get_displayFormat:function(){return this.$1$DisplayFormatField},set_displayFormat:function(e){this.$1$DisplayFormatField=e},format:function(e){return Qt.format(e.value,this.get_displayFormat())}},null,[It]);ss.initClass(Ut,e,{});ss.initClass(Bt,e,{},Serenity.StringEditor);ss.initClass(Gt,e,{get_value:function(){return this.element.val()},set_value:function(e){this.element.val(e)}},Serenity.Widget,[Serenity.IStringValue]);ss.initClass(qt,e,{validate:function(e){return qt.$validate(e,this.options.multiple,this.options.internal,this.options.mobile,this.options.allowInternational,this.options.allowExtension)},formatValue:function(){this.element.val(this.getFormattedValue())},getFormattedValue:function(){var e=this.element.val();var t=null;var i=ss.mkdel(this,function(e){if(ss.isNullOrEmptyString(e)||this.options.internal){return t(e)}e=ss.coalesce(e,"").trim();if(ss.startsWithString(e,"+")){return e}if(e.indexOf(String.fromCharCode(47))>0){var i=ss.netSplit(e,[47].map(function(e){return String.fromCharCode(e)}));if(i.length!==2){return e}if(i[0].length<5){return e}var s={};if(!ss.Int32.tryParse(i[1],s)){return e}return i[0]+" / "+s.$.toString()}return t(e)});if(!this.options.internal&&!this.options.mobile){t=qt.$formatPhoneTurkey}else if(this.options.mobile){t=qt.$formatMobileTurkey}else if(this.options.internal){t=qt.$formatPhoneInternal}if(!ss.staticEquals(t,null)){if(this.options.multiple){return qt.$formatMulti(e,i)}else{return i(e)}}return e},get_value:function(){return this.getFormattedValue()},set_value:function(e){this.element.val(e)}},Serenity.Widget,[Serenity.IStringValue]);ss.initClass(Mt,e,{});ss.initClass(Lt,e,{});ss.initClass(Rt,e,{destroy:function(){if(ss.isValue(this.options.menu)){this.options.menu.remove()}Serenity.Widget.prototype.destroy.call(this)}},Serenity.Widget);ss.initClass(Wt,e,{},Rt);ss.initClass(zt,e,{byId$1:function(e){return $("#"+this.idPrefix+e)},byId:function(e){return function(t){return Ei.getWidget(e).call(null,this.byId$1(t))}},w:function(e,t){return Serenity.WX.getWidget(t)($("#"+this.idPrefix+e))}});ss.initClass(Ht,e,{initializeAsync:function(){return Serenity.Widget.prototype.initializeAsync.call(this).then(ss.mkdel(this,this.$initPropertyGridAsync),null).then(ss.mkdel(this,function(){this.loadInitialEntity()}),null)},loadInitialEntity:function(){if(ss.isValue(this.propertyGrid)){this.propertyGrid.load(new Object)}},getDialogOptions:function(){var e=Serenity.TemplatedDialog.prototype.getDialogOptions.call(this);e.buttons=this.getDialogButtons();e.width=400;return e},okClick:function(){if(!this.validateBeforeSave()){return}this.okClickValidated()},okClickValidated:function(){this.dialogClose()},cancelClick:function(){this.dialogClose()},getDialogButtons:function(){var e=[];e.push({text:Q.text("Dialogs.OkButton"),click:ss.mkdel(this,this.okClick)});e.push({text:Q.text("Dialogs.CancelButton"),click:ss.mkdel(this,this.cancelClick)});return e},destroy:function(){if(ss.isValue(this.propertyGrid)){this.propertyGrid.destroy();this.propertyGrid=null}if(ss.isValue(this.validator)){this.byId("Form").remove();this.validator=null}Serenity.TemplatedDialog.prototype.destroy.call(this)},get_entity:function(){return this.$entity},set_entity:function(e){this.$entity=e||new Object},get_entityId:function(){return this.$entityId},set_entityId:function(e){this.$entityId=e},updateTitle:function(){},onDialogOpen:function(){Serenity.TemplatedDialog.prototype.onDialogOpen.call(this)},$initPropertyGrid:function(){var e=this.byId("PropertyGrid");if(e.length<=0){return}var t=this.getPropertyGridOptions();this.propertyGrid=new Kt(e,t).init(null);if(this.element.closest(".ui-dialog").hasClass("s-Flexify")){this.propertyGrid.element.children(".categories").flexHeightOnly(1)}},$initPropertyGridAsync:function(){return Promise.resolve().then(ss.mkdel(this,function(){var e=this.byId("PropertyGrid");if(e.length<=0){return Promise.resolve()}return this.getPropertyGridOptionsAsync().then(ss.mkdel(this,function(t){this.propertyGrid=new Kt(e,t);if(this.element.closest(".ui-dialog").hasClass("s-Flexify")){this.propertyGrid.element.children(".categories").flexHeightOnly(1)}return this.propertyGrid.initialize()}),null)}),null)},getFormKey:function(){var e=ss.getAttributes(ss.getInstanceType(this),Serenity.FormKeyAttribute,true);if(e.length>=1){return e[0].value}else{var t=ss.getTypeFullName(ss.getInstanceType(this));var i=t.indexOf(".");if(i>=0){t=t.substring(i+1)}if(ss.endsWithString(t,"Dialog")){t=t.substr(0,t.length-6)}else if(ss.endsWithString(t,"Panel")){t=t.substr(0,t.length-5)}return t}},getPropertyItems:function(){var e=this.getFormKey();return Q.getForm(e)},getPropertyItemsAsync:function(){return Promise.resolve().then(ss.mkdel(this,function(){var e=this.getFormKey();return Q.getFormAsync(e)}),null)},getPropertyGridOptions:function(){var e=Jt.$ctor();e.idPrefix=this.idPrefix;e.items=this.getPropertyItems();e.mode=1;e.useCategories=false;e.localTextPrefix="Forms."+this.getFormKey()+".";return e},getPropertyGridOptionsAsync:function(){return this.getPropertyItemsAsync().then(ss.mkdel(this,function(e){var t=Jt.$ctor();t.idPrefix=this.idPrefix;t.items=e;t.mode=1;t.useCategories=false;t.localTextPrefix="Forms."+this.getFormKey()+".";return t}),null)},validateBeforeSave:function(){return this.validator.form()},getSaveEntity:function(){var e=new Object;if(ss.isValue(this.propertyGrid)){this.propertyGrid.save(e)}return e}},Serenity.TemplatedDialog,[yt]);ss.initClass(Xt,e,{});ss.initClass(jt,e,{},Xt);ss.initClass(Kt,e,{$createItems:function(e,t){var i={};var s=e;var n=this.options.useCategories&&Q.any(t,function(e){return!ss.isNullOrEmptyString(e.category)});if(this.options.useCategories){var r=$("<div/>").addClass("category-links");i=this.$createCategoryLinks(r,t);if(ss.getKeyCount(i)>1){r.appendTo(e)}else{r.find("a.category-link").unbind("click",Kt.$categoryLinkClick).remove()}}s=$("<div/>").addClass("categories").appendTo(e);var a;if(n){a=s}else{a=$("<div/>").addClass("category").appendTo(s)}var l=null;for(var o=0;o<t.length;o++){var u=t[o];var d=u.category;if(ss.isNullOrUndefined(d)){d=ss.coalesce(this.options.defaultCategory,"")}var c=d;if(n&&!ss.referenceEquals(l,c)){var f=this.$createCategoryDiv(s,i,c,u.collapsible!==true?null:ss.coalesce(u.collapsed,false));if(ss.isNullOrUndefined(l)){f.addClass("first-category")}l=c;a=f}var h=this.$createField(a,u);this.$editors.push(h)}},destroy:function(){if(ss.isValue(this.$editors)){for(var e=0;e<this.$editors.length;e++){this.$editors[e].destroy()}this.$editors=null}this.element.find("a.category-link").unbind("click",Kt.$categoryLinkClick).remove();Serenity.Widget.prototype.destroy.call(this)},$createCategoryDiv:function(e,t,i,s){var n=$("<div/>").addClass("category").appendTo(e);var r=$("<div/>").addClass("category-title").append($("<a/>").addClass("category-anchor").text(this.$determineText(i,function(e){return e+"Categories."+i})).attr("name",this.options.idPrefix+"Category"+t[i].toString())).appendTo(n);if(ss.isValue(s)){n.addClass(s===true?"collapsible collapsed":"collapsible");var a=$("<i/>").addClass(s===true?"fa fa-plus":"fa fa-minus").appendTo(r);r.click(function(e){n.toggleClass("collapsed");a.toggleClass("fa-plus").toggleClass("fa-minus")})}return n},$determineText:function(e,t){if(ss.isValue(e)&&!ss.startsWithString(e,"`")){var i=Q.tryGetText(e);if(ss.isValue(i)){return i}}if(ss.isValue(e)&&ss.startsWithString(e,"`")){e=e.substr(1)}if(!Q.isEmptyOrNull(this.options.localTextPrefix)){var s=Q.tryGetText(t(this.options.localTextPrefix));if(ss.isValue(s)){return s}}return e},$createField:function(e,t){var i=$("<div/>").addClass("field").addClass(t.name).data("PropertyItem",t).appendTo(e);if(!ss.isNullOrEmptyString(t.cssClass)){i.addClass(t.cssClass)}if(!ss.isNullOrEmptyString(t.formCssClass)){i.addClass(t.formCssClass);if(t.formCssClass.indexOf("line-break-")>=0){var s=t.formCssClass.split(String.fromCharCode(32));if(ss.indexOf(s,"line-break-xs")>=0){$("<div class='line-break' style='width: 100%' />").insertBefore(i)}else if(ss.indexOf(s,"line-break-sm")>=0){$("<div class='line-break hidden-xs' style='width: 100%' />").insertBefore(i)}else if(ss.indexOf(s,"line-break-md")>=0){$("<div class='line-break hidden-sm' style='width: 100%' />").insertBefore(i)}else if(ss.indexOf(s,"line-break-lg")>=0){$("<div class='line-break hidden-md' style='width: 100%' />").insertBefore(i)}}}var n=this.options.idPrefix+t.name;var r=this.$determineText(t.title,function(e){return e+t.name});var a=this.$determineText(t.hint,function(e){return e+t.name+"_Hint"});var l=this.$determineText(t.placeholder,function(e){return e+t.name+"_Placeholder"});var o=$("<label/>").addClass("caption").attr("for",n);var u=a;if(ss.isNullOrUndefined(u)){u=ss.coalesce(r,"")}var d=o.attr("title",u).html(ss.coalesce(r,"")).appendTo(i);if(!ss.isNullOrEmptyString(t.labelWidth)){if(t.labelWidth==="0"){d.hide()}else{d.css("width",t.labelWidth)}}if(t.required===true){$("<sup>*</sup>").attr("title",Q.text("Controls.PropertyGrid.RequiredHint")).prependTo(d)}var c=A.get(ss.coalesce(t.editorType,"String"));var f=ss.getAttributes(c,Serenity.ElementAttribute,true);var h=f.length>0?f[0].value:"<input/>";var p=Serenity.Widget.elementFor(c).addClass("editor").addClass("flexify").attr("id",n).appendTo(i);if(p.is(":input")){p.attr("name",ss.coalesce(t.name,""))}if(!Q.isEmptyOrNull(l)){p.attr("placeholder",l)}var m=t.editorParams;var g=null;var y=ss.getAttributes(c,Serenity.OptionsTypeAttribute,true);if(ss.isValue(y)&&y.length>0){g=y[0].optionsType}var v;if(ss.isValue(g)){m=$.extend(ss.createInstance(g),t.editorParams);v=new c(p,m)}else{m=$.extend(new Object,t.editorParams);v=new c(p,m)}v.initialize();if(ss.isInstanceOfType(v,Serenity.BooleanEditor)&&(ss.isNullOrUndefined(t.editorParams)||!!!t.editorParams["labelFor"])){d.removeAttr("for")}if(ss.isInstanceOfType(v,ni)&&(ss.isNullOrUndefined(t.editorParams)||!!!t.editorParams["labelFor"])){d.removeAttr("for")}if(ss.isValue(t.maxLength)){Kt.$setMaxLength(v,ss.unbox(t.maxLength))}if(ss.isValue(t.editorParams)){oi.set(v,t.editorParams)}$("<div/>").addClass("vx").appendTo(i);$("<div/>").addClass("clear").appendTo(i);return v},$getCategoryOrder:function(e){var t=0;var i={};var s=Q.trimToNull(this.options.categoryOrder);if(ss.isValue(s)){var n=s.split(";");for(var r=0;r<n.length;r++){var a=n[r];var l=Q.trimToNull(a);if(ss.isNullOrUndefined(l)){continue}if(ss.isValue(i[l])){continue}i[l]=t++}}for(var o=0;o<e.length;o++){var u=e[o];var d=u.category;if(ss.isNullOrUndefined(d)){d=ss.coalesce(this.options.defaultCategory,"")}var c=d;if(ss.isNullOrUndefined(i[c])){i[c]=t++}}return i},$createCategoryLinks:function(e,t){var i=0;var s={};var n={};for(var r=0;r<t.length;r++){var a=t[r];var l=a.name;var o=a.category;if(ss.isNullOrUndefined(o)){o=ss.coalesce(this.options.defaultCategory,"")}n[l]=o;s[a.name]=i++}var u=this;var d=this.$getCategoryOrder(t);t.sort(function(e,t){var i=0;var r=n[e.name];var a=n[t.name];if(!ss.referenceEquals(r,a)){var l=d[r];var o=d[a];if(ss.isValue(l)&&ss.isValue(o)){i=ss.unbox(l)-ss.unbox(o)}else if(ss.isValue(l)){i=-1}else if(ss.isValue(o)){i=1}}if(i===0){i=ss.compareStrings(r,a)}if(i===0){i=ss.compare(s[e.name],s[t.name])}return i});var c={};for(var f=0;f<t.length;f++){var h=t[f];var p={$:n[h.name]};if(!ss.keyExists(c,p.$)){var m=ss.getKeyCount(c)+1;c[p.$]=m;if(m>1){$("<span/>").addClass("separator").text("|").prependTo(e)}$("<a/>").addClass("category-link").text(this.$determineText(p.$,ss.mkdel({category:p},function(e){return e+"Categories."+this.category.$}))).attr("tabindex","-1").attr("href","#"+this.options.idPrefix+"Category"+m.toString()).click(Kt.$categoryLinkClick).prependTo(e)}}$("<div/>").addClass("clear").appendTo(e);return c},get_editors:function(){return this.$editors},get_items:function(){return this.$items},get_idPrefix:function(){return this.options.idPrefix},get_mode:function(){return this.options.mode},set_mode:function(e){if(this.options.mode!==e){this.options.mode=e;this.$updateInterface()}},load:function(e){for(var t=0;t<this.$editors.length;t++){var i=this.$items[t];var s=this.$editors[t];if(!!(this.get_mode()===1&&!ss.isNullOrUndefined(i.defaultValue)&&typeof e[i.name]==="undefined")){e[i.name]=i.defaultValue}P.loadValue(s,i,e)}},save:function(e){for(var t=0;t<this.$editors.length;t++){var i=this.$items[t];if(i.oneWay!==true&&this.$canModifyItem(i)){var s=this.$editors[t];P.saveValue(s,i,e)}}},$canModifyItem:function(e){if(this.get_mode()===1){if(e.insertable===false){return false}if(ss.isNullOrUndefined(e.insertPermission)){return true}return Q.Authorization.hasPermission(e.insertPermission)}else if(this.get_mode()===2){if(e.updatable===false){return false}if(ss.isNullOrUndefined(e.updatePermission)){return true}return Q.Authorization.hasPermission(e.updatePermission)}return true},$updateInterface:function(){for(var e=0;e<this.$editors.length;e++){var t=this.$items[e];var i=this.$editors[e];var s=t.readOnly===true||!this.$canModifyItem(t);P.setReadOnly(i,s);P.setRequired(i,!s&&!!t.required&&t.editorType!=="Boolean");if(t.visible===false||ss.isValue(t.readPermission)||ss.isValue(t.insertPermission)||ss.isValue(t.updatePermission)||t.hideOnInsert===true||t.hideOnUpdate===true){var n=ss.isValue(t.readPermission)&&!Q.Authorization.hasPermission(t.readPermission)||t.visible===false||this.get_mode()===1&&t.hideOnInsert===true||this.get_mode()===2&&t.hideOnUpdate===true;Ei.getGridField(i).toggle(!n)}}},enumerateItems:function(e){for(var t=0;t<this.$editors.length;t++){var i=this.$items[t];var s=this.$editors[t];e(i,s)}}},Serenity.Widget);ss.initEnum(Yt,e,{insert:1,update:2});ss.initClass(Jt,e,{});ss.initClass(Zt,e,{});ss.initClass(Ci,e,{destroy:function(){if(ss.isValue(this.tabs)){this.tabs.tabs("destroy")}if(ss.isValue(this.toolbar)){this.toolbar.destroy();this.toolbar=null}if(ss.isValue(this.validator)){this.byId("Form").remove();this.validator=null}Serenity.Widget.prototype.destroy.call(this)},initToolbar:function(){var e=this.byId("Toolbar");if(e.length===0){return}var t={buttons:this.getToolbarButtons()};this.toolbar=new bi(e,t)},getToolbarButtons:function(){return[]},getValidatorOptions:function(){return{}},initValidator:function(){var e=this.byId("Form");if(e.length>0){var t=this.getValidatorOptions();this.validator=e.validate(Q.validateOptions(t))}},resetValidation:function(){if(ss.isValue(this.validator)){this.validator.resetAll()}},validateForm:function(){return ss.isNullOrUndefined(this.validator)||!!this.validator.form()},arrange:function(){this.element.find(".require-layout").filter(":visible").each(function(e,t){$(t).triggerHandler("layout")})},initTabs:function(){var e=this.byId("Tabs");if(e.length===0){return}this.tabs=e.tabs({})}},Serenity.TemplatedWidget);ss.initClass(ei,e,{initializeAsync:function(){return Serenity.Widget.prototype.initializeAsync.call(this).then(ss.mkdel(this,this.$initPropertyGridAsync),null).then(ss.mkdel(this,function(){this.loadInitialEntity()}),null)},loadInitialEntity:function(){if(ss.isValue(this.propertyGrid)){this.propertyGrid.load(new Object)}},destroy:function(){if(ss.isValue(this.propertyGrid)){this.propertyGrid.destroy();this.propertyGrid=null}if(ss.isValue(this.validator)){this.byId("Form").remove();this.validator=null}Ci.prototype.destroy.call(this)},get_entity:function(){return this.$entity},set_entity:function(e){this.$entity=e||new Object},get_entityId:function(){return this.$entityId},set_entityId:function(e){this.$entityId=e},$initPropertyGrid:function(){var e=this.byId("PropertyGrid");if(e.length<=0){return}var t=this.getPropertyGridOptions();this.propertyGrid=new Kt(e,t).init(null);if(this.element.closest(".ui-Panel").hasClass("s-Flexify")){this.propertyGrid.element.children(".categories").flexHeightOnly(1)}},$initPropertyGridAsync:function(){return Promise.resolve().then(ss.mkdel(this,function(){var e=this.byId("PropertyGrid");if(e.length<=0){return Promise.resolve()}return this.getPropertyGridOptionsAsync().then(ss.mkdel(this,function(t){this.propertyGrid=new Kt(e,t);if(this.element.closest(".ui-Panel").hasClass("s-Flexify")){this.propertyGrid.element.children(".categories").flexHeightOnly(1)}return this.propertyGrid.initialize()}),null)}),null)},getFormKey:function(){var e=ss.getAttributes(ss.getInstanceType(this),Serenity.FormKeyAttribute,true);if(e.length>=1){return e[0].value}var t=ss.getTypeFullName(ss.getInstanceType(this));var i=t.indexOf(".");if(i>=0){t=t.substring(i+1)}if(ss.endsWithString(t,"Panel")){t=t.substr(0,t.length-6)}else if(ss.endsWithString(t,"Panel")){t=t.substr(0,t.length-5)}return t},getPropertyItems:function(){var e=this.getFormKey();return Q.getForm(e)},getPropertyItemsAsync:function(){return Promise.resolve().then(ss.mkdel(this,function(){var e=this.getFormKey();return Q.getFormAsync(e)}),null)},getPropertyGridOptions:function(){var e=Jt.$ctor();e.idPrefix=this.idPrefix;e.items=this.getPropertyItems();e.mode=1;e.useCategories=false;e.localTextPrefix="Forms."+this.getFormKey()+".";return e},getPropertyGridOptionsAsync:function(){return this.getPropertyItemsAsync().then(ss.mkdel(this,function(e){var t=Jt.$ctor();t.idPrefix=this.idPrefix;t.items=e;t.mode=1;t.useCategories=false;t.localTextPrefix="Forms."+this.getFormKey()+".";return t}),null)},validateBeforeSave:function(){return this.validator.form()},getSaveEntity:function(){var e=new Object;if(ss.isValue(this.propertyGrid)){this.propertyGrid.save(e)}return e}},Ci);ss.initClass(ti,e,{});ss.initClass(ii,e,{$updateInputPlaceHolder:function(){var e=this.element.prevAll(".quick-search-field");if(ss.isValue(this.$field)){e.text(this.$field.title)}else{e.text("")}},checkIfValueChanged:function(){if(this.element.hasClass("ignore-change")){return}var e=Q.trim(ss.coalesce(this.element.val(),""));if(ss.referenceEquals(e,this.$lastValue)&&(!this.$fieldChanged||Q.isEmptyOrNull(e))){this.$fieldChanged=false;return}this.$fieldChanged=false;if(!!this.$timer){window.clearTimeout(this.$timer)}var t=this;this.$timer=window.setTimeout(function(){t.$searchNow(e)},this.options.typeDelay);this.$lastValue=e},$searchNow:function(e){this.element.parent().toggleClass(ss.coalesce(this.options.filteredParentClass,""),!!(e.length>0));this.element.parent().addClass(ss.coalesce(this.options.loadingParentClass,"")).addClass(ss.coalesce(this.options.loadingParentClass,""));
var t=ss.mkdel(this,function(e){this.element.removeClass(ss.coalesce(this.options.loadingParentClass,"")).parent().removeClass(ss.coalesce(this.options.loadingParentClass,""));if(!e){this.element.closest(".s-QuickSearchBar").find(".quick-search-icon i").effect("shake",{distance:2})}});if(!ss.staticEquals(this.options.onSearch,null)){this.options.onSearch(ss.isValue(this.$field)&&!Q.isEmptyOrNull(this.$field.name)?this.$field.name:null,e,t)}else{t(true)}},get_field:function(){return this.$field},set_field:function(e){if(!ss.referenceEquals(this.$field,e)){this.$fieldChanged=true;this.$field=e;this.$updateInputPlaceHolder();this.checkIfValueChanged()}}},Serenity.Widget);ss.initClass(si,e,{});ss.initClass(ni,e,{$addRadio:function(e,t){var i=$("<label/>").text(t);$('<input type="radio"/>').attr("name",this.uniqueName).attr("id",this.uniqueName+"_"+e).attr("value",e).prependTo(i);i.appendTo(this.element)},get_value:function(){return this.element.find("input:checked").first().val()},set_value:function(e){if(!ss.referenceEquals(e,this.get_value())){var t=this.element.find("input");var i=t.filter(":checked");if(i.length>0){i[0].checked=false}if(!ss.isNullOrEmptyString(e)){i=t.filter("[value="+e+"]");if(i.length>0){i[0].checked=true}}}}},Serenity.Widget,[Serenity.IStringValue]);ss.initClass(ri,e,{});ss.initClass(ai,e,{});ss.initClass(li,e,{get_value:function(){return this.element.find(".g-recaptcha-response").val()},set_value:function(e){}},Serenity.Widget,[Serenity.IStringValue]);ss.initClass(oi,e,{});ss.initClass(ui,e,{});ss.initClass(di,e,{});ss.initClass(ci,e,{emptyItemText:function(){var e=this.element.attr("placeholder");if(ss.isNullOrUndefined(e)){e=Q.text("Controls.SelectEditor.EmptyItemText")}return e},getService:function(){throw new ss.NotImplementedException},query:function(e,t){var i={blockUI:false,service:this.getService()+"/List",request:e,onSuccess:function(e){t(e)}};this.executeQuery(i)},executeQuery:function(e){Q.serviceCall(e)},queryByKey:function(e,t){var i={blockUI:false,service:this.getService()+"/Retrieve",request:{EntityId:e},onSuccess:function(e){t(e.Entity)}};this.executeQueryByKey(i)},executeQueryByKey:function(e){Q.serviceCall(e)},getItemKey:null,getItemText:null,getTypeDelay:function(){return 500},getSelect2Options:function(){var e=this.emptyItemText();var t=0;return{minimumResultsForSearch:10,placeHolder:!Q.isEmptyOrNull(e)?e:null,allowClear:ss.isValue(e),query:ss.mkdel(this,function(e){var i={ContainsText:Q.trimToNull(e.term),Skip:(e.page-1)*this.pageSize,Take:this.pageSize+1};if(t!==0){window.clearTimeout(t)}t=window.setTimeout(ss.mkdel(this,function(){this.query(i,ss.mkdel(this,function(t){e.callback({results:t.Entities.slice(0,this.pageSize).map(ss.mkdel(this,function(e){return{id:this.getItemKey(e),text:this.getItemText(e),source:e}})),more:t.Entities.length>=this.pageSize})}))}),this.getTypeDelay())}),initSelection:ss.mkdel(this,function(e,t){var i=e.val();if(Q.isEmptyOrNull(i)){t(null);return}this.queryByKey(i,ss.mkdel(this,function(e){t(ss.isNullOrUndefined(e)?null:{id:this.getItemKey(e),text:this.getItemText(e),source:e})}))})}},addInplaceCreate:function(e){var t=this;$("<a><b/></a>").addClass("inplace-button inplace-create").attr("title",e).insertAfter(this.element).click(function(e){t.inplaceCreateClick(e)});this.get_select2Container().add(this.element).addClass("has-inplace-button")},inplaceCreateClick:function(e){},get_select2Container:function(){return this.element.prevAll(".select2-container")},get_value:function(){return ss.safeCast(this.element.select2("val"),String)},set_value:function(e){if(!ss.referenceEquals(e,this.get_value())){this.element.select2("val",e).triggerHandler("change",[true])}}},Serenity.Widget,[Serenity.IStringValue]);ss.initClass(mi,e,{});ss.initClass(gi,e,{});ss.initClass(yi,e,{});ss.initClass(vi,e,{getOperators:function(){var e=[];e.push({key:X.contains});e.push({key:X.startsWith});e.push({key:X.EQ});e.push({key:X.NE});e.push({key:X.BW});return this.appendNullableOperators(e)},validateEditorValue:function(e){if(e.length===0){return e}return r.prototype.validateEditorValue.call(this,e)}},r,[St,kt]);ss.initClass(Si,e,{});ss.initClass(bi,e,{$createButton:function(e,t){var i=ss.coalesce(t.cssClass,"");if(t.separator===true){$('<div class="separator"></div>').appendTo(e)}var s=$('<div class="tool-button"><div class="button-outer"><span class="button-inner"></span></div></div>').appendTo(e);if(i.length>0){s.addClass(i)}if(!Q.isEmptyOrNull(t.hint)){s.attr("title",t.hint)}s.click(function(e){if(s.hasClass("disabled")){return}t.onClick(e)});var n=t.title;if(t.htmlEncode!==false){n=Q.htmlEncode(t.title)}if(!ss.isNullOrEmptyString(t.icon)){s.addClass("icon-tool-button");var r=t.icon;if(ss.startsWithString(r,"fa-")){r="fa "+r}else if(ss.startsWithString(r,"glyphicon-")){r="glyphicon "+r}n="<i class='"+r+"'></i> "+n}if(ss.isNullOrUndefined(n)||n.length===0){s.addClass("no-text")}else{s.find("span").html(n)}if(!!(!ss.isNullOrEmptyString(t.hotkey)&&ss.isValue(window.window.Mousetrap))){this.$mouseTrap=this.$mouseTrap||Mousetrap(this.options.hotkeyContext||window.document.documentElement);this.$mouseTrap.bind(t.hotkey,function(e,i){if(s.is(":visible")){s.triggerHandler("click")}return t.hotkeyAllowDefault})}},destroy:function(){this.element.find("div.tool-button").unbind("click");if(ss.isValue(this.$mouseTrap)){if(!!this.$mouseTrap.destroy){this.$mouseTrap.destroy()}else{this.$mouseTrap.reset()}this.$mouseTrap=null}Serenity.Widget.prototype.destroy.call(this)},findButton:function(e){if(ss.isValue(e)&&ss.startsWithString(e,".")){e=e.substr(1)}return $("div.tool-button."+e,this.element)}},Serenity.Widget);ss.initClass($i,e,{});ss.initClass(Ti,e,{});ss.initClass(_i,e,{format:function(e){var t=!ss.isNullOrEmptyString(this.get_urlProperty())?ss.coalesce(e.item[this.get_urlProperty()],"").toString():ss.coalesce(e.value,"").toString();if(ss.isNullOrEmptyString(t)){return""}if(!ss.isNullOrEmptyString(this.get_urlFormat())){t=ss.formatString(this.get_urlFormat(),t)}if(ss.isValue(t)&&ss.startsWithString(t,"~/")){t=Q.resolveUrl(t)}var i=!ss.isNullOrEmptyString(this.get_displayProperty())?ss.coalesce(e.item[this.get_displayProperty()],"").toString():ss.coalesce(e.value,"").toString();if(!ss.isNullOrEmptyString(this.get_displayFormat())){i=ss.formatString(this.get_displayFormat(),i)}var s="<a href='"+Q.attrEncode(t)+"'";if(!ss.isNullOrEmptyString(this.get_target())){s+=" target='"+this.get_target()+"'"}s+=">"+Q.htmlEncode(i)+"</a>";return s},get_displayProperty:function(){return this.$1$DisplayPropertyField},set_displayProperty:function(e){this.$1$DisplayPropertyField=e},get_displayFormat:function(){return this.$1$DisplayFormatField},set_displayFormat:function(e){this.$1$DisplayFormatField=e},get_urlProperty:function(){return this.$1$UrlPropertyField},set_urlProperty:function(e){this.$1$UrlPropertyField=e},get_urlFormat:function(){return this.$1$UrlFormatField},set_urlFormat:function(e){this.$1$UrlFormatField=e},get_target:function(){return this.$1$TargetField},set_target:function(e){this.$1$TargetField=e}},null,[It]);ss.initClass(Oi,e,{});ss.initClass(xi,e,{});ss.initClass(ki,e,{});ss.initClass(Ei,e,{});ss.initClass(Ii,e,{createPropertyGrid:function(){if(ss.isValue(this.$propertyGrid)){this.byId("PropertyGrid").html("").attr("class","");this.$propertyGrid=null}var e=this.byId("PropertyGrid");var t=Jt.$ctor();t.idPrefix=this.idPrefix;t.useCategories=true;t.items=this.$propertyItems;this.$propertyGrid=new Kt(e,t).init(null)},loadReport:function(e){Q.serviceCall({service:"Report/Retrieve",request:{ReportKey:e},onSuccess:ss.mkdel(this,function(t){this.$reportKey=ss.coalesce(t.ReportKey,e);this.$propertyItems=t.Properties||[];this.dialogTitle=t.Title;this.createPropertyGrid();var i=this.$propertyGrid;var s=t.InitialSettings;if(ss.isNullOrUndefined(s)){s=new Object}i.load(s);this.toolbar.findButton("print-preview-button").toggle(!t.IsDataOnlyReport);this.toolbar.findButton("export-pdf-button").toggle(!t.IsDataOnlyReport);this.toolbar.findButton("export-docx-button").toggle(!t.IsDataOnlyReport);this.dialogOpen(null)})})},executeReport:function(e,t){if(!this.validateForm()){return}var i=new Object;this.$propertyGrid.save(i);Q.postToService({service:"Report/Execute",request:{ReportKey:this.$reportKey,DesignId:"Default",ExportType:t,Parameters:i},target:e})},getToolbarButtons:function(){var e=[];e.push({title:"Önizleme",cssClass:"print-preview-button",onClick:ss.mkdel(this,function(){this.executeReport("_blank",null)})});e.push({title:"PDF",cssClass:"export-pdf-button",onClick:ss.mkdel(this,function(){this.executeReport("","Pdf")})});e.push({title:"Excel",cssClass:"export-xlsx-button",onClick:ss.mkdel(this,function(){this.executeReport("","Xlsx")})});e.push({title:"Word",cssClass:"export-docx-button",onClick:ss.mkdel(this,function(){this.executeReport("","Docx")})});return e}},Serenity.TemplatedDialog,[yt]);ss.initClass(Fi,e,{$updateMatchFlags:function(e){var t=$("#ReportList").find("li").removeClass("non-match");e=Q.trimToNull(e);if(ss.isNullOrUndefined(e)){t.children("ul").hide();t.show().removeClass("expanded");return}var i=ss.netSplit(e,[44,32].map(function(e){return String.fromCharCode(e)}),null,1);for(var s=0;s<i.length;s++){i[s]=Q.trimToNull(Select2.util.stripDiacritics(i[s]).toUpperCase())}var n=t.filter(".report-item");n.each(function(e,t){var s=$(t);var n=Select2.util.stripDiacritics(ss.coalesce(s.text(),"").toUpperCase());for(var r=0;r<i.length;r++){var a=i[r];if(ss.isValue(a)&&!(n.indexOf(a)!==-1)){s.addClass("non-match");break}}});var r=n.not(".non-match");var a=r.parents("li").add(r);var l=t.not(a);l.hide().addClass("non-match");a.show();if(a.length<=100){t.children("ul").show();t.addClass("expanded")}},$categoryClick:function(e){var t=$(e.target).closest("li");if(t.hasClass("expanded")){t.find("ul").hide("fast");t.removeClass("expanded");t.find("li").removeClass("expanded")}else{t.addClass("expanded");t.children("ul").show("fast");if(t.children("ul").children("li").length===1&&!t.children("ul").children("li").hasClass("expanded")){t.children("ul").children("li").children(".line").click()}}},$reportLinkClick:function(e){e.preventDefault();var t=new Ii({reportKey:$(e.target).data("key")})}},Serenity.Widget);ss.initClass(Ni,e,{});ss.setMetadata(s,{attr:[new Serenity.EditorAttribute,new Serenity.OptionsTypeAttribute(Object)]});ss.setMetadata(l,{members:[{attr:[new Serenity.OptionAttribute],name:"FalseText",type:16,returnType:String,getter:{name:"get_FalseText",type:8,sname:"get_falseText",returnType:String,params:[]},setter:{name:"set_FalseText",type:8,sname:"set_falseText",returnType:Object,params:[String]}},{attr:[new Serenity.OptionAttribute],name:"TrueText",type:16,returnType:String,getter:{name:"get_TrueText",type:8,sname:"get_trueText",returnType:String,params:[]},setter:{name:"set_TrueText",type:8,sname:"set_trueText",returnType:Object,params:[String]}}]});ss.setMetadata(c,{attr:[new Serenity.ElementAttribute("<div/>"),new Serenity.IdPropertyAttribute("id")]});ss.setMetadata(m,{attr:[new Serenity.EditorAttribute,new Ni("Tarih"),new Serenity.ElementAttribute('<input type="text"/>')],members:[{attr:[new Serenity.OptionAttribute],name:"MaxValue",type:16,returnType:String,getter:{name:"get_MaxValue",type:8,sname:"get_maxValue",returnType:String,params:[]},setter:{name:"set_MaxValue",type:8,sname:"set_maxValue",returnType:Object,params:[String]}},{attr:[new Serenity.OptionAttribute],name:"MinValue",type:16,returnType:String,getter:{name:"get_MinValue",type:8,sname:"get_minValue",returnType:String,params:[]},setter:{name:"set_MinValue",type:8,sname:"set_minValue",returnType:Object,params:[String]}},{attr:[new Serenity.OptionAttribute],name:"SqlMinMax",type:16,returnType:Boolean,getter:{name:"get_SqlMinMax",type:8,sname:"get_sqlMinMax",returnType:Boolean,params:[]},setter:{name:"set_SqlMinMax",type:8,sname:"set_sqlMinMax",returnType:Object,params:[Boolean]}},{attr:[new Serenity.OptionAttribute],name:"YearRange",type:16,returnType:String,getter:{name:"get_YearRange",type:8,params:[],returnType:String,fget:"yearRange"},setter:{name:"set_YearRange",type:8,params:[String],returnType:Object,fset:"yearRange"},fname:"yearRange"}]});ss.setMetadata(y,{members:[{attr:[new Serenity.OptionAttribute],name:"DisplayFormat",type:16,returnType:String,getter:{name:"get_DisplayFormat",type:8,sname:"get_displayFormat",returnType:String,params:[]},setter:{name:"set_DisplayFormat",type:8,sname:"set_displayFormat",returnType:Object,params:[String]}}]});ss.setMetadata(v,{attr:[new Serenity.EditorAttribute,new Ni("Date/Time"),new Serenity.ElementAttribute('<input type="text"/>')],members:[{attr:[new Serenity.OptionAttribute],name:"MaxValue",type:16,returnType:String,getter:{name:"get_MaxValue",type:8,sname:"get_maxValue",returnType:String,params:[]},setter:{name:"set_MaxValue",type:8,sname:"set_maxValue",returnType:Object,params:[String]}},{attr:[new Serenity.OptionAttribute],name:"MinValue",type:16,returnType:String,getter:{name:"get_MinValue",type:8,sname:"get_minValue",returnType:String,params:[]},setter:{name:"set_MinValue",type:8,sname:"set_minValue",returnType:Object,params:[String]}},{attr:[new Serenity.OptionAttribute],name:"SqlMinMax",type:16,returnType:Boolean,getter:{name:"get_SqlMinMax",type:8,sname:"get_sqlMinMax",returnType:Boolean,params:[]},setter:{name:"set_SqlMinMax",type:8,sname:"set_sqlMinMax",returnType:Object,params:[Boolean]}}]});ss.setMetadata(b,{attr:[new Serenity.EditorAttribute,new Ni("Yıl"),new Serenity.OptionsTypeAttribute(T),new Serenity.ElementAttribute('<input type="hidden"/>')]});ss.setMetadata(_,{attr:[new Serenity.EditorAttribute,new Ni("Ondalıklı Sayı"),new Serenity.OptionsTypeAttribute(O),new Serenity.ElementAttribute('<input type="text"/>')]});ss.setMetadata(O,{members:[{attr:[new Ni("Ondalık"),new w("Integer")],name:"Decimals",type:16,returnType:ss.makeGenericType(ss.Nullable$1,[ss.Int32]),getter:{name:"get_Decimals",type:8,params:[],returnType:ss.makeGenericType(ss.Nullable$1,[ss.Int32]),fget:"decimals"},setter:{name:"set_Decimals",type:8,params:[ss.makeGenericType(ss.Nullable$1,[ss.Int32])],returnType:Object,fset:"decimals"},fname:"decimals"},{attr:[new Ni("Max Değer")],name:"MaxValue",type:16,returnType:String,getter:{name:"get_MaxValue",type:8,params:[],returnType:String,fget:"maxValue"},setter:{name:"set_MaxValue",type:8,params:[String],returnType:Object,fset:"maxValue"},fname:"maxValue"},{attr:[new Ni("Min Değer")],name:"MinValue",type:16,returnType:String,getter:{name:"get_MinValue",type:8,params:[],returnType:String,fget:"minValue"},setter:{name:"set_MinValue",type:8,params:[String],returnType:Object,fset:"minValue"},fname:"minValue"},{attr:[new Ni("Ondalıkları Sıfırla Doldur"),new w("Boolean")],name:"PadDecimals",type:16,returnType:ss.makeGenericType(ss.Nullable$1,[Boolean]),getter:{name:"get_PadDecimals",type:8,params:[],returnType:ss.makeGenericType(ss.Nullable$1,[Boolean]),fget:"padDecimals"},setter:{name:"set_PadDecimals",type:8,params:[ss.makeGenericType(ss.Nullable$1,[Boolean])],returnType:Object,fset:"padDecimals"},fname:"padDecimals"}]});ss.setMetadata(F,{members:[{attr:[new Serenity.OptionAttribute],name:"EditorType",type:16,returnType:String,getter:{name:"get_EditorType",type:8,sname:"get_editorType",returnType:String,params:[]},setter:{name:"set_EditorType",type:8,sname:"set_editorType",returnType:Object,params:[String]}},{attr:[new Serenity.OptionAttribute],name:"UseLike",type:16,returnType:Boolean,getter:{name:"get_UseLike",type:8,sname:"get_useLike",returnType:Boolean,params:[]},setter:{name:"set_UseLike",type:8,sname:"set_useLike",returnType:Object,params:[Boolean]}},{attr:[new Serenity.OptionAttribute],name:"UseRelative",type:16,returnType:Boolean,getter:{name:"get_UseRelative",type:8,sname:"get_useRelative",returnType:Boolean,params:[]},setter:{name:"set_UseRelative",type:8,sname:"set_useRelative",returnType:Object,params:[Boolean]}}]});ss.setMetadata(N,{attrAllowMultiple:true});ss.setMetadata(D,{attr:[new Serenity.EditorAttribute,new Ni("Editör Tipi"),new Serenity.ElementAttribute('<input type="hidden" />')]});ss.setMetadata(U,{attr:[new Serenity.EditorAttribute,new Ni("E-posta"),new Serenity.ElementAttribute('<input type="text"/>')]});ss.setMetadata(B,{members:[{attr:[new Ni("Etki Alanı")],name:"Domain",type:16,returnType:String,getter:{name:"get_Domain",type:8,params:[],returnType:String,fget:"domain"},setter:{name:"set_Domain",type:8,params:[String],returnType:Object,fset:"domain"},fname:"domain"},{attr:[new Ni("Etki Alanı Salt Okunur")],name:"ReadOnlyDomain",type:16,returnType:Boolean,getter:{name:"get_ReadOnlyDomain",type:8,params:[],returnType:Boolean,fget:"readOnlyDomain"},setter:{name:"set_ReadOnlyDomain",type:8,params:[Boolean],returnType:Object,fset:"readOnlyDomain"},fname:"readOnlyDomain"}]});ss.setMetadata(M,{attr:[new Serenity.EditorAttribute,new Ni("Enumeration"),new Serenity.OptionsTypeAttribute(L),new Serenity.ElementAttribute('<input type="hidden"/>')]});ss.setMetadata(L,{members:[{attr:[new Ni("Allow Clear"),new w("Boolean")],name:"AllowClear",type:16,returnType:ss.makeGenericType(ss.Nullable$1,[Boolean]),getter:{name:"get_AllowClear",type:8,params:[],returnType:ss.makeGenericType(ss.Nullable$1,[Boolean]),fget:"allowClear"},setter:{name:"set_AllowClear",type:8,params:[ss.makeGenericType(ss.Nullable$1,[Boolean])],returnType:Object,fset:"allowClear"},fname:"allowClear"},{attr:[new Ni("Enum Type Key")],name:"EnumKey",type:16,returnType:String,getter:{name:"get_EnumKey",type:8,params:[],returnType:String,fget:"enumKey"},setter:{name:"set_EnumKey",type:8,params:[String],returnType:Object,fset:"enumKey"},fname:"enumKey"},{attr:[new Ni("Enum Type Key"),new ut],name:"EnumType",type:16,returnType:Function,getter:{name:"get_EnumType",type:8,params:[],returnType:Function,fget:"enumType"},setter:{name:"set_EnumType",type:8,params:[Function],returnType:Object,fset:"enumType"},fname:"enumType"}]});ss.setMetadata(W,{members:[{attr:[new Serenity.OptionAttribute],name:"EnumKey",type:16,returnType:String,getter:{name:"get_EnumKey",type:8,sname:"get_enumKey",returnType:String,params:[]},setter:{name:"set_EnumKey",type:8,sname:"set_enumKey",returnType:Object,params:[String]}}]});ss.setMetadata(H,{members:[{attr:[new Serenity.OptionAttribute],name:"DisplayFormat",type:16,returnType:String,getter:{name:"get_DisplayFormat",type:8,sname:"get_displayFormat",returnType:String,params:[]},setter:{name:"set_DisplayFormat",type:8,sname:"set_displayFormat",returnType:Object,params:[String]}},{attr:[new Serenity.OptionAttribute],name:"OriginalNameProperty",type:16,returnType:String,getter:{name:"get_OriginalNameProperty",type:8,sname:"get_originalNameProperty",returnType:String,params:[]},setter:{name:"set_OriginalNameProperty",type:8,sname:"set_originalNameProperty",returnType:Object,params:[String]}}]});ss.setMetadata(nt,{attr:[new Serenity.ElementAttribute("<div/>")]});ss.setMetadata(ct,{attr:[new Serenity.EditorAttribute,new Ni("Html İçerik"),new Serenity.OptionsTypeAttribute(ft),new Serenity.ElementAttribute("<textarea />")]});ss.setMetadata(ft,{members:[{attr:[new ut],name:"Cols",type:16,returnType:ss.makeGenericType(ss.Nullable$1,[ss.Int32]),getter:{name:"get_Cols",type:8,params:[],returnType:ss.makeGenericType(ss.Nullable$1,[ss.Int32]),fget:"cols"},setter:{name:"set_Cols",type:8,params:[ss.makeGenericType(ss.Nullable$1,[ss.Int32])],returnType:Object,fset:"cols"},fname:"cols"},{attr:[new ut],name:"Rows",type:16,returnType:ss.makeGenericType(ss.Nullable$1,[ss.Int32]),getter:{name:"get_Rows",type:8,params:[],returnType:ss.makeGenericType(ss.Nullable$1,[ss.Int32]),fget:"rows"},setter:{name:"set_Rows",type:8,params:[ss.makeGenericType(ss.Nullable$1,[ss.Int32])],returnType:Object,fset:"rows"},fname:"rows"}]});ss.setMetadata(ht,{attr:[new Serenity.EditorAttribute,new Ni("Html Content (Font Style and Color Only)"),new Serenity.OptionsTypeAttribute(ft),new Serenity.ElementAttribute("<textarea />")]});ss.setMetadata(pt,{attr:[new Serenity.EditorAttribute,new Ni("Html Content (Report Compatible Limited Set)"),new Serenity.OptionsTypeAttribute(ft),new Serenity.ElementAttribute("<textarea />")]});ss.setMetadata(bt,{attr:[new Serenity.EditorAttribute,new Ni("Image Upload"),new Serenity.OptionsTypeAttribute($t),new Serenity.ElementAttribute("<div/>")]});ss.setMetadata($t,{members:[{attr:[new Ni("Allow Non Image Files")],name:"AllowNonImage",type:16,returnType:Boolean,getter:{name:"get_AllowNonImage",type:8,params:[],returnType:Boolean,fget:"allowNonImage"},setter:{name:"set_AllowNonImage",type:8,params:[Boolean],returnType:Object,fset:"allowNonImage"},fname:"allowNonImage"},{attr:[new Ni("Display File Name")],name:"DisplayFileName",type:16,returnType:Boolean,getter:{name:"get_DisplayFileName",type:8,params:[],returnType:Boolean,fget:"displayFileName"},setter:{name:"set_DisplayFileName",type:8,params:[Boolean],returnType:Object,fset:"displayFileName"},fname:"displayFileName"},{attr:[new Ni("Max Height")],name:"MaxHeight",type:16,returnType:ss.Int32,getter:{name:"get_MaxHeight",type:8,params:[],returnType:ss.Int32,fget:"maxHeight"},setter:{name:"set_MaxHeight",type:8,params:[ss.Int32],returnType:Object,fset:"maxHeight"},fname:"maxHeight"},{attr:[new Ni("Max Size")],name:"MaxSize",type:16,returnType:ss.Int32,getter:{name:"get_MaxSize",type:8,params:[],returnType:ss.Int32,fget:"maxSize"},setter:{name:"set_MaxSize",type:8,params:[ss.Int32],returnType:Object,fset:"maxSize"},fname:"maxSize"},{attr:[new Ni("Min Width")],name:"MaxWidth",type:16,returnType:ss.Int32,getter:{name:"get_MaxWidth",type:8,params:[],returnType:ss.Int32,fget:"maxWidth"},setter:{name:"set_MaxWidth",type:8,params:[ss.Int32],returnType:Object,fset:"maxWidth"},fname:"maxWidth"},{attr:[new Ni("Max Height")],name:"MinHeight",type:16,returnType:ss.Int32,getter:{name:"get_MinHeight",type:8,params:[],returnType:ss.Int32,fget:"minHeight"},setter:{name:"set_MinHeight",type:8,params:[ss.Int32],returnType:Object,fset:"minHeight"},fname:"minHeight"},{attr:[new Ni("Min Size")],name:"MinSize",type:16,returnType:ss.Int32,getter:{name:"get_MinSize",type:8,params:[],returnType:ss.Int32,fget:"minSize"},setter:{name:"set_MinSize",type:8,params:[ss.Int32],returnType:Object,fset:"minSize"},fname:"minSize"},{attr:[new Ni("Min Width")],name:"MinWidth",type:16,returnType:ss.Int32,getter:{name:"get_MinWidth",type:8,params:[],returnType:ss.Int32,fget:"minWidth"},setter:{name:"set_MinWidth",type:8,params:[ss.Int32],returnType:Object,fset:"minWidth"},fname:"minWidth"},{attr:[new Ni("Original Name Property")],name:"OriginalNameProperty",type:16,returnType:String,getter:{name:"get_OriginalNameProperty",type:8,params:[],returnType:String,fget:"originalNameProperty"},setter:{name:"set_OriginalNameProperty",type:8,params:[String],returnType:Object,fset:"originalNameProperty"},fname:"originalNameProperty"},{attr:[new Ni("UrlPrefix")],name:"UrlPrefix",type:16,returnType:String,getter:{name:"get_UrlPrefix",type:8,params:[],returnType:String,fget:"urlPrefix"},setter:{name:"set_UrlPrefix",type:8,params:[String],returnType:Object,fset:"urlPrefix"},fname:"urlPrefix"}]});ss.setMetadata(_t,{attr:[new Serenity.EditorAttribute,new Ni("Tamsayı"),new Serenity.OptionsTypeAttribute(Ot),new Serenity.ElementAttribute('<input type="text"/>')]});ss.setMetadata(Nt,{attr:[new Serenity.EditorAttribute,new Serenity.OptionsTypeAttribute(Object)]});ss.setMetadata(wt,{attr:[new Serenity.ElementAttribute('<input type="hidden"/>')],members:[{attr:[new Serenity.OptionAttribute],name:"CascadeField",type:16,returnType:String,getter:{name:"get_CascadeField",type:8,sname:"get_cascadeField",returnType:String,params:[]},setter:{name:"set_CascadeField",type:8,sname:"set_cascadeField",returnType:Object,params:[String]}},{attr:[new Serenity.OptionAttribute],name:"CascadeFrom",type:16,returnType:String,getter:{name:"get_CascadeFrom",type:8,sname:"get_cascadeFrom",returnType:String,params:[]},setter:{name:"set_CascadeFrom",type:8,sname:"set_cascadeFrom",returnType:Object,params:[String]}},{attr:[new Serenity.OptionAttribute],name:"CascadeValue",type:16,returnType:Object,getter:{name:"get_CascadeValue",type:8,sname:"get_cascadeValue",returnType:Object,params:[]},setter:{name:"set_CascadeValue",type:8,sname:"set_cascadeValue",returnType:Object,params:[Object]}},{attr:[new Serenity.OptionAttribute],name:"FilterField",type:16,returnType:String,getter:{name:"get_FilterField",type:8,sname:"get_filterField",returnType:String,params:[]},setter:{name:"set_FilterField",type:8,sname:"set_filterField",returnType:Object,params:[String]}},{attr:[new Serenity.OptionAttribute],name:"FilterValue",type:16,returnType:Object,getter:{name:"get_FilterValue",type:8,sname:"get_filterValue",returnType:Object,params:[]},setter:{name:"set_FilterValue",type:8,sname:"set_filterValue",returnType:Object,params:[Object]}},{attr:[new Serenity.OptionAttribute],name:"OpenDialogAsPanel",type:16,returnType:ss.makeGenericType(ss.Nullable$1,[Boolean]),getter:{name:"get_OpenDialogAsPanel",type:8,sname:"get_openDialogAsPanel",returnType:ss.makeGenericType(ss.Nullable$1,[Boolean]),params:[]},setter:{name:"set_OpenDialogAsPanel",type:8,sname:"set_openDialogAsPanel",returnType:Object,params:[ss.makeGenericType(ss.Nullable$1,[Boolean])]}}]});ss.setMetadata(Pt,{attr:[new Serenity.EditorAttribute,new Ni("MultipleImage Upload"),new Serenity.OptionsTypeAttribute($t),new Serenity.ElementAttribute("<div/>")],members:[{attr:[new Serenity.OptionAttribute],name:"JsonEncodeValue",type:16,returnType:Boolean,getter:{name:"get_JsonEncodeValue",type:8,sname:"get_jsonEncodeValue",returnType:Boolean,params:[]},setter:{name:"set_JsonEncodeValue",type:8,sname:"set_jsonEncodeValue",returnType:Object,params:[Boolean]}}]});ss.setMetadata(Qt,{members:[{attr:[new Serenity.OptionAttribute],name:"DisplayFormat",type:16,returnType:String,getter:{name:"get_DisplayFormat",type:8,sname:"get_displayFormat",returnType:String,params:[]},setter:{name:"set_DisplayFormat",type:8,sname:"set_displayFormat",returnType:Object,params:[String]}}]});ss.setMetadata(Bt,{attr:[new Serenity.EditorAttribute,new Ni("Şifre")]});ss.setMetadata(Gt,{attr:[new Serenity.EditorAttribute,new Ni("Kişi İsim"),new Serenity.ElementAttribute('<input type="text"/>')]});ss.setMetadata(qt,{attr:[new Serenity.EditorAttribute,new Ni("Telefon"),new Serenity.OptionsTypeAttribute(Mt),new Serenity.ElementAttribute('<input type="text"/>')]});ss.setMetadata(Mt,{members:[{attr:[new Ni("Dahili Girişine İzin Ver")],name:"AllowExtension",type:16,returnType:Boolean,getter:{name:"get_AllowExtension",type:8,params:[],returnType:Boolean,fget:"allowExtension"},setter:{name:"set_AllowExtension",type:8,params:[Boolean],returnType:Object,fset:"allowExtension"},fname:"allowExtension"},{attr:[new Ni("Uluslararası Telefon Girişine İzin Ver")],name:"AllowInternational",type:16,returnType:Boolean,getter:{name:"get_AllowInternational",type:8,params:[],returnType:Boolean,fget:"allowInternational"},setter:{name:"set_AllowInternational",type:8,params:[Boolean],returnType:Object,fset:"allowInternational"},fname:"allowInternational"},{attr:[new Ni("Dahili Telefon")],name:"Internal",type:16,returnType:Boolean,getter:{name:"get_Internal",type:8,params:[],returnType:Boolean,fget:"internal"},setter:{name:"set_Internal",type:8,params:[Boolean],returnType:Object,fset:"internal"},fname:"internal"},{attr:[new Ni("Cep Telefonu")],name:"Mobile",type:16,returnType:Boolean,getter:{name:"get_Mobile",type:8,params:[],returnType:Boolean,fget:"mobile"},setter:{name:"set_Mobile",type:8,params:[Boolean],returnType:Object,fset:"mobile"},fname:"mobile"},{attr:[new Ni("Birden Çok Girişe İzin Ver")],name:"Multiple",type:16,returnType:Boolean,getter:{name:"get_Multiple",type:8,params:[],returnType:Boolean,fget:"multiple"},setter:{name:"set_Multiple",type:8,params:[Boolean],returnType:Object,fset:"multiple"},fname:"multiple"}]});ss.setMetadata(ni,{attr:[new Serenity.EditorAttribute,new Ni("Radio Button"),new Serenity.ElementAttribute("<div/>")]});ss.setMetadata(li,{attr:[new Serenity.EditorAttribute,new Serenity.ElementAttribute("<div />")]});ss.setMetadata(ci,{attr:[new Serenity.ElementAttribute('<input type="hidden"/>')]});ss.setMetadata(fi,{attr:[new Serenity.ElementAttribute('<input type="hidden"/>')]});ss.setMetadata(hi,{attr:[new Serenity.EditorAttribute,new Ni("Açılır Liste"),new Serenity.OptionsTypeAttribute(pi),new Serenity.ElementAttribute('<input type="hidden"/>')]});ss.setMetadata(pi,{members:[{attr:[new Ni("Boş Eleman Metni")],name:"EmptyOptionText",type:16,returnType:String,getter:{name:"get_EmptyOptionText",type:8,params:[],returnType:String,fget:"emptyOptionText"},setter:{name:"set_EmptyOptionText",type:8,params:[String],returnType:Object,fset:"emptyOptionText"},fname:"emptyOptionText"},{attr:[new ut],name:"Items",type:16,returnType:Array,getter:{name:"get_Items",type:8,params:[],returnType:Array,fget:"items"},setter:{name:"set_Items",type:8,params:[Array],returnType:Object,fset:"items"},fname:"items"}]});ss.setMetadata(Ci,{attr:[new Serenity.ElementAttribute("<div/>")]});ss.setMetadata(_i,{members:[{attr:[new Serenity.OptionAttribute],name:"DisplayFormat",type:16,returnType:String,getter:{name:"get_DisplayFormat",type:8,sname:"get_displayFormat",returnType:String,params:[]},setter:{name:"set_DisplayFormat",type:8,sname:"set_displayFormat",returnType:Object,params:[String]}},{attr:[new Serenity.OptionAttribute],name:"DisplayProperty",type:16,returnType:String,getter:{name:"get_DisplayProperty",type:8,sname:"get_displayProperty",returnType:String,params:[]},setter:{name:"set_DisplayProperty",type:8,sname:"set_displayProperty",returnType:Object,params:[String]}},{attr:[new Serenity.OptionAttribute],name:"Target",type:16,returnType:String,getter:{name:"get_Target",type:8,sname:"get_target",returnType:String,params:[]},setter:{name:"set_Target",type:8,sname:"set_target",returnType:Object,params:[String]}},{attr:[new Serenity.OptionAttribute],name:"UrlFormat",type:16,returnType:String,getter:{name:"get_UrlFormat",type:8,sname:"get_urlFormat",returnType:String,params:[]},setter:{name:"set_UrlFormat",type:8,sname:"set_urlFormat",returnType:Object,params:[String]}},{attr:[new Serenity.OptionAttribute],name:"UrlProperty",type:16,returnType:String,getter:{name:"get_UrlProperty",type:8,sname:"get_urlProperty",returnType:String,params:[]},setter:{name:"set_UrlProperty",type:8,sname:"set_urlProperty",returnType:Object,params:[String]}}]});(function(){Serenity.Widget.prototype["changeSelect2"]=function(e){var t=this;t.element.bind("change."+t.uniqueName,function(t,i){if(!!(Ei.hasOriginalEvent(t)||!i)){e(t)}})};Serenity.Widget.prototype["change"]=function(e){var t=this;t.element.bind("change."+t.uniqueName,e)};Serenity.Widget.prototype["getGridField"]=function(){return this.element.closest(".field")};$.fn.tryGetWidget=function(e){var t=this;var i;if(ss.isAssignableFrom(Serenity.Widget,e)){var s=Ei.getWidgetName(e);i=t.data(s);if(ss.isValue(i)&&!ss.isAssignableFrom(e,ss.getInstanceType(i))){i=null}if(ss.isValue(i)){return i}}var n=t.data();if(ss.isNullOrUndefined(n)){return null}var r=ss.getEnumerator(Object.keys(n));try{while(r.moveNext()){var a=r.current();i=n[a];if(ss.isValue(i)&&ss.isAssignableFrom(e,ss.getInstanceType(i))){return i}}}finally{r.dispose()}return null};$.fn.getWidget=function(e){var t=this;if(ss.isNullOrUndefined(t)){throw new ss.ArgumentNullException("element")}if(t.length===0){throw new ss.Exception(ss.formatString("Searching for widget of type '{0}' on a non-existent element! ({1})",ss.getTypeFullName(e),t.selector))}var i=t.tryGetWidget(e);if(ss.isNullOrUndefined(i)){var s=ss.formatString("Element has no widget of type '{0}'! If you have recently changed editor type of a property in a form class, or changed data type in row (which also changes editor type) your script side Form definition might be out of date. Make sure your project builds successfully and transform T4 templates",ss.getTypeFullName(e));Q.notifyError(s,"",null);throw new ss.Exception(s)}return i}})();(function(){P.$dummy={name:"_"}
})();(function(){Q.prop(fi,"value");Q.prop(fi,"values");Q.prop(fi,"readOnly")})();(function(){I.$knownTypes={}})();(function(){Q.prop(wt,"cascadeField");Q.prop(wt,"cascadeFrom");Q.prop(wt,"cascadeValue");Q.prop(wt,"filterField");Q.prop(wt,"filterValue")})();(function(){X.isTrue="true";X.isFalse="false";X.contains="contains";X.startsWith="startswith";X.EQ="eq";X.NE="ne";X.GT="gt";X.GE="ge";X.LT="lt";X.LE="le";X.BW="bw";X.IN="in";X.isNull="isnull";X.isNotNull="isnotnull";X.toCriteriaOperator=null;X.toCriteriaOperator={};X.toCriteriaOperator[X.EQ]="=";X.toCriteriaOperator[X.NE]="!=";X.toCriteriaOperator[X.GT]=">";X.toCriteriaOperator[X.GE]=">=";X.toCriteriaOperator[X.LT]="<";X.toCriteriaOperator[X.LE]="<="})();(function(){J.$knownTypes=null})();(function(){Serenity.Widget.prototype["addValidationRule"]=function(e,t){return xi.addValidationRule(this.element,e,t)}})();(function(){Q.prop(m,"value");Q.prop(m,"valueAsDate")})();(function(){z.$knownTypes=null})();(function(){Z.panelTemplate="<div id='~_Rows' class='filter-lines'></div><div id='~_Buttons' class='buttons'><button id='~_AddButton' class='btn btn-primary add'></button><button id='~_SearchButton' class='btn btn-success search'></button><button id='~_ResetButton' class='btn btn-danger reset'></button></div><div style='clear: both'></div>";Z.rowTemplate="<div class='filter-line'><a class='delete'><span></span></a><div class='l'><a class='rightparen' href='#'>)</a><a class='andor' href='#'></a><a class='leftparen' href='#'>(</a></div><div class='f'><input type='hidden' class='field-select'></div><div class='o'></div><div class='v'></div><div style='clear: both'></div></div>"})();(function(){st.$knownTypes=null})();(function(){Q.prop(v,"value");Q.prop(v,"valueAsDate")})();(function(){p.defaultPersistanceStorage=null;p.defaultRowHeight=0;p.defaultHeaderHeight=0;p.defaultRowHeight=27;p.defaultHeaderHeight=30})();(function(){Q.prop(c,"value")})();(function(){Q.prop(_,"value")})();(function(){E.$enterKeyCode=13})();(function(){A.$knownTypes=null})();(function(){ti.$registeredTypes=null})();(function(){D.$editorTypeList=null})();(function(){Q.prop(U,"value")})();(function(){Q.prop(ni,"value")})();(function(){Kt.$knownEditorTypes=null;Kt.$knownEditorTypes={}})();(function(){G.defaultLanguageList=null})();(function(){Q.prop(ct,"value")})();(function(){Q.prop(bt,"value")})();(function(){Q.prop(_t,"value")})();(function(){Q.prop(Pt,"value")})();(function(){Q.prop(qt,"value")})();(function(){Q.prop(ci,"value")})()})();